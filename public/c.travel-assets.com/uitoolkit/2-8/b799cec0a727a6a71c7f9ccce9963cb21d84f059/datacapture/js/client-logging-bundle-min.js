window.dctk=window.dctk||{};(function(v,A,q){if(!A.enabled){return}var o="//cl.expedia.com/1x1.gif",B="//cl.expedia.com/2x2.gif",G={},I=[];var l=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:v.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}];var f=[{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"Kindle",identity:"Kindle"},{string:navigator.userAgent,subString:"BB10",identity:"Blackberry"},{string:navigator.userAgent,subString:"Touch",addlString:"MSIE 10",identity:"Surface"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}];var g=["www.expedia.com","www.expedia.co.uk","www.expedia.ca","www.expedia.de","www.expedia.it","www.expedia.es","www.expedia.nl","www.expedia.mx","www.expedia.com.sg","www.expedia.com.my","www.expedia.co.kr","www.expedia.co.th","www.expedia.com.hk","www.expedia.fr","www.expedia.com.au","www.expedia.co.in","www.expedia.co.jp","www.expedia.co.nz","www.expedia.co.id","www.expedia.com.tw","www.expedia.ie","www.expedia.be","www.expedia.se","www.expedia.no","www.expedia.dk","www.expedia.com.ph","www.expedia.com.br","www.expedia.com.ar","www.expedia.com.vn","www.expedia.fi","www.expedia.at","expedia.viaggi.virgilio.it","expedia.viaggi.tiscali.it","expedia.corriere.it","expedia.viaggi.deejay.it","expedia.allmusic.tv","voyages.anyway.com","yahoo.expedia.com.au","ninemsn.expedia.com.au","jal.expedia.co.jp","msn.expedia.co.jp","expedia-aarp.com","voyage-sncf.com","expediafortd.com","vacation.hotwire.com","www.travelocity.com","www.travelocity.ca"];var n={};var s=function(N){for(var K=0;K<N.length;K++){var L=N[K].string;var M=N[K].prop;A.versionSearchString=N[K].versionSearch||N[K].identity;if(L){if(L.indexOf(N[K].subString)!=-1&&(!N[K].addlString||L.indexOf(N[K].addlString)!=-1)){return N[K].identity||"unknown"}}else{if(M){return N[K].identity||"unknown"}}}};var z=function(K){var i=K.indexOf(A.versionSearchString);if(i==-1){return}return parseFloat(K.substring(i+A.versionSearchString.length+1))};var a=function(N,L){for(var M=0,K=L.length;M<K;M++){if(N===L[M]){return true}}return false};var m=function(i){if(i.toISOString){return i.toISOString()}else{return i.getFullYear().toString()+"-"+i.getMonth()+"-"+i.getDate()+"T"+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds()}};var w=function(L,P){var K=false,O=true,R=L.document,Q=R.documentElement,U=R.addEventListener?"addEventListener":"attachEvent",S=R.addEventListener?"removeEventListener":"detachEvent",i=R.addEventListener?"":"on",T=function(V){if(V.type=="readystatechange"&&R.readyState!="complete"){return}(V.type=="load"?L:R)[S](i+V.type,T,false);if(!K&&(K=true)){P.call(L,V.type||V)}},N=function(){try{Q.doScroll("left")}catch(V){setTimeout(N,50);return}T("poll")};if(R.readyState=="complete"){P.call(L,"lazy")}else{if(R.createEventObject&&Q.doScroll){try{O=!L.frameElement}catch(M){}if(O){N()}}R[U](i+"DOMContentLoaded",T,false);R[U](i+"readystatechange",T,false);L[U](i+"load",T,false)}};var C=function(L,K,i){if(L.attachEvent){L["e"+K+i]=i;L[K+i]=function(){L["e"+K+i](v.event)};L.attachEvent("on"+K,L[K+i])}else{L.addEventListener(K,i,false)}};var F=function(K){var i=new Image();i.src=o+d+"&guid="+k()+"&logTime="+m(new Date())+"&action=logTrxEvent&"+K.join("&");b.push(i)};var k=function(){return A.guid||"unknown"};var j=function(K){var i=new Image();i.src=B+d+"&guid="+k()+"&logTime="+m(new Date())+"&action=logErrors&"+K.join("&");b.push(i)};var y=function(){if("performance" in v){var i=v.performance.timing;n.unloadTime=i.unloadEventEnd-i.unloadEventStart;n.redirectTime=i.redirectEnd-i.redirectStart;n.dnsTime=i.domainLookupEnd-i.domainLookupStart;n.connectionTime=i.connectEnd-i.connectStart;n.requestTime=i.responseStart-i.requestStart;n.responseTime=i.responseEnd-i.responseStart;n.parsingTime=i.domInteractive-i.domLoading;n.domReadyCallbackTime=i.domContentLoadedEventEnd-i.domContentLoadedEventStart;n.onLdCallbackTime=i.loadEventEnd-i.loadEventStart;n.processingTime=i.domComplete-i.domLoading;n.navigationToResponse=i.responseStart-i.navigationStart;n.navigationToDomContentLoaded=i.domContentLoadedEventStart-i.navigationStart;n.navigationToOnLd=i.loadEventStart-i.navigationStart;n.fetchToResponse=i.responseStart-i.fetchStart;n.fetchToDomContentLoaded=i.domContentLoadedEventStart-i.fetchStart;n.fetchToOnLd=i.loadEventStart-i.fetchStart;n.responseToDomContentLoaded=i.domContentLoadedEventStart-i.responseStart;n.responseToOnLd=i.loadEventStart-i.responseStart}return n};var p=function(){var i=[];if("responseToOnLd" in n){for(var K in n){if(n.hasOwnProperty(K)){i.push(K+"="+n[K])}}if(i.length>0){dctk.logging.logTrxEvent("navTiming",i.join("&"))}}};var H=s(l);var h=z(navigator.userAgent)||z(navigator.appVersion)||"an unknown version";var J=v.location.hostname;var x=a(J,g);var e=s(f);var r,c="";var E=[];if(A.logKey&&A.logKey.indexOf("%7C")!=-1){r=A.logKey.split("%7C")[0]}else{if(A.logKey&&A.logKey.indexOf("|")!=-1){r=A.logKey.split("|")[0]}else{r="undefined"}}if(A.data){for(var D=0,u=A.data.split("|");D<u.length&&u[D].length>0;D++){c+="&"+u[D]}}var b=[],d="?browser="+H+"&browserVersion="+h+"&platform="+e+"&domain="+J+"&live="+x+"&pageName="+r+"&logKey="+A.logKey+c,t;if("performance" in v){C(v,"load",function(){v.setTimeout(function(){dctk.logging.navTiming=y();p()},1000)});A.pageStartTime=v.performance.timing.responseStart}else{A.pageStartTime=A.pageStartTime||new Date().getTime();C(v,"load",function(){var i=E.concat(["responseToOnLd="+(new Date().getTime()-A.pageStartTime)]);F(i)});w(v,function(){E=["responseToDomContentLoaded="+(new Date().getTime()-A.pageStartTime)]})}A.navTiming=n;A.browser=H;A.version=h;A.OS=e;A.trxEventWrapper=function(L,i,K){t=this;return function(){var O=new Date().getTime();var M=L.apply((K?K:this),arguments);var N=new Date().getTime();F([i+"_elapsedTime="+(N-A.pageStartTime),"clEventName01="+i,"clEventTime01="+(N-O)]);return M}};A.logTrxEvent=function(i,K){var L=[i+"_elapsedTime="+(new Date().getTime()-A.pageStartTime)];if(K&&K.length>0){L=L.concat(K)}F(L)};A.logMessage=function(i,K){var M=["label="+i,i+"_elapsedTime="+(new Date().getTime()-A.pageStartTime)],L;if(K&&K.length>0){M=M.concat(K)}if(i==="windowOnError"){L=K[0];if(!(L in G)){G[L]={count:0};j(M)}G[L].count=parseInt(G[L].count,10)+1;if(G[L].count===100){j(M.concat("exceedsErrorThreshold=true"))}}else{j(M)}};A.reset=function(){A.pageStartTime=new Date().getTime()};A.subscribeToOnerrorCallback=function(i){I.push(i)};A.publishOnerrorCallback=function(){for(var K=0;K<I.length;K++){if(typeof(I[K])==="function"){I[K]()}}}})(window,window.dctk.logging=window.dctk.logging||{});window.onerror=function(d,b,a){var c=0;if(document.documentElement){c=document.documentElement.clientWidth}d=d.replace(/\'/ig,"`");d=escape(d);dctk.logging.logMessage("windowOnError",["onErrorMsg="+d,"onErrorUrl="+encodeURIComponent(b),"onErrorLine="+a,"clientWidth="+c]);dctk.logging.publishOnerrorCallback()};window.dctk=window.dctk||{};(function(c,b,a,d){a.trxEventWrapper=function(g,e,f){if(b&&b.trxEventWrapper){return b.trxEventWrapper(g,e,f)}else{return g}};a.logTrxEvent=function(e,f){if(b&&b.logTrxEvent){a.logTrxEvent=b.logTrxEvent;b.logTrxEvent(e,f)}else{a.logTrxEvent=function(){}}};a.logMessage=function(e,f){if(b&&b.logMessage){a.logMessage=b.logMessage;b.logMessage(e,f)}else{a.logMessage=function(){}}};a.subscribeToOnerrorCallback=function(e){if(b&&b.subscribeToOnerrorCallback){a.subscribeToOnerrorCallback=b.subscribeToOnerrorCallback;b.subscribeToOnerrorCallback(e)}else{b.subscribeToOnerrorCallback=function(){}}}})(window,window.dctk.logging,window.dctk.loggingAdapter=window.dctk.loggingAdapter||{});