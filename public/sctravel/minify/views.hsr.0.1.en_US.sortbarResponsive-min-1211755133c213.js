define("templates",["jQuery","Handlebars","utils","allTemplates"],function(c,d,a){var b={};b.render=function(f,e){return d.templates[f](e);};b.compile=function(h,e){if(!e){e=h;}var f=c("#"+h).html(),g=d.compile(f);d.templates[e]=g;};d.registerHelper("trim",function(e){var f=e.fn(this);return c.trim(f);});d.registerHelper("while",function(j,f){var e="",k=f.hash.start?f.hash.start:0;for(var h=k;h<=j;h++){var g=c.extend({},this,{"index":h,"isFirst":(h==0),"isLast":(h==j-1)});e+=f.fn(g);}return e;});d.registerHelper("if_eq",function(g,f){var e="",h=f.hash.compare;if(g==h){e+=f.fn(this);}else{e+=f.inverse(this);}return e;});d.registerHelper("unless_eq",function(g,f){var e="",h=f.hash.compare;if(g==h){e+=f.inverse(this);}else{e+=f.fn(this);}return e;});d.registerHelper("if_lt",function(g,f){var e="",h=f.hash.compare;if(g<h){e+=f.fn(this);}else{e+=f.inverse(this);}return e;});d.registerHelper("unless_lt",function(g,f){var e="",h=f.hash.compare;if(g<h){e+=f.inverse(this);}else{e+=f.fn(this);}return e;});d.registerHelper("if_gt",function(g,f){var e="",h=f.hash.compare;if(g>h){e+=f.fn(this);}else{e+=f.inverse(this);}return e;});d.registerHelper("unless_gt",function(g,f){var e="",h=f.hash.compare;if(g>h){e+=f.inverse(this);}else{e+=f.fn(this);}return e;});d.registerHelper("if_gt_eq",function(g,f){var e="",h=f.hash.compare;if(g>=h){e+=f.fn(this);}else{e+=f.inverse(this);}return e;});d.registerHelper("unless_gt_eq",function(g,f){var e="",h=f.hash.compare;if(g>=h){e+=f.inverse(this);}else{e+=f.fn(this);}return e;});d.registerHelper("each_reverse",function(h,g){var f="",e=h.length;while(e--){f+=g.fn(h[e]);}return f;});d.registerHelper("add",function(f,e){var f=parseInt(f||0),g=parseInt(e.hash.add||0);return g+f;});d.registerHelper("doubleDigits",function(f,e){var g=parseInt(f||0);if(g<10){g="0"+g;}return""+g;});d.registerHelper("brandBaseName",function(){return a.getBrandBaseName();});d.registerHelper("brandName",function(){return a.getBrandName();});d.registerHelper("isTravelocity",function(e){if(a.isTravelocity()){return e.fn(this);}else{return e.inverse(this);}});d.registerHelper("if_experiment",function(){var g,f,e;if(arguments.length===1){e=arguments[0];}else{f=arguments[0];e=arguments[1];}g=e.hash||{};if(typeof f==="string"){g.name=g.name||f;}else{if(typeof f==="number"){g.id=g.id||f;}}if(a.isExperiment(g)){return e.fn(this);}else{return e.inverse(this);}});d.registerHelper("unless_experiment",function(f,e){var e=arguments[arguments.length-1],g=e.fn;e.fn=e.inverse;e.inverse=g;return d.helpers.if_experiment.apply(this,arguments);});d.registerHelper("convertMonth",function(e){var f=parseInt(e);return a.convertIntToMonth(f);});d.registerHelper("convertDay",function(f){var e=parseInt(f);return a.convertIntToDay(e);});d.registerHelper("columns",function(g,k){var j,h=1,e=g.length,n=Math.ceil(e/3);j='<div class="col col-1">';for(var m=0,f=g.length;m<f;m++){j=j+k.fn(g[m]);if(m%n===n-1&&m!==e-1){j=j+'</div><div class="col col-'+ ++h+'">';}}j=j+"</div>";return j;});d.registerHelper("hsr_icon",function(g,f){var h,e={name:g,content:f.hash.content||"",id:f.hash.id||""};if(e.name){h=d.templates.hsr_icon(e);return new d.SafeString(h);}return"";});d.registerHelper("searchTypeIcon",function(g,f){var e={TRAINSTATION:"train",METROSTATION:"train",AIRPORT:"flights"}[g];return e?d.helpers.hsr_icon(e,f):"";});return b;});define("allViews",function(){try{require(["jQuery","presenter"],function(e,d){d.registerLifeCycle(["pageTitle"],{"beforeRender":function(g){if(pageModel&&pageModel.experiments){var h=e("#experiments");h.removeClass();var f={};if(window.pageModel&&window.pageModel.experiments){f=e.extend({},f,window.pageModel.experiments);}if(window.pageModel&&window.pageModel.experimentsPeek){f=e.extend({},f,window.pageModel.experimentsPeek);}e.each(f,function(i,j){if(j&&j.toString()){var l=j.toString().split(".").pop();if(isFinite(l)&&l!=0){var k=i.toLowerCase().replace(/^hotelsr/,"").replace(/^hotelhsr/,"").replace(/^hotel/,"");h.addClass(k).addClass(k+"-"+l);}}});}}});});define("pageTitleView",["jQuery","View","themeCache","config","utils"],function(h,j,g,f,e){var i=15;var d=new j({"name":"pageTitle","modelName":"pageTitle","templateName":"pageTitle","container":"#pageTitleContainer","adaptModel":function(k){k.theme=g.getThemeModel();if(k.theme&&k.theme.query&&k.theme.query.length>i){k.theme.query=k.theme.query.substr(0,i)+"...";}if(k.isCitySearch){k.destination=e.getDestinationNameShort();}if(window.pageModel&&window.pageModel.telesales){k.phoneNumber=window.pageModel.telesales.phoneNumber;}if(window.pageModel.wizard&&window.pageModel.wizard.checkIn&&window.pageModel.experiments.HotelGlobalDateFormattingUS=="4060.1"){k.checkInDayOfWeek=(new Date(window.pageModel.wizard.checkIn)).getDay();k.checkOutDayOfWeek=(new Date(window.pageModel.wizard.checkOut)).getDay();k.hasDayOfWeek=true;window.pageModel.wizard.checkInDayOfWeek=k.checkInDayOfWeek;window.pageModel.wizard.checkOutDayOfWeek=k.checkOutDayOfWeek;window.pageModel.wizard.hasDayOfWeek=true;}this.setTravelerBoolean(k);return k;},setTravelerBoolean:function(m){var k,l="";k=m.totalAdults===1?"oneAdult":"multiAdult";if(m.totalChildren===1){l="OneChild";}else{if(m.totalChildren>1){l="MultiChild";}}m[k+l]=true;},"afterPageRender":function(){if(window.pageModel&&window.pageModel.pageTitle&&window.pageModel.pageTitle.destination){document.title=window.pageModel.pageTitle.destination;}}});d.registerHelper("highLevelRegionExperiment",function(){if(e.getModel("metaData","betterSearchType")==="HIGHER_LEVEL_REGION"&&f.locale.indexOf("en")==0){return"Top";}return"";});return d;});require(["presenter","pageTitleView"],function(d,e){d.registerView(e);});require(["jQuery","presenter"],function(e,d){d.registerLifeCycle(["hotelName","dealFilter","star","neighborhood","amenities","poi","price","lodging","accessibilities"],{"afterRender":function(){var f=e("#filterOrientation");if(f.find(".text-label").length===0){f.addClass("hidden");}else{f.removeClass("hidden");}}});});define("cityView",["View"],function(e){var d=new e({name:"city",modelName:"city",templateName:"city",container:"#cityContainer",adaptModel:function(f){if(f.options){f.options=f.options.sort(function(h,g){return g.count-h.count;}).slice(0,12);}}});return d;});require(["cityView","presenter"],function(d,e){e.registerView(d);});define("sortView",["jQuery","View","themeCache"],function(f,g,d){var e={"0":{"label":"Most popular","value":"mostPopular","rfrr":"HOT.SR.Sort.Epicks"},"1":{"label":"Hotel Name","value":"name","rfrr":"HOT.SR.Sort.Name","classes":"nameFilter"},"4":{"label":"Distance","value":"distance","rfrr":"HOT.SR.Sort.Distance"},"5":{"label":"Most popular","value":"theme","rfrr":"HOT.SR.Sort.Epicks"},"6":{"label":"Star Rating","value":"starRating","rfrr":"HOT.SR.Sort.Star"},"10":{"label":"Price","value":"price","rfrr":"HOT.SR.Sort.Price"},"12":{"label":"Guest Rating","value":"guestRating","rfrr":"HOT.SR.Sort.GstRtng"},"22":{"label":"VIP Access","value":"vip","rfrr":"HOT.SR.Sort.Vip"},"27":{"label":"Best Deals","value":"deals","rfrr":"HOT.SR.Sort.BestDeals"}};return new g({name:"sort",modelName:"sort",container:"#sortContainer",templateName:"sort",adaptModel:function(k){var h=[],l,n,m,j;l=d.getThemeModel();if(l&&k.selectedSortOrder==="0"){k.selectedSortOrder="5";}if(k&&k.sortOrderList){for(j=0;j<k.sortOrderList.length;j++){if(k.sortOrderList[j]==="0"&&l){n="5";e["5"].label=l.label;}else{n=k.sortOrderList[j];}m=e[n];if(m){h.push({label:m.label,value:m.value,rfrr:m.rfrr,classes:m.classes||"",inputType:"radio",inputName:"sort",selected:n===k.selectedSortOrder,visible:true});}}}k.options=h;return{options:h};},afterPageRender:function(){f("[data-control=responsive-sortbar]").uitk_responsive_sortbar();}});});require(["sortView","presenter"],function(d,e){e.registerView(d);});require(["jQuery","presenter","templates"],function(g,f,d){var e=new f.View({"name":"hotelName","modelName":"hotelName","templateName":"hotelName","container":"#hotelNameContainer","adaptModel":function(h){if(g.isEmptyObject(h)){h.isEmpty=true;
}if(window.pageModel&&window.pageModel.wizard&&window.pageModel.wizard.regionId&&window.pageModel.wizard.regionId!=="0"){h.regionId=window.pageModel.wizard.regionId;}return h;},"secondaryTemplateName":"orientationHotelName","secondaryContainer":"#orientationHotelNameContainer","afterPopulateContainer":function(){var h=g("#inpHotelNameMirror"),i=h.val(),j=h.attr("placeholder");require("uitk",function(k){k.refreshPlaceholders();});g(".hotelNameFilterBtn .btn-sub-action").addClass("visuallyhidden");g(".hotelNameFilterBtn .btn-utility").attr("disabled","disabled");}});f.registerView(e);});require(["jQuery","presenter","templates"],function(g,f,e){var d=new f.View({"name":"star","modelName":"star","templateName":"aColFilter","container":"#ratingContainer","secondaryTemplateName":"listFilterOrientation","secondaryContainer":"#orientationRatingContainer","adaptModel":function(m){if(m&&m.starRatingOptions){m.exists=true;m.hasHidden=false;m.sectionId="star";m.title="Star Rating";m.multiSelect=true;var h,n;for(var l=0;l<m.starRatingOptions.length;l++){var k=m.starRatingOptions[l];if(!(h||h===0)&&k.selected){h=l;}if(k.selected){n=l;}}for(var l=0;l<m.starRatingOptions.length;l++){var k=m.starRatingOptions[l],j=k.starRating/10,o="star"+j;k.id=o;k.inputName="star";k.value=k.starRating;k.label=e.render("starLabel",{"stars":j,"count":k.count});k.inputType="checkbox";k.visible=true;k.rfrr="HOT:SR:StarRating:"+j+"Star";k.orientationLabel=e.render("orientationStarLabel",{"stars":j});k.orientationHidden=false;if(k.selected&&l>h&&l<n){k.orientationHidden=true;}k.orientation="#"+o;k.orientationTrack="HOT:SR:FO:starFltr"+j;}m.options=m.starRatingOptions;}return m;},"afterPopulateContainer":function(){g("#star").middleChecked();}});f.registerView(d);});require(["jQuery","presenter"],function(e,d){var f=new d.View({"name":"neighborhood","modelName":"neighborhood","templateName":"aColFilter","container":"#neighborhoodContainer","secondaryTemplateName":"listFilterOrientation","secondaryContainer":"#orientationNeighborhoodContainer","adaptModel":function(l){if(l&&l.neighborhoodList){l.exists=l.showFilter;l.hasHidden=false;l.sectionId="neighborhood";l.title="Neighborhood";var g=[];for(var j=0;j<l.neighborhoodList.length;j++){var h=l.neighborhoodList[j];var k={"id":"neighborhood"+h.regionID,"inputName":"hideRegionId","value":h.regionID,"label":h.name,"data":[{"name":"destination","value":h.name}],"inputType":"radio","visible":true,"rfrr":"HOT:SR:Area","selected":h.regionID===l.selectedNeighborhoodId,"orientationLabel":h.name,"orientationHidden":j===0,"orientation":"#neighborhood"+l.neighborhoodList[0].regionID,"orientationTrack":"HOT:SR:FO:Area"};g.push(k);}l.options=g;}return l;}});d.registerView(f);});require(["jQuery","presenter","templates"],function(f,e,d){var g=new e.View({"name":"amenities","modelName":"amenities","templateName":"aColFilter","container":"#amenitiesContainer","secondaryTemplateName":"listFilterOrientation","secondaryContainer":"#orientationAmenitiesContainer","adaptModel":function(j){if(j&&j.amenityOptionList){j.exists=j.isShowAmenities;j.hasHidden=false;j.sectionId="amenities";j.title="Hotel Preferences";for(var h=0;h<j.amenityOptionList.length;h++){var k=j.amenityOptionList[h],l="amenity"+k.checkboxValue;k.id=l;k.inputName="amenities";k.value=k.checkboxValue;k.label=k.name;k.inputType="checkbox";k.selected=k.isSelected;k.visible=true;k.rfrr="HOT:SR:HotelPreference";k.orientationLabel=k.name;k.orientationHidden=false;k.orientation="#"+l;k.orientationTrack="HOT:SR:FO:amenityId"+k.checkboxValue;}j.options=j.amenityOptionList;}return j;}});e.registerView(g);});require(["jQuery","presenter","templates"],function(g,f,e){var d=new f.View({"name":"price","modelName":"price","templateName":"aColFilter","container":"#priceFilterContainer","secondaryTemplateName":"listFilterOrientation","secondaryContainer":"#orientationPriceContainer","adaptModel":function(n){if(n&&n.priceFilterOptions){n.exists=n.isShowFilter;n.hasHidden=false;n.sectionId="price";n.title="Price";var h,o;for(var l=0;l<n.priceFilterOptions.length;l++){var m=n.priceFilterOptions[l];if(!(h||h===0)&&m.selected){h=l;}if(m.selected){o=l;}}for(var l=0;l<n.priceFilterOptions.length;l++){var m=n.priceFilterOptions[l],j=l+1,p="price"+j;m.id=p;m.inputName="price";m.value=l;m.inputType="checkbox";var k={"minPrice":(m.minPrice=="NA")?false:m.minPrice,"maxPrice":(m.maxPrice=="NA")?false:m.maxPrice,"count":m.count};m.label=e.render("priceLabel",k);m.visible=true;m.rfrr="HOT:SR:PriceFilter:Bucket"+(l+1);m.orientationLabel=e.render("orientationPriceLabel",k);m.orientationHidden=false;if(m.selected&&l>h&&l<o){m.orientationHidden=true;}m.orientation="#"+p;m.orientationTrack="HOT:SR:FO:pfId"+j;}n.options=n.priceFilterOptions;}return n;},"afterPopulateContainer":function(){g("#price").middleChecked();}});f.registerView(d);});require(["jQuery","presenter"],function(j,i){var h={"UNKOWN":{"id":"UNKOWN","label":"All","value":"all","rfrr":"HOT.SR.LodgingType.All","orientationRfrr":"HOT:SR:FO:LodgingType:All"},"HOTEL":{"id":"HOTEL","label":"Hotel","value":"hotel","rfrr":"HOT.SR.LodgingType.Hotel","orientationRfrr":"HOT:SR:FO:LodgingType:Hotel"},"MOTEL":{"id":"MOTEL","label":"Motel","value":"motel","rfrr":"HOT.SR.LodgingType.Motel","orientationRfrr":"HOT:SR:FO:LodgingType:Motel"},"HOTEL_RESORT":{"id":"HOTEL_RESORT","label":"Hotel resort","value":"hotelResort","rfrr":"HOT.SR.LodgingType.Hotel_Resort","orientationRfrr":"HOT:SR:FO:LodgingType:Hotel_Resort"},"INN":{"id":"INN","label":"Inn","value":"inn","rfrr":"HOT.SR.LodgingType.Inn","orientationRfrr":"HOT:SR:FO:LodgingType:Inn"},"BED_AND_BREAKFAST":{"id":"BED_AND_BREAKFAST","label":"Bed & Breakfast","value":"bedBreakfast","rfrr":"HOT.SR.LodgingType.BB","orientationRfrr":"HOT:SR:FO:LodgingType:BB"},"GUEST_HOUSE":{"id":"GUEST_HOUSE","label":"Guest house","value":"guestHouse","rfrr":"HOT.SR.LodgingType.Guest_House","orientationRfrr":"HOT:SR:FO:LodgingType:Guest_House"},"CONDO":{"id":"CONDO","label":"Condo","value":"condo","rfrr":"HOT.SR.LodgingType.Condo","orientationRfrr":"HOT:SR:FO:LodgingType:Condo"},"ALL_INCLUSIVE":{"id":"ALL_INCLUSIVE","label":"All-Inclusive Resort","value":"allInclusive","rfrr":"HOT.SR.LodgingType.AllInclusive","orientationRfrr":"HOT:SR:FO:LodgingType:AllInclusive"},"CABIN":{"id":"CABIN","label":"Cabin","value":"cabin","rfrr":"HOT.SR.LodgingType.Cabin","orientationRfrr":"HOT:SR:FO:LodgingType:Cabin"},"CHALET":{"id":"CHALET","label":"Chalet","value":"chalet","rfrr":"HOT.SR.LodgingType.Chalet","orientationRfrr":"HOT:SR:FO:LodgingType:Chalet"},"COTTAGE":{"id":"COTTAGE","label":"Cottage","value":"cottage","rfrr":"HOT.SR.LodgingType.Cottage","orientationRfrr":"HOT:SR:FO:LodgingType:Cottage"},"HOSTEL":{"id":"HOSTEL","label":"Hostel/Backpacker accommodation","value":"hostel","rfrr":"HOT.SR.LodgingType.Hostel","orientationRfrr":"HOT:SR:FO:LodgingType:Hostel"},"RANCH":{"id":"RANCH","label":"Ranch","value":"ranch","rfrr":"HOT.SR.LodgingType.Ranch","orientationRfrr":"HOT:SR:FO:LodgingType:Ranch"},"VILLA":{"id":"VILLA","label":"Villa","value":"villa","rfrr":"HOT.SR.LodgingType.Villa","orientationRfrr":"HOT:SR:FO:LodgingType:Villa"},"LODGE":{"id":"LODGE","label":"Lodge","value":"lodge","rfrr":"HOT.SR.LodgingType.Lodge","orientationRfrr":"HOT:SR:FO:LodgingType:Lodge"},"APARTMENT":{"id":"APARTMENT","label":"Apartment","value":"apartment","rfrr":"HOT.SR.LodgingType.Apartment","orientationRfrr":"HOT:SR:FO:LodgingType:Apartment"},"VACATION_HOME":{"id":"VACATION_HOME","label":"Private vacation home","value":"vacationHome","rfrr":"HOT.SR.LodgingType.Vacation_Home","orientationRfrr":"HOT:SR:FO:LodgingType:Vacation_Home"},"HOUSE_BOAT":{"id":"HOUSE_BOAT","label":"House boat","value":"houseBoat","rfrr":"HOT.SR.LodgingType.House_Boat","orientationRfrr":"HOT:SR:FO:LodgingType:House_Boat"},"OVERWATER":{"id":"OVERWATER","label":"Overwater accommodation","value":"overWater","rfrr":"HOT.SR.LodgingType.Overwater","orientationRfrr":"HOT:SR:FO:LodgingType:Overwater"},"RYOKEN":{"id":"RYOKEN","label":"Ryokan","value":"ryoken","rfrr":"HOT.SR.LodgingType.Ryokan","orientationRfrr":"HOT:SR:FO:LodgingType:Ryokan"},"TREE_HOUSE":{"id":"TREE_HOUSE","label":"Tree house","value":"treeHouse","rfrr":"HOT.SR.LodgingType.Tree_House","orientationRfrr":"HOT:SR:FO:LodgingType:Tree_House"},"APART_HOTEL":{"id":"APART_HOTEL","label":"Apart-hotel","value":"apartHotel","rfrr":"HOT.SR.LodgingType.Apart_Hotel","orientationRfrr":"HOT:SR:FO:LodgingType:Apart_Hotel"},"CONDO_RESORT":{"id":"CONDO_RESORT","label":"Condominium resort","value":"condoResort","rfrr":"HOT.SR.LodgingType.Condo_Resort","orientationRfrr":"HOT:SR:FO:LodgingType:Condo_Resort"},"CARAVAN_PARK":{"id":"CARAVAN_PARK","label":"Caravan Park","value":"caravanPark","rfrr":"HOT.SR.LodgingType.Caravan_Park","orientationRfrr":"HOT:SR:FO:LodgingType:Caravan_Park"},"RIAD":{"id":"RIAD","label":"Riad","value":"riad","rfrr":"HOT.SR.LodgingType.Riad","orientationRfrr":"HOT:SR:FO:LodgingType:Riad"},"HOSTAL":{"id":"HOSTAL","label":"Hostal (Budget Hotel)","value":"hostal","rfrr":"HOT.SR.LodgingType.Hostal","orientationRfrr":"HOT:SR:FO:LodgingType:Hostal"},"LONGHOUSE":{"id":"LONGHOUSE","label":"Longhouse","value":"longHouse","rfrr":"HOT.SR.LodgingType.Longhouse","orientationRfrr":"HOT:SR:FO:LodgingType:Longhouse"},"SERVICED_APARTMENT":{"id":"SERVICED_APARTMENT","label":"Serviced Apartment","value":"servicedApartment","rfrr":"HOT.SR.LodgingType.Serviced_Apartment","orientationRfrr":"HOT:SR:FO:LodgingType:Serviced_Apartment"},"COUNTRY_HOUSE":{"id":"COUNTRY_HOUSE","label":"Country House","value":"countryHouse","rfrr":"HOT.SR.LodgingType.Country_House","orientationRfrr":"HOT:SR:FO:LodgingType:Country_House"},"PENSION":{"id":"PENSION","label":"Pension","value":"pension","rfrr":"HOT.SR.LodgingType.Pension","orientationRfrr":"HOT:SR:FO:LodgingType:Pension"},"POUSADA_PORTUGAL":{"id":"POUSADA_PORTUGAL","label":"Pousada (Portugal)","value":"pousadaPortugal","rfrr":"HOT.SR.LodgingType.Pousada_Portugal","orientationRfrr":"HOT:SR:FO:LodgingType:Pousada_Portugal"},"POUSADA_BRAZIL":{"id":"POUSADA_BRAZIL","label":"Pousada (Brazil)","value":"pousadaBrazil","rfrr":"HOT.SR.LodgingType.Pousada_Brazil","orientationRfrr":"HOT:SR:FO:LodgingType:Pousada_Brazil"},"RESIDENCE":{"id":"RESIDENCE","label":"Residence","value":"residence","rfrr":"HOT.SR.LodgingType.Residence","orientationRfrr":"HOT:SR:FO:LodgingType:Residence"},"TOWNHOUSE":{"id":"TOWNHOUSE","label":"TownHouse","value":"townhouse","rfrr":"HOT.SR.LodgingType.Townhouse","orientationRfrr":"HOT:SR:FO:LodgingType:Townhouse"},"TRADITIONAL_BUILDING":{"id":"TRADITIONAL_BUILDING","label":"Traditional Building","value":"traditionalBuilding","rfrr":"HOT.SR.LodgingType.Traditional_Building","orientationRfrr":"HOT:SR:FO:LodgingType:Traditional_Building"},"CASTLE":{"id":"CASTLE","label":"Castle","value":"castle","rfrr":"HOT.SR.LodgingType.Castle","orientationRfrr":"HOT:SR:FO:LodgingType:Castle"},"SAFARI":{"id":"SAFARI","label":"Safari / Tentalow","value":"safari","rfrr":"HOT.SR.LodgingType.Safari","orientationRfrr":"HOT:SR:FO:LodgingType:Safari"},"ECO_HOTEL":{"id":"ECO_HOTEL","label":"Eco Hotel","value":"ecoHotel","rfrr":"HOT.SR.LodgingType.Eco_Hotel","orientationRfrr":"HOT:SR:FO:LodgingType:Eco_Hotel"},"PALACE":{"id":"PALACE","label":"Palace","value":"palace","rfrr":"HOT.SR.LodgingType.Palace","orientationRfrr":"HOT:SR:FO:LodgingType:Palace"},"AGRITOURISM":{"id":"AGRITOURISM","label":"Agritourism","value":"agritourism","rfrr":"HOT.SR.LodgingType.Agritourism","orientationRfrr":"HOT:SR:FO:LodgingType:Agritourism"}};
var e={"options":[]};var d="all";function f(q,r,m,o,s,l,n,k,p){return{"id":"lodging"+o,"label":q,"value":r,"selected":m,"inputType":"radio","inputName":"lodging","visible":true,"rfrr":s,"orientationLabel":n,"orientationHidden":k,"orientation":"#lodging0","orientationTrack":l,"structureKey":p};}var g=new i.View({"name":"lodging","modelName":"lodging","templateName":"aColFilter","container":"#lodgingTypecontainer","secondaryTemplateName":"listFilterOrientation","secondaryContainer":"#orientationLodgingContainer","adaptModel":function(k){k.exists=true;k.hasHidden=false;k.sectionId="lodgingType";k.title="Accommodation Type";k.options=[];if(k.dynamicAccommodationExperimentEnabled===true&&(this.hasStructureOptions(k)||this.hasCacheOptions())){this.setupStructureFilterOptions(k);k.exists=k.options.length>1;}else{k.options.push(f("All","",k.selectedLodgingType==="all",0,"HOT.SR.LodgingType.All","HOT:SR:FO:LodgingType:All","All",true,"UNKOWN"));k.options.push(f("Hotel","hotel",k.selectedLodgingType==="hotel",1,"HOT.SR.LodgingType.Hotel","HOT:SR:FO:LodgingType:Hotel","Hotel",false,"HOTEL"));k.options.push(f("Bed & Breakfast","bedBreakfast",k.selectedLodgingType==="bedBreakfast",2,"HOT.SR.LodgingType.BB","HOT:SR:FO:LodgingType:BB","Bed & Breakfast",false,"BED_AND_BREAKFAST"));k.options.push(f("Apartment","apartment",k.selectedLodgingType==="apartment",3,"HOT.SR.LodgingType.Apartment","HOT:SR:FO:LodgingType:Apartment","Apartment",false,"APARTMENT"));k.options.push(f("Condo","condo",k.selectedLodgingType==="condo",4,"HOT.SR.LodgingType.Condo","HOT:SR:FO:LodgingType:Condo","Condo",false,"CONDO"));k.options.push(f("All-Inclusive Resort","allInclusive",k.selectedLodgingType==="allInclusive",5,"HOT.SR.LodgingType.AllInclusive","HOT:SR:FO:LodgingType:AllInclusive","All-Inclusive Resort",false,"ALL_INCLUSIVE"));}return k;},"setupStructureFilterOptions":function(k){if(this.hasStructureOptions(k)&&k.selectedLodgingType===d){e.options=[];}if(this.hasCacheOptions()){this.buildFilterOptionsFromCache(k);}else{this.buildFilterOptionsFromServerData(k);}e.options=k.options.slice(0);},"getCodeFromFilterOption":function(k){if(k.value===""){return d;}return k.value;},"buildFilterOptionsFromCache":function(n){n.options=e.options.slice(0);for(var m=0;m<n.options.length;m++){if(n.options[m].selected){n.options[m].selected=false;}n.options[m].selected=n.selectedLodgingType===this.getCodeFromFilterOption(n.options[m]);var l=n.options[m].orientationLabel;if(n.options[m].selected&&n.options[m].value!==""){var k=this.getCountByOrientationLabel(n,l);n.options[m].label=this.formatLabelWithCount(l,k);}else{n.options[m].label=l;}}},"buildFilterOptionsFromServerData":function(m){for(var k=0;k<m.structureOptions.length;k++){var l=m.structureOptions[k];var n=l.id;if(h[n]){if(h[n].value===d){m.options.push(f(h[n].label,"",h[n].value===m.selectedLodgingType,k,h[n].rfrr,h[n].orientationRfrr,h[n].label,true,n));}else{m.options.push(f(this.formatLabelWithCount(h[n].label,l.count),h[n].value,h[n].value===m.selectedLodgingType,k,h[n].rfrr,h[n].orientationRfrr,h[n].label,false,n));}}}},"formatLabelWithCount":function(k,l){return(l===0)?k:(k+" ("+l+")");},"getCountByOrientationLabel":function(p,m){if(this.hasStructureOptions(p)){for(var l=0;l<p.structureOptions.length;l++){var o=p.structureOptions[l];var n=o.id;if(h[n]&&h[n].label===m){return o.count;}}}return 0;},"hasCacheOptions":function(){return(e.options.length>0);},"hasStructureOptions":function(k){if(typeof k!=="undefined"&&typeof k.structureOptions!=="undefined"){return(k.structureOptions.length>0);}return false;},"getLodgingStructureMap":function(){return h;},"getStructureOptionCache":function(){return e;}});i.registerView(g);});require(["jQuery","presenter","templates"],function(g,f,e){var d=new f.View({"name":"accessibilities","modelName":"amenities","templateName":"aColFilter","container":"#accessibilitiesContainer","secondaryTemplateName":"listFilterOrientation","secondaryContainer":"#orientationAccessibilityContainer","adaptModel":function(k){if(k&&k.accessibilityOptionList){k.exists=k.isShowAccessibilities;k.hasHidden=false;k.sectionId="accessibilities";k.title="Accessibility";for(var j=0;j<k.accessibilityOptionList.length;j++){var h=k.accessibilityOptionList[j],l="accessibility"+h.checkboxValue;h.id=l;h.inputName="amenities";h.value=h.checkboxValue;h.label=h.name;h.inputType="checkbox";h.selected=h.isSelected;h.visible=true;h.rfrr="HOT:SR:HotelAccessibility";h.orientationLabel=h.name;h.orientationHidden=false;h.orientation="#"+l;h.orientationTrack="HOT:SR:FO:amenityId"+h.checkboxValue;}k.options=k.accessibilityOptionList;}return k;}});f.registerView(d);});define("themeCache",function(){require(["jquery","uitk","formController"],function(e,d,f){d.subscribe(f.resetEvent,function(h,g){if(g.isNewDestination){e("input#theme").remove();}});});return{getThemeModel:function(){if(window.pageModel&&window.pageModel.theme&&window.pageModel.theme.key){return window.pageModel.theme;}}};});define("themeView",["View"],function(d){return new d({name:"theme",modelName:"theme",templateName:"theme",container:"#themeContainer"});});require(["presenter","themeView"],function(e,d){e.registerView(d);});define("cBannerRender",["jquery","config","templates"],function(f,d,e){return{"showBanners":function(j){if(d.siteId==="3"||d.siteId==="6"||d.siteId==="20"||d.siteId==="28"||d.siteId==="1196"||d.siteId==="1237"||d.siteId==="1063"){var h=e.render("coalitionBanner");var g=f(".hotelWrapper, .opaque").filter(":nth-child(4n + 1)");var i=f(".hotelWrapper").children().length;g.after(h);}}};});require(["jQuery","presenter","templates","utils"],function(h,g,f,e){var d=false;view=new g.View({"name":"googleMap","modelName":"googleMap","templateName":"googleMap","container":"#googleMapContainer","adaptModel":function(j){var i;if(window.pageModel){i=window.pageModel.pageTitle;}j.title=f.render("mapTitle",i);return j;},"populateContainer":function(j){if(!window.pageModel||!window.pageModel.resultsAbove||!window.pageModel.resultsAbove.length){return;}require("uitkMap",function(k){if(k){k.close();}});var i=[];if(window.pageModel&&window.pageModel.resultsAbove&&!h.isEmptyObject(window.pageModel.resultsAbove)){i=i.concat(window.pageModel.resultsAbove);}if(window.pageModel&&window.pageModel.resultsBelow&&!h.isEmptyObject(window.pageModel.resultsBelow)){i=i.concat(window.pageModel.resultsBelow);}require(["uitk"],function(l){l.map.data={"hsrMap":{"markerData":{"markers":[]}}};for(var m=0;m<i.length;m++){var k=i[m],n=k.retailHotelInfoModel,o=k.retailHotelPricingModel;if(k.isOpaque||k.isVacationRental){continue;}l.map.data.hsrMap.markerData.markers.push({"name":n.hotelName,"latlong":n.latitude+","+n.longitude,"type":"red-pin","content":f.render("mapHotelInfo",{"hotelName":n.hotelName,"infositeUrl":k.infositeUrl,"thumbnailURL":(n.thumbnailURL)?n.thumbnailURL.replace("_t","_g"):undefined,"isDisplayStarRating":n.showRatingAndReviews&&n.hotelStarRating!=="0.0","hotelStarRating":n.hotelStarRating,"hotelStarRatingCss":n.hotelStarRatingCss,"isDisplayStrikePrice":o.isDrrDiscount||o.isDynamicPrice,"priceWithoutDrrFormatted":o.priceWithoutDrrFormatted,"showCurrencyAsSuffix":o.showCurrencyAsSuffix,"currencySymbol":o.currencySymbol,"isDisplayPrice":o.price>0,"priceFormatted":o.priceFormatted,"priceType":o.priceType,"isDisplayUrgency":o.isDisplayUrgency,"isLimitedRooms":o.isLimitedRooms,"isUrgencySingleRoom":o.isUrgencySingleRoom,"numberOfRoomsLeftForUrgencyMsg":o.numberOfRoomsLeftForUrgencyMsg,"localizedHotelName":n.localizedHotelName,"showLocalizedName":n.localizedHotelName!=null&&n.localizedHotelName!=""})});}});g.View.prototype.populateContainer.apply(this,arguments);if(e.getUrlParam("view")==="map"){if(window.pageModel&&window.pageModel.request){window.pageModel.request.view="map";}require("googleMapCtrl",function(k){k.openMap();});}},"tracking":function(){if(!d){require(["uitk","utils"],function(k,j){k.subscribe("mapLoaded",function(){define("uitkMap",function(){return k.map;});});var l=(j.isTravelocity())?"travelocity-HotelSearch":"expedia-HotelSearch",i=(window.pageModel&&window.pageModel.googleMap&&window.pageModel.googleMap.client)?window.pageModel.googleMap.client:"gme-expedia",m=(window.pageModel&&window.pageModel.googleMap&&window.pageModel.googleMap.language)?window.pageModel.googleMap.language:"en";
k.map.config={"sensor":false,"channel":l,"client":i,"language":m};if(window.pageModel&&window.pageModel.hotelName&&window.pageModel.hotelName.essLocale){k.map.config.language=pageModel.hotelName.essLocale.substring(0,2);}k.map.loadApi();});d=true;}}});g.registerView(view);});define("hotelContext",["jQuery"],function(e){var d={"hotelName":"","hotelStars":"","hotelStarCss":"","isTravelAd":false,"showLocalName":false,"localname":"","addHotelInfoHeading":function(){var h=this,i=this.hotelStars.toString(),g="stars",f=e("#edsHotelPrompt");require("templates",function(k){var j=k.render("edsHotelHeading",h),l=e("#edsHeading");f.text("Enter stay dates to check rates and availability");f.show();l.html(j);g+=i.replace(/\./,"-");});}};return d;});require(["jQuery","presenter","hotelContext"],function(h,g,e){function d(i){require(["uitk"],function(j){j.updatePlaceholderValue(i);});}var f=new g.View({"name":"eds","modelName":"eds","templateName":"eds","container":"#edsContainer","afterPageRender":function(){var n,m,i,o=false,j=true,l,k;if(window.pageModel&&window.pageModel.metaData&&window.pageModel.metaData.isDateless){require(["edsCtrl","travellerContext","utils"],function(q,r,p){if(window.pageModel.experiments.HotelSRNoEDSonTG==="3517.1"){if(document.referrer){if(document.referrer.indexOf("Travel-Guide-Hotels")!==-1||document.referrer.indexOf("Hotel-Destinations")!==-1){j=false;return;}}}if(p.getUrlParam("edsOff")=="1"){j=false;return;}if(q.searchMode!=="pageLoad"){if(q.roomCount!==r.roomCount||q.adultCount!==r.adultCount||q.childCount!==r.childCount){o=true;}}if(!q.hasDestinationChanged&&!o&&q.searchMode!=="pageLoad"){if(q.searchMode!=="update"){j=false;return;}}q.searchMode="blocking";if(!window.pageModel.metaData||!window.pageModel.metaData.hasSearchResults){j=false;return;}if(!window.pageModel.error||window.pageModel.error.isErrorMessage&&(window.pageModel.wizard.checkInDay&&window.pageModel.wizard.checkOutDate)){j=false;return;}q.showEdsModal();q.isFirstDisplay=false;q.roomCount=r.roomCount;q.adultCount=r.adultCount;q.childCount=r.childCount;});if(!j){return;}n=h("#edsContent");n.find("#edsErrorMsg p").hide();n.find("#edsFields label").removeClass("invalid");l=h("#inpStartDateEDS");k=h("#inpEndDateEDS");if(l.val()!==l.attr("placeholder")){l.val(l.attr("placeholder"));}if(k.val()!==k.attr("placeholder")){k.val(k.attr("placeholder"));}m=h("#edsHeading");i=h("#edsHotelPrompt");i.hide();m.text("Enter your dates to see prices");require(["AirAttachEDS","utils"],function(p,q){var r=q.getVariantByName("HotelAirAttachOneWayUS");if(r=="1"||r=="2"){p.run();}});n.find("input").each(function(){var p=h(this);p.focus(function(){var q=h(this);if(q.val()===q.attr("placeholder")){q.val("");}});p.blur(function(){var q=h(this);if(q.val()===""){d(q);}});if(p.val()===""){d(p);}});}}});g.registerView(f);});define("roomBuilder",["jQuery","templates"],function(f,e){var d={"buildRooms":function(k){var j=[];for(var h=0;h<k.rooms.length&&h<k.selRoomIndex;h++){var m=k.rooms[h],g=h+1;var l=this.buildRoom(k,m,h,g);j.push(l);}return j;},"buildRoom":function(k,n,m,g){var l={"roomIndex":m,"roomNumber":g,"adultCount":this.buildAdultCount(k,n),"childCount":this.buildChildCount(k,n),"showChildMessage":n.childAges.length>0,"childAges":[],"showRemoveButton":k.selRoomIndex>1};for(var h=0;h<k.maxChildren;h++){var j=h+1;l.childAges.push(this.buildChildAge(k,n,g,h,j));}return l;},"buildAdultCount":function(k,l){var j=l.adults;var h={"label":"Adults","name":"adults","options":[],"isAdultCount":true};for(var g=1;g<=k.maxAdults;g++){h.options.push({"label":g,"value":g,"isSelected":g==j});}return h;},"buildChildCount":function(k,l){var j=l.childAges.length;var g={"label":"Children","options":[],"isChildCount":true};for(var h=0;h<=k.maxChildren;h++){g.options.push({"label":h,"value":h,"isSelected":h===j});}return g;},"buildChildAge":function(l,n,g,m,k){var j={"label":e.render("childNumberLabel",{"number":k}),"name":"children","options":[],"isChildAge":true,"isDisabled":m>=n.childAges.length,"isHidden":m>=n.childAges.length,"requiredErrorMsg":"#wizardMissingChildError"};j.options.push({"label":"--","value":""});for(var h=0;h<l.maxChildAge;h++){j.options.push({"label":(h===0)?"<1":h,"value":g+"_"+h,"isSelected":(n.childAges[m])?n.childAges[m]==h:false});}return j;}};return d;});define("travellerContext",["jQuery"],function(d){var e={"isMultiRoom":false,"isMultiAdults":false,"isAnyChild":false,"isMultiChild":false,"roomCount":0,"adultCount":0,"childCount":0,"calculate":function(){this.isMultiRoom=this.roomCount>1,this.isMultiAdults=this.adultCount>1,this.isAnyChild=this.childCount>0,this.isMultiChild=this.childCount>1;},"update":function(){this.roomCount=0;this.adultCount=0;this.childCount=0;var f=this;d(".wizardTravellerAges").each(function(g,i){var h=d(this);f.roomCount++;f.adultCount+=parseInt(h.find(".adultCount select").val());f.childCount+=parseInt(h.find(".childCount select").val());});this.calculate();this.write();},"set":function(h,f,g){this.roomCount=h;this.adultCount=f;this.childCount=g;this.calculate();},"write":function(){var f=this;require(["jQuery","templates"],function(i,h){var g=h.render("wizardTravellerSummary",f);i(".wizardTravellerSummary").html(g);});},getObject:function(){return{"isMultiRoom":this.isMultiRoom,"isMultiAdults":this.isMultiAdults,"isAnyChild":this.isAnyChild,"isMultiChild":this.isMultiChild,"roomCount":this.roomCount,"adultCount":this.adultCount,"childCount":this.childCount};}};return e;});require(["jQuery","presenter","templates","utils","roomBuilder","travellerContext"],function(i,h,g,f,d,k){var j={"name":"wizard","modelName":"wizard","templateName":"wizard","container":"#wizardContainer","beforeRenderTemplate":function(){require("uitk",function(l){l.tooltips.hideAll();});},"adaptModel":function(l){l.destinationNameShort=l.searchString;l.isError=l.isError||(window.pageModel.error&&window.pageModel.error.isErrorMessage&&window.pageModel.resultsAbove&&!window.pageModel.resultsAbove.length);l.isDatelessOrError=l.isDatelessSearch||l.isError;k.set(l.selRoomIndex,l.totalAdults,l.totalChildren);l.travellerContext=k.getObject();l.showAddRoomButton=l.selRoomIndex<l.maxRooms;l.roomList=d.buildRooms(l);l.viewParam=f.getUrlParam("view");return l;},"afterPopulateContainer":function(){var l=window.pageModel.wizard;$container=i(this.container);require("Modernizr",function(m){if(m.touch){i(".dateText").attr("readonly","readonly");}});if(l.isDatelessSearch){$container.find(".date .text").addClass("invalid");}require("uitk",function(m){m.refreshPlaceholders();});}};var e=new h.View(j);h.registerView(e);});require(["jQuery","View","presenter"],function(f,g,e){var d=new g({"name":"error","modelName":"error","templateName":"error","container":"#errorContainer","populateContainer":function(h){f(this.container).html(h);if(window.pageModel&&window.pageModel.error&&window.pageModel.error.isErrorMessage){f("html,body").scrollTop(0);if(!(window.pageModel.resultsAbove&&window.pageModel.resultsAbove.length)){f("body").addClass("error");require("uitk",function(i){i.publish("off-canvas.close");});}}else{f("body").removeClass("error");}}});e.registerView(d);});require(["jQuery","View","presenter","utils"],function(g,h,f,d){var e=new h({"name":"airAttach","modelName":"airAttach","templateName":"airAttach","container":"#airAttachContainer","adaptModel":function(i){if(i.hotmipSecondsLeft){i.hotmipSecondsLeft=d.getUpdatedSecondsLeft(i.hotmipSecondsLeft);if(i.hotmipSecondsLeft>0){i.isAirAttach=true;if(i.thirdPartyName){i.isThirdParty=!!((i.thirdPartyName!=null&&i.thirdPartyName!=""));}else{i.thirdPartyName="";i.isThirdParty=false;}require("drrTimer",function(j){i.airAttachTimer=j.register("#airAttachContainer .timer",i.hotmipSecondsLeft,"","airAttachBanner","airAttachTimer");});}}return i;}});f.registerView(e);});require(["jQuery","presenter"],function(f,e){var d=new e.View({"name":"matrix","modelName":"matrix","templateName":"matrix","container":"#matrixContainer","adaptModel":function(h){if(h.type!=="starAvgPriceMatrix"){return{"display":false};
}if(!h.brackets){return{"display":false};}for(var g=0;g<h.brackets.length;g++){bracket=h.brackets[g];bracket.isAll=bracket.id==="all";}h.display=true;return h;},"afterPopulateContainer":function(){var g=f("#matrixContainer");if(g.is(":empty")){g.addClass("hidden");}else{g.removeClass("hidden");}}});e.registerView(d);});define("adaptInfo",["utils"],function(d){return function(f){var l=f.retailHotelInfoModel;if(f.isOpaque){return f;}l.isDealOfTheDayListing=f.isDealOfTheDayListing;l.isDisplayStarRating=l.showRatingAndReviews&&l.hotelStarRating!=="0.0";l.isDisplayGuestRating=l.showReviews;l.isExpediaExtras=((l.hotelExtraTexts.length>0)?true:false);if(l.isExpediaExtras){if(l.hotelExtraTexts.length==1){l.oneExtra=true;}else{l.oneExtra=false;}}l.showLocalizedName=false;if(window.pageModel&&window.pageModel.searchResults&&window.pageModel.searchResults.showLocalizedHotelNames&&l.localizedHotelName!=null&&l.localizedHotelName!=""){l.showLocalizedName=true;}l.isFreeCancel=f.isFreeCancel;l.showInsiderSelect=false;l.showExtras=true;if(window.pageModel&&window.pageModel.experiments){if(!d.isExperiment({"name":"Expedia_Extras_across_shopping_cko_paths","variant":0})){l.showExtras=false;}if(window.pageModel.experiments.HotelISEnhancedInsiderSelect==="3937.1"){l.showInsiderSelect=true;}}l.isExpediaExtras=l.isExpediaExtras&&l.showExtras;if(l.largeThumbnailURL){l.extraLargeThumbnailURL=l.largeThumbnailURL.replace("_e.","_l.");}l.isTelephoneTooltip=l.telephoneNumber&&l.telephoneNumber!=""&&l.showPhoneTooltip&&""!="";l.isDisplayUrgency=f.isDisplayUrgency;l.isLimitedRooms=f.isLimitedRooms;l.isUrgencySingleRoom=f.isUrgencySingleRoom;l.numberOfRoomsLeftForUrgencyMsg=f.numberOfRoomsLeftForUrgencyMsg;var e="HotelSRPOIFilter",h=d.getUrlParam("poiLatLong"),j,g;l.isPoi=false;if(h&&d.isExperiment({"name":e,"id":"4157","variant":1})){g=d.getSelectedPoiName();if(!g){if(typeof h==="string"&&h.indexOf("%2C")!==-1){j=h.split("%2C");}else{if($.isArray(h)){j=h;}}if(j&&j.length===2){if(pageModel.poi&&pageModel.poi.poiOptions&&pageModel.poi.poiOptions.length>0){for(var k=0;k<pageModel.poi.poiOptions.length;k++){if((1*j[0])===pageModel.poi.poiOptions[k].latLong.latitude){if((1*j[1])===pageModel.poi.poiOptions[k].latLong.longitude){g=pageModel.poi.poiOptions[k].name;break;}}}}}}if(g){l.isPoi=true;l.showDistanceInfo=true;l.poiDestination=g;}}l.showMapViewLink=false;if(d.isExperiment({"name":"HSRFindHotelonMap","id":"4464","variant":1})){l.showMapViewLink=true;}return f;};});define("priceAdapter",["config"],function(d){var e={"adaptErrors":function(f){var k=f.retailHotelPricingModel,j=f.retailHotelInfoModel;var h=k.errorMessages&&k.errorMessages.length&&k.errorMessages[0]!="",g=!h&&!k.price,i=g&&k.numOfRetailHotelRooms>0;k.isGeneralError=h&&(j.esrHotel||k.errorCode!=512);k.isRoomMustBeBookedIndividually=h&&!j.esrHotel&&k.errorCode==512;k.isRoomCannotBeBooked=i&&k.unavailableDescriptionRoom==="";k.isPartialAvailablitiy=i&&(k.unavailableDescriptionRoom==="-5"||k.unavailableDescriptionRoom=="NA");k.isMaxAdults=i&&k.unavailableDescriptionRoom==="-1";k.isMaxChildren=i&&k.unavailableDescriptionRoom==="-2";k.isMaxInfants=i&&k.unavailableDescriptionRoom==="-3";k.isMaxGuests=i&&k.unavailableDescriptionRoom==="-4";k.roomsMayBeAvailable=g&&!i;k.isError=h||g;j.hideWoodpecker=(k.roomsMayBeAvailable||k.isRoomCannotBeBooked||k.isGeneralError||k.isError);return f;},"adaptPriceType":function(f){var k=f.retailHotelPricingModel,j=f.retailHotelInfoModel,i=window.pageModel.searchResults,g=2,h=1;k.priceType="";if(j.esrHotel==true){if(i.priceTypeDisplayed==g){if(k.isShowPricePopup||!k.isShowPriceDisclaimer){k.priceType="avgPerNight";}else{k.priceType="avgPerNightOneStar";}}else{if(i.mandatoryFeeChangesRequired){if(k.hasMandatoryFees){k.priceType="totalPriceFromOneStar";}else{k.priceType="totalRateFrom";}}else{if(k.isShowPricePopup||!k.isShowPriceDisclaimer){k.priceType="totalRateFrom";}else{k.priceType="totalRateFromOneStar";}}}}else{if(i.showMandatoryFeeEEM){k.priceType="totalPriceFrom";}else{if(i.priceTypeDisplayed==g){if(k.isShowPricePopup||!k.isShowPriceDisclaimer){k.priceType="ratePerNight";}else{k.priceType="ratePerNightTwoStars";}}else{if(d.siteId==="6"){k.priceType="priceFrom";}else{if(k.isShowPricePopup||!k.isShowPriceDisclaimer){k.priceType="totalRateFrom";}else{k.priceType="totalRateFromTwoStars";}}}}}return f;},"adaptAstrix":function(f){var h=f.retailHotelPricingModel,g=f.retailHotelInfoModel;h.astrix=[];if(g.esrHotel&&(!h.isShowPricePopup||h.isShowPriceDisclaimer)){h.astrix["*"];}else{if(!h.isShowPricePopup||h.isShowPriceDisclaimer){h.astrix["*","*"];}}return f;},"adaptAirAttach":function(f){var g=f.retailHotelPricingModel;if(g.hotmipSecondsLeft){require("utils",function(h){g.hotmipSecondsLeft=h.getUpdatedSecondsLeft(g.hotmipSecondsLeft);if(g.hotmipSecondsLeft>0){g.isAirAttach=true;g.discountPercent=Math.floor(((g.priceWithoutDrr-g.price)/g.priceWithoutDrr)*100);require("drrTimer",function(j){var i="#hotel"+f.hotelIndex+" .airAttachExpireMsg .timer, #drr"+f.hotelIndex+" .airAttachExpireMsg .timer";g.airAttachTimer=j.register(i,g.hotmipSecondsLeft,"","airAttachResults","airAttachTimer");});}});}return f;},"adaptDrrMessage":function(f){var h=f.retailHotelPricingModel,g=f.retailHotelInfoModel;if(h.drrSecondsLeft&&!g.datelessSearch){require("utils",function(j){h.drrSecondsLeft=j.getUpdatedSecondsLeft(h.drrSecondsLeft);if(h.drrSecondsLeft>0){var i="drrMsg";if(h.isDealOfTheDayListing){i="dealsOfTheDayTimer";}require("drrTimer",function(l){var k="#hotel"+f.hotelIndex+" .drrExpireMsg, #drr"+f.hotelIndex+" .drrExpireMsg";h.drrExpireMsg=$.trim(l.register(k,h.drrSecondsLeft,h.drrExpirationDate,false,i));});}});}return f;},"adaptMandatoryFees":function(f){var g=f.retailHotelPricingModel;g.showPDO=false;require("config",function(h){g.showPDO=h.pdoFeatureEnabled&&g.hasMandatoryFees;});return f;}};return e;});define("adaptPrice",["config"],function(d){return function(e){var g=e.retailHotelPricingModel,f=e.retailHotelInfoModel;if(e.isOpaque){return e;}g.datelessSearch=f.datelessSearch;g.isDealOfTheDayListing=e.isDealOfTheDayListing;g.isDisplayStrikePrice=g.isDrrDiscount||g.isDynamicPrice;g.isShowDrr=!!g.drrMessage&&!f.datelessSearch&&!e.isDealOfTheDayListing&&!g.hotmipSecondsLeft;g.isDrrMessage=!!g.drrMessage&&!g.datelessSearch;g.isDisplayUrgency=e.isDisplayUrgency;g.isLimitedRooms=e.isLimitedRooms;g.isUrgencySingleRoom=e.isUrgencySingleRoom;g.numberOfRoomsLeftForUrgencyMsg=e.numberOfRoomsLeftForUrgencyMsg;g.isEtp=g.isETP&&!g.datelessSearch&&!d.isTD&&!d.isBarclays;if(f.showReviews==true){g.superlative=f.superlativeMessage;}require("priceAdapter",function(h){e=h.adaptErrors.call(this,e);e=h.adaptPriceType.call(this,e);e=h.adaptAstrix.call(this,e);e=h.adaptAirAttach.call(this,e);e=h.adaptDrrMessage.call(this,e);e=h.adaptMandatoryFees.call(this,e);f.showExpediaRateText=(f.esrHotel&&!e.isPayLater&&!g.isError);});return e;};});require("Handlebars",function(d){d.registerHelper("addCurrency",function(f,e,g){var h="";if(f){h=g+e;}else{h=e+g;}return h;});});define("adaptOpaque",["utils"],function(d){var e=0;return{"buildOpaqueObject":function(){var f={};if(window.pageModel&&window.pageModel.pageTitle&&window.pageModel.wizard&&window.pageModel.searchResults){f={"isOpaque":true,"opaqueIndex":0,"isCitySearch":window.pageModel.pageTitle.isCitySearch,"regionId":window.pageModel.wizard.regionId,"destination":window.pageModel.searchResults.opaqueDestination,"opaqueUrl":this.buildOpaqueUrl(),"supplementalDescLocalizedText":window.pageModel.searchResults.supplementalDescLocalizedText,"opaqueBrandingImagePath43":(window.pageModel.brand&&window.pageModel.brand.opaqueBrandingImagePath43)?window.pageModel.brand.opaqueBrandingImagePath43:"/static/default/default/images/hotResult/opaque-responsive-43.png","opaqueBrandingImagePath11":(window.pageModel.brand&&window.pageModel.brand.opaqueBrandingImagePath11)?window.pageModel.brand.opaqueBrandingImagePath11:"/static/default/default/images/hotResult/opaque-responsive-11.png"};}return f;},"buildOpaqueUrl":function(){var f="",g=d.getHash();
if(g&&window.pageModel&&window.pageModel.searchResults){f="/Unpublished-Rate-Hotels?action=newSearch";f+="&inpRegionType="+window.pageModel.searchResults.opaqueSearchType;f+="&";f+=d.getHash();}return f;},"injectAllBanners":function(k,o){var n=[];for(var m=0;m<k.length;m++){var h=k[m];for(var l=0;l<o.length;l++){var g=o[l].hotelIndex;if(g&&h===g){n.push(l);}else{if(l===o.length-1){if(h===g+1){n.push(l+1);}}}}}for(var m=0;m<n.length;m++){var f=n[m]+m;this.inject(f,o);}},"inject":function(g,h){var f=this.buildOpaqueObject();if(h.length>g-1){f.opaqueIndex=e++;f.opaqueNumber=f.opaqueIndex+1;h.splice(g,0,f);}return h;},"isOpaqueDataInjected":function(h){var f=false;for(var g=0;g<h.length;g++){if(h[g].isOpaque){f=true;break;}}return f;},"getPositions":function(){var f=[];if(window.pageModel&&window.pageModel.searchResults&&window.pageModel.searchResults.opaqueBannerPositions){f=window.pageModel.searchResults.opaqueBannerPositions.sort(function(h,g){return h-g;});}return f;},"adaptOpaque":function(g){if(window.pageModel&&window.pageModel.searchResults&&window.pageModel.searchResults.showOpaqueBanners&&!this.isOpaqueDataInjected(g)){var f=this.getPositions();this.injectAllBanners(f,g);}return g;},"reset":function(){e=0;}};});define("opaqueDealsCtrl",["jQuery","templates","utils"],function(f,e,d){return{"opaqueData":{},"buildDealsParameters":function(){if(window.pageModel&&window.pageModel.wizard&&window.pageModel.wizard.checkIn&&window.pageModel.wizard.checkOut&&window.pageModel.searchResults&&window.pageModel.searchResults.opaqueDestination){var g={"destinationName":window.pageModel.searchResults.opaqueDestination,"startDate":window.pageModel.wizard.checkIn,"endDate":window.pageModel.wizard.checkOut,"response":"json"};return g;}return{};},"getOpaqueData":function(j){var g=this,h="ws/HotelSearchWebService/v1/opaqueDealsRequest",i=this.buildDealsParameters();f.ajax({"url":h,"data":i,"dataType":"json","success":function(l,n,m){if(l&&l.response&&l.response.opaqueDealsResponse){var k=f.parseJSON(l.response.opaqueDealsResponse);if(k.Result&&k.Result[0]&&k.Result[0].StarRating&&k.Result[0].Price){g.opaqueData[j]={"stars":k.Result[0].StarRating/1,"price":k.Result[0].Price/1,"showCurrencyAsSuffix":window.pageModel.resultsAbove[0].retailHotelPricingModel.showCurrencyAsSuffix,"currencySymbol":window.pageModel.resultsAbove[0].retailHotelPricingModel.currencySymbol,"destination":window.pageModel.searchResults.opaqueDestination};g.updateOpaque();}else{g.opaqueData[j]={"isFailedRequest":true};}}}});},"updateOpaque":function(){if(window.pageModel&&window.pageModel.searchResults){var i=window.pageModel.wizard,h=window.pageModel.searchResults;if(i.regionId&&!i.isDatelessSearch&&h.showOpaqueBanners){var k=window.pageModel.wizard.regionId,g=this.opaqueData[k],j=f(".opaque");if(g){if(!g.isFailedRequest){this.updateOpaqueInfo(j,g);this.updateOpaquePrice(j,g);}}else{if(k){this.getOpaqueData(k);}}}}},"updateOpaqueInfo":function(i,g){var h=e.render("priceInfoTitle",g);i.find(".opaqueTitle").html(h);},"updateOpaquePrice":function(i,g){var h=e.render("pricePriceCol",g);i.find(".priceCol").html(h);}};});define("adaptHotwire",["utils"],function(d){var e=0;return{"buildHotwireObject":function(){var f={};if(window.pageModel&&window.pageModel.pageTitle&&window.pageModel.wizard&&window.pageModel.searchResults){f={"isOpaque":true,"showHotwire":true,"opaqueIndex":0,"isCitySearch":window.pageModel.pageTitle.isCitySearch,"regionId":window.pageModel.wizard.regionId,"destination":window.pageModel.searchResults.opaqueDestination,"showCurrencyAsSuffix":window.pageModel.resultsAbove[0].retailHotelPricingModel.showCurrencyAsSuffix,"currencySymbol":window.pageModel.resultsAbove[0].retailHotelPricingModel.currencySymbol,"hotwireUrl":this.buildHotwireUrl(),"supplementalDescLocalizedText":window.pageModel.searchResults.supplementalDescLocalizedText,"hotwireBrandingImagePath11":"/static/default/default/images/hotResult/hotwire-responsive-11.png","hotwireBrandingImagePath43":"/static/default/default/images/hotResult/hotwire-responsive-43.png"};}return f;},"buildHotwireUrl":function(){var f="http://www.hotwire.com/hotel/search-options.jsp?inputId=index&rs=0&contextDomId=genRandom1&isFromSearchPopup=false3&destCity=",g,h;if(window.pageModel&&window.pageModel.wizard){g=window.pageModel.wizard.searchString;g=g.replace(/ \(.*\)/,"");h=g.indexOf(",");if(h!==-1){h=g.indexOf(",",h+1);if(h!==-1){g=g.substring(0,h);}}f+=encodeURIComponent(g);f+="&startDate="+window.pageModel.wizard.checkIn;f+="&endDate="+window.pageModel.wizard.checkOut;f+="&numRooms="+window.pageModel.wizard.roomList.length;f+="&noOfAdults="+window.pageModel.wizard.totalAdults;f+="&noOfChildren="+window.pageModel.wizard.totalChildren;}f+="&sid=S286&bid=B3796230";return f;},"injectAllBanners":function(k,o){var n=[];for(var m=0;m<k.length;m++){var h=k[m];for(var l=0;l<o.length;l++){var g=o[l].hotelIndex;if(g&&h===g){n.push(l);}else{if(l===o.length-1){if(h===g+1){n.push(l+1);}}}}}for(var m=0;m<n.length;m++){var f=n[m]+m;this.inject(f,o);}},"inject":function(f,h){var g=this.buildHotwireObject();if(h.length>f-1){g.opaqueIndex=e++;g.opaqueNumber=g.opaqueIndex+1;h.splice(f,0,g);}return h;},"isHotwireDataInjected":function(h){var f=false;for(var g=0;g<h.length;g++){if(h[g].isOpaque){f=true;break;}}return f;},"getPositions":function(){var f=[];if(window.pageModel&&window.pageModel.searchResults&&window.pageModel.searchResults.opaqueBannerPositions){f=window.pageModel.searchResults.opaqueBannerPositions.sort(function(h,g){return h-g;});}return f;},"adaptHotwire":function(g){if(window.pageModel&&window.pageModel.searchResults&&window.pageModel.searchResults.showOpaqueBanners&&!this.isHotwireDataInjected(g)){var f=this.getPositions();this.injectAllBanners(f,g);}return g;},"reset":function(){e=0;}};});define("hotwireDealsCtrl",["jQuery","templates","utils"],function(f,e,d){return{"hotwireData":{},"buildDealsParameters":function(){if(window.pageModel&&window.pageModel.wizard&&window.pageModel.wizard.checkIn&&window.pageModel.wizard.checkOut&&window.pageModel.searchResults&&window.pageModel.searchResults.opaqueDestination){var g={"destinationName":window.pageModel.searchResults.opaqueDestination,"startDate":window.pageModel.wizard.checkIn,"endDate":window.pageModel.wizard.checkOut,"response":"json"};return g;}return{};},"getHotwireData":function(j){var g=this,h="ws/HotelSearchWebService/v1/opaqueDealsRequest",i=this.buildDealsParameters();f.ajax({"url":h,"data":i,"dataType":"json","success":function(l,n,m){if(l.response.opaqueDealsResponse){var k=f.parseJSON(l.response.opaqueDealsResponse);if(k.Result&&k.Result[0]&&k.Result[0].StarRating&&k.Result[0].Price){g.hotwireData[j]={"stars":k.Result[0].StarRating/1,"price":k.Result[0].Price/1,"destination":window.pageModel.searchResults.opaqueDestination};g.updateHotwire();}else{g.hotwireData[j]={"isFailedRequest":true};}}}});},"updateHotwire":function(){if(window.pageModel&&window.pageModel.searchResults){var i=window.pageModel.wizard,h=window.pageModel.searchResults;if(i.regionId&&!i.isDatelessSearch&&h.showOpaqueBanners){var k=window.pageModel.wizard.regionId,g=this.hotwireData[k],j=f(".opaque");if(g){if(!g.isFailedRequest){this.updateHotwireInfo(j,g);this.updateHotwirePrice(j,g);}}else{if(k){this.getHotwireData(k);}}}}},"updateHotwireInfo":function(i,g){var h=e.render("hwPriceInfoTitle",g);i.find(".opaqueTitle").html(h);},"updateHotwirePrice":function(i,h){var g=e.render("hwPricePriceCol",h);i.find(".priceCol").html(g);}};});define("ResultsView",["View","utils","adaptInfo","adaptPrice","adaptOpaque","adaptHotwire","adaptVacationRental"],function(e,k,h,g,m,l,j){var f=0;var i=7;var d=function(){e.apply(this,arguments);};d.prototype=new e({"name":"results","modelName":"results","templateName":"results","beforeRenderTemplate":function(){require("uitk",function(n){$(".dynamic.strikePrice").uitk_tooltip("hide");n.media.lazyBuffer=1600;});},initadditionalClasses:function(n){var p=n.retailHotelPricingModel,o=n.retailHotelInfoModel;
if(!n.additionalClasses){n.additionalClasses="";}if(n.isSponsoredListing){n.additionalClasses+=" travelAd";}if(p.isAirAttach){n.additionalClasses+=" airAttach";}if(n.isDealOfTheDayListing){n.additionalClasses+=" dealOfDay";}if(n.isSelectedListing){n.additionalClasses+=" pinnedHotel";if(!!p.isHotmipThirdParty&&p.hotmipThirdPartyName!="aa"){n.additionalClasses+="ThirdParty";}}if(!!p.isHotmipThirdParty&&p.hotmipThirdPartyName!="aa"){n.additionalClasses+=" thirdParty";}if(p.priceType){n.additionalClasses+=" "+p.priceType;}if(o.largeThumbnailURL==undefined){n.additionalClasses+=" no-image";}},"adaptHotel":function(o){var n=o,p=n.retailHotelInfoModel,q=n.retailHotelPricingModel;if(n.isOpaque){return o;}n.isDealOfTheDayListing=(p&&p.datelessSearch)?false:n.isDealOfTheDayListing;if(n.isDealOfTheDayListing){n.isDealOfTheDayListing=n.hotelId!==k.getUrlParam("selected");}n.isDisplayUrgency=(!p.datelessSearch)&&(q.errorCode||q.price)&&p.esrHotel&&(p.numberOfRoomsLeftForUrgencyMsg>0);n.isLimitedRooms=q.isDisplayUrgency&&(!p.isNumOfRoomsLeftForLeadPrice);n.isUrgencySingleRoom=n.isDisplayUrgency&&p.numberOfRoomsLeftForUrgencyMsg===1;n.numberOfRoomsLeftForUrgencyMsg=p.numberOfRoomsLeftForUrgencyMsg;n.isShowTopDrr=!!q.drrMessage&&!p.datelessSearch&&!n.isDealOfTheDayListing&&!q.hotmipSecondsLeft;n.isShowTopAirAttach=!!q.hotmipSecondsLeft;n.isShowTopDealOfDay=n.isDealOfTheDayListing;n.isShowTopTag=n.isShowTopDrr||n.isShowTopAirAttach||n.isShowTopDealOfDay;n.isSelectedListingThirdParty=!!q.isHotmipThirdParty&&q.hotmipThirdPartyName!="aa"&&n.isSelectedListing;if(window.pageModel&&window.pageModel.experiments&&window.pageModel.experiments.HotelSRResponsiveQuickView==="3183.1"){n.isQuickView=true;}n.rebranding=window.pageModel.rebranding;return o;},"adaptTravelAds":function(p,o){var q=p.retailHotelInfoModel,r=p.retailHotelPricingModel,n=p.hotelIndex;if(p.isSponsoredListing){q.isSponsoredListing=p.isSponsoredListing;r.isSponsoredListing=p.isSponsoredListing;q.sponsoredListingClickTrackingRedirectUrl=p.sponsoredListingClickTrackingRedirectUrl;q.sponsoredListingImpressionTrackingUrl=p.sponsoredListingImpressionTrackingUrl;q.sponsoredListingImpressionTrackingUrl+="&ts="+new Date().getTime();if(n==0){p.trackExitId="HOT:SR:HotelSponsoredTop";}else{if(n==o-2){p.trackExitId="HOT:SR:HotelSponsoredBottom:1";}else{if(n==o-1){p.trackExitId="HOT:SR:HotelSponsoredBottom:2";}}}require(["utils"],function(s){var u="HotelHSRNumListing";if(s.isExperiment(u)){var t=pageModel.experiments[u];p.sponsoredListingImpressionTrackingUrl=s.addTestOverride(p.sponsoredListingImpressionTrackingUrl,t);q.sponsoredListingImpressionTrackingUrl=p.sponsoredListingImpressionTrackingUrl;}});}else{p.trackExitId="HOT:SR:HotelModule";}return p;},"adaptInfo":function(n){n=h.call(this,n);return n;},"adaptPrice":function(n){n=g.call(this,n);return n;},"adaptQuickView":function(n){n=adaptQuickView.call(this,n);return n;},"adaptPinned":function(n){if(n.isSelectedListing){n.isShowTopTag=true;n.isShowTopAirAttach=false;n.isShowTopDealOfDay=false;n.isDealOfTheDayListing=false;}return n;},"adaptOpaque":function(n){n=m.adaptOpaque(n);return n;},"adaptHotwire":function(n){n=l.adaptHotwire(n);return n;},"adaptVacationRental":function(n){if(n.isVacationRental){n=j.adaptVacationRental(n);}return n;},"removeUnavailableTravelAds":function(n){var o=[];for(var p=0;p<n.length;p++){var q=n[p],r=q.retailHotelPricingModel;if(!(q.isSponsoredListing&&r&&r.isError)){o.push(q);}}return o;},"adaptModel":function(o){var n=this;require("drrTimer",function(p){var s=window.pageModel.searchResults;p.initBucketTimes(s.drrExpirationSecs6,s.drrExpirationSecs5,s.drrExpirationSecs1,s.drrExpirationSecs2,s.drrExpirationSecs3,s.drrExpirationSecs4);if(s&&!s.hotelCount){var q=0;if(window.pageModel.resultsAbove){q+=window.pageModel.resultsAbove.length;}if(window.pageModel.resultsBelow){q+=window.pageModel.resultsBelow.length;}s.hotelCount=q;}for(var r=0;r<o.length;r++){var t=o[r];t.hotelIndex=f++;t.additionalClasses=t.additionalClasses||"";t=n.adaptHotel(t);t=n.adaptInfo(t);t=n.adaptPrice(t);t=n.adaptTravelAds(t,s.hotelCount);t=n.adaptPinned(t);t=n.adaptVacationRental(t);n.initadditionalClasses(t);}if(window.pageModel&&window.pageModel.experiments&&window.pageModel.experiments.HotelSRHotwireVSOpaque==="3412.1"){o=n.adaptHotwire(o);}else{o=n.adaptOpaque(o);}o=n.removeUnavailableTravelAds(o);});return o;},"afterPopulateContainer":function(){var n=$(".hotel .thumbnail, .opaque .thumbnail").slice(0,i);k.populateThumbnails(n);},"afterPageRender":function(){var n=$(".hotel .thumbnail, .opaque .thumbnail").slice(i);k.populateThumbnails(n);},"resetHotelIndex":function(){f=0;}});return d;});define("qvMapCtrl",["jQuery","utils","templates"],function(f,d,e){return{"openMap":function(n,r){var h=f(n),k=h.closest(".hotel"),g=k.find(".interactiveMap"),m=k.find(".toggle-pane"),j=k.find(".poiList"),l=k.find(".poiTitle"),p=k.find(".taLinkOff"),q;var i=(-1*f("html,body").offset().top)+f(window).height()+f(window).scrollTop();var o=m.offset().top+r;if(!(m.hasClass("open"))&&(o>i)){f("html,body").animate({scrollTop:k.offset().top+k.height()+r-f(window).height()},400);}q=p.css("bottom");if(q&&q.indexOf("357")!==-1){p.css("bottom","3px");}else{p.css("bottom","357px");}l.removeClass("hidden");this.initPoiSection(k,l,j);this.initMapSection(k,g);},"initPoiSection":function(i,h,g){if(g.find(".mapviewpoi").length===0){this.ajaxMapData(i,h,g);}},"initMapSection":function(g,h){require("uitkMap",function(k){var i=d.findHotelById(g.data("hotelid")),m={},p,o,l,j;try{p=new google.maps.LatLng(i.retailHotelInfoModel.latitude,i.retailHotelInfoModel.longitude);m={mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR},mapTypeId:google.maps.MapTypeId.ROADMAP,zoom:13,center:p,styles:"",scrollwheel:false};o=new google.maps.Map(h.get(0),m);l=new google.maps.OverlayView();l.draw=function(){};l.setMap(o);j=new google.maps.Marker({position:p,map:o,icon:"",shadow:""});f(".mapLoadingAnimation").hide();google.maps.event.trigger(o,"resize");}catch(n){h.text("MAP UNAVAILABLE");g.find(".detailsBtn").hide();return;}});},"renderPoi":function(k,i,h){var l=k.map;if(!l||l.length===0){i.addClass("hidden");return;}var j=[];f.each(l,function(m,n){var o={};o.name=n.name;f.each(n.commuteScoreList,function(p,q){var r=Math.round(q.time/6)/10;if(q.mode=="WALK"){o.walkTime=r;if(o.walkTime<=10){o.isWalk=true;}}else{if(q.mode=="DRIVE"){o.driveTime=r;if(o.driveTime<=10){o.isDrive=true;}}}if((o.walkTime<=10)&&(o.driveTime<=10)){o.isDrive=false;}});if((o.isWalk||o.isDrive)==true){if(o.isWalk){o.iconType="walk";}else{o.iconType="cars";}if(j.length<9){j.push(o);}}});var g=e.render("viewMap",j);h.html(g).css("list-style","none");if(j.length===0){i.addClass("hidden");}},"ajaxMapData":function(j,i,h){var g=this,k={};f.ajax({dataType:"json",url:"/api/hotels/pointsofinterestforhotel/"+j.data("hotelid"),success:function(l){k.map=l;g.renderPoi(k,i,h);},error:function(){i.addClass("hidden");}});}};});define("resultsAboveView",["jQuery","ResultsView"],function(e,d){return new d({"name":"resultsAbove","modelName":"resultsAbove","container":"#resultsContainer","beforeRenderTemplate":function(){this.resetHotelIndex();}});});require(["resultsAboveView","presenter"],function(e,d){d.registerView(e);});define("disambig",["jQuery","View"],function(d,e){return new e({name:"disambig",modelName:"suggestions",templateName:"didYouMeanThis",container:"#disambigContainer"});});require(["presenter","disambig"],function(e,d){e.registerView(d);});require(["jQuery","presenter","utils"],function(g,f,d){var e=new f.View({"name":"redirectView","modelName":"url","adaptModel":function(h){return{"url":h,"keepInterstitial":true};},"renderTemplate":function(j){var h=this,i=d.getVariantByName("HotelSRNoDisambig");console.log(i);if(typeof i==="undefined"){h.doRedirect(j);}else{require(["uitk"],function(k){k.subscribe("hsr.experiment.exposed",function(){h.doRedirect(j);});});}},"populateContainer":function(){},"doRedirect":function(h){setTimeout(function(){location.replace(h.url);
},200);}});f.registerView(e);});define("retargetingPartnersTravelocityView",["jQuery","View"],function(d,e){return new e({"name":"retargetingPartnersTvly","templateName":"retargetingPartnersTvly","modelName":"wizard","container":"#retargetingPartnersTvlyContainer","adaptModel":function(f){if(f){if(f.checkInMonth){f.checkInMonthNonZeroIndex=f.checkInMonth+1;}if(f.checkOutMonth){f.checkOutMonthNonZeroIndex=f.checkOutMonth+1;}}return f;}});});require(["presenter","retargetingPartnersTravelocityView"],function(e,d){e.registerView(d);});define("historyTabStorage",["templates","utils","uitk"],function(g,e,f){var d=function(j,i){this.init(j,i);};d.prototype={"destination":undefined,"checkInDate":undefined,"checkOutDate":undefined,"adults":undefined,"children":undefined,"hash":undefined,"selected":false,"selectedTime":0,"init":function(l,k){if(l&&k){this.destination=l.destination;this.checkInDate=l.checkInDate;this.checkOutDate=l.checkOutDate;this.adults=l.adults;this.children=l.children;this.hash=l.hash;this.selected=false;this.selectedTime=l.selectedTime;}else{if(l){this.destination=e.getDestinationNameShort();this.adults=l.totalAdults;this.children=l.totalChildren;if(!l.isDatelessSearch){var j={"day":l.checkInDay,"month":l.checkInMonth};this.checkInDate=g.render("historyTabDate",j);var i={"day":l.checkOutDay,"month":l.checkOutMonth};this.checkOutDate=g.render("historyTabDate",i);}this.updateHash();}}},"updateHash":function(){this.hash=e.getHash();},"markSelected":function(){this.selected=true;this.selectedTime=(Date.now)?Date.now():+new Date;},"clearSelected":function(){this.selected=false;},"compare":function(i){if(i&&this.destination===i.destination&&this.checkInDate===i.checkInDate&&this.checkOutDate===i.checkOutDate&&this.adults===i.adults&&this.children===i.children){return true;}return false;},"isOlder":function(i){if(i&&i.selectedTime>this.selectedTime){return true;}return false;}};var h={"BROWSER_STORAGE_KEY":"hsr.historyTabs","browserStorage":f.createBrowserStorage("session"),"MAX_HISTORY_LENGTH":5,"history":[],"init":function(){this.fetchHistory();},"fetchHistory":function(){var k=this.getJsonFromStorage();if(k){for(var j=0;j<k.length;j++){var l=k[j];this.history.push(new d(l,true));}}},"getJsonFromStorage":function(){return this.browserStorage.readJSONAsObject(this.BROWSER_STORAGE_KEY);},"saveHistory":function(){this.browserStorage.saveAsJSON(this.BROWSER_STORAGE_KEY,this.history);},"clearSelected":function(){for(var j=0;j<this.history.length;j++){this.history[j].clearSelected();}},"addOrUpdateHistory":function(l){for(var k=0;k<this.history.length;k++){var j=this.history[k];if(l.compare(j)){this.updateHistoryTab(j);return;}}this.addHistoryTab(l);return;},"addHistoryTab":function(i){this.history.push(i);this.updateHistoryTab(i);},"updateHistoryTab":function(i){i.updateHash();i.markSelected();if(this.history.length>this.MAX_HISTORY_LENGTH){this.evictOldestTab();}this.saveHistory();},"updateModel":function(){if(window.pageModel&&window.pageModel.wizard){var i=new d(window.pageModel.wizard);this.clearSelected();if(i.destination){this.addOrUpdateHistory(i);}}},"evictOldestTab":function(){var k,j;for(var l=0;l<this.history.length;l++){if(!k||this.history[l].isOlder(k)){k=this.history[l];j=l;}}if(typeof j!=="undefined"){this.evictTabByIndex(j);}},"evictTabByHash":function(l){var j;for(var k=0;k<this.history.length;k++){if(this.history[k].hash===l){j=k;break;}}if(typeof j!=="undefined"){this.evictTabByIndex(j);}},"evictTabByIndex":function(i){this.history.splice(i,1);this.saveHistory();},"getArray":function(){return this.history;},"clearStorage":function(){this.history=[];this.browserStorage.saveItem(this.BROWSER_STORAGE_KEY,"");}};return h;});define("historyTabView",["View"],function(e){var d=new e({name:"historyTab",modelName:"historyTab",container:"#historyTabContainer",templateName:"historyTab"});return d;});require(["presenter","historyTabView"],function(e,d){e.registerView(d);});define("historyTabCtrl",["historyTabStorage","presenter"],function(f,e){var d={"getData":function(){var g={"historyTab":f.getArray()};return g;},"reRender":function(){var g=this.getData();e.render(g);}};window._printHistoryTab=function(){if(console){console.log("From Array:",f.history);console.log("From Storage:",f.getJsonFromStorage());}};window._clearHistoryTab=function(){f.clearStorage();};return d;});require(["lifeCycleManager","historyTabStorage","historyTabCtrl","utils","uitk"],function(k,i,f,d,e){var j="HotelSRHistoryTabs",g=d.getVariantByName(j);function h(){i.updateModel();f.reRender();if(i.history.length>1){if(g==1){$("#historyTabs").removeClass("hidden");}d.exposeExperimentByName(j);}}i.fetchHistory();k.register(["wizard"],{"afterRender":function(l){h();}});e.subscribe("hsr.bustBackForward",function(){h();});});var c=function(){if(!pageModel.experiments||pageModel.experiments.HotelRespLeftAlign!=="3621.1"){return;}require(["jQuery"],function(d){d("body").addClass("LA5255");});};c();var b=function(){var f=$("#wizard"),m=$("#airAttachContainer"),n=$("#airAttach"),u=$(".airAttachMessage"),d=$(".airAttachTimerMessage"),l=$("<span><strong>Exclusive Offer</strong></span>"),q=$("<br/>"),k="Because you booked a flight, save up to % on select hotels for your trip",i=$(".drrLink.airAttach"),s=0,g=pageModel.wizard,h,p,o,t,j,r=new Date(),e;if(!pageModel.experiments||pageModel.experiments.HotelAirAttachResponsiveMakeover!=="3670.1"){return;}if(i.length===0){return;}if(!g.checkInYear||g.checkInYear===""){j=r.getFullYear();}else{j=g.checkInYear;}t=g.checkInMonth+1;h=new Date(t+"/"+g.checkInDay+"/"+j);if(!g.checkOutYear||g.checkOutYear===""){j=r.getFullYear();}else{j=g.checkOutYear;}t=g.checkOutMonth+1;p=new Date(t+"/"+g.checkOutDay+"/"+j);e=Math.floor((p-h)/(1000*60*60*24));i.each(function(){var C=$(this),w=C.find(".tag"),A=C.find(".airAttachMsg"),z="Because you booked a flight, save % on a # night stay",y="Because you booked a flight",v=0,B,x;x=$.trim(A.text());B=x.match(/^[0-9]{1,3}/);if(B){v=1*B[0];if(v>s){s=v;}}w.empty();w.text("Exclusive Offer ");w.append("&mdash; ");w.find(".tagEnd").removeClass("tagEnd");w.removeClass("tag");w.addClass("AAM5276bold");A.empty();if(v>0){A.text(z.replace(/\%/,v+"%").replace(/#/,e));}else{A.text(y);}C.next().find(".priceCol").append(C.find(".airAttachExpireMsg"));});$("body").addClass("AAM5276");n.prepend(l);n.addClass("cols-row");if(s>0){k=k.replace(/\%/,s+"%");}else{k="Because you booked a flight, save on select hotels for your trip.";}u.text(k);d.insertAfter(l);q.insertAfter(d);m.insertAfter(f);};require(["jQuery","presenter"],function(e,d){d.registerLifeCycle(["resultsBelow"],{"afterRender":function(){b();}});});define("SortAirAttach",["jQuery"],function(e){var d={"variant":"","setVariant":function(){if(pageModel.experiments){if(pageModel.experiments.HotelSRAirAttachSorttoTop==="3697.0"){this.variant="0";return;}if(pageModel.experiments.HotelSRAirAttachSorttoTop==="3697.1"){this.variant="1";return;}if(pageModel.experiments.HotelSRAirAttachSorttoTop==="3697.2"){this.variant="2";return;}this.variant="-1";}else{this.variant="";}},"isValidTest":function(f){if(pageModel.experiments){if(this.variant!=="1"&&this.variant!=="2"){return false;}}else{return false;}if(f.length==0){return false;}if(window.pageModel.sort&&window.pageModel.sort.selectedSortOrder!=="0"){return false;}return true;},"sortHotels":function(n){var m=0,r=e("#resultsContainer"),h,k,p,l,s=0,q=0,f=false,j=0,g=[],o;h=r.children();if(h&&h.length){m=h.length;}if(this.variant==="1"){q=m;}if(this.variant==="2"){q=2;}for(o=0;o<m;o++){k=h.eq(o);l=false;p=false;if(k.hasClass("opaque")){g.push(o);}if(k.find(".travelAd").hasClass("travelAd")){l=true;}if(k.find(".airAttach").hasClass("airAttach")){p=true;s++;}if(l){j++;continue;}if(p){if(f){k.insertBefore(h.eq(j));}else{j++;}}else{f=true;}if(s>=q){break;}}this.restoreOpaqueInListing(g,r);},"restoreOpaqueInListing":function(f,m){var h,g,l,k;for(h=0;h<f.length;h++){l=m.children();if(l.eq(f[h]).hasClass("opaque")){continue;}else{for(g=f[h]+1;
g<l.length;g++){k=l.eq(g);if(k.hasClass("opaque")){k.insertBefore(l.eq(f[h]));break;}}}}},"run":function(){var f=e(".airAttach");this.setVariant();if(!this.isValidTest(f)){return;}else{this.sortHotels(f);}}};return d;});require(["SortAirAttach","lifeCycleManager"],function(d,e){e.register("resultsBelow",{"afterPopulateContainer":function(){d.run();}});});define("AirAttachEDS",["jQuery","utils"],function(f,e){var d={"isValidTest":function(){var g=pageModel.airAttach;if(g.hotmipSecondsLeft){g.hotmipSecondsLeft=e.getUpdatedSecondsLeft(g.hotmipSecondsLeft);if(g.hotmipSecondsLeft>0){return true;}}return false;},"getMaxPercentage":function(){var g=0,k,j,h;if(pageModel.resultsAbove&&pageModel.resultsAbove.length){for(k=0;k<pageModel.resultsAbove.length;k++){j=pageModel.resultsAbove[k].retailHotelPricingModel;if(j.hotmipPercentage){h=parseInt(j.hotmipPercentage);if(h>g){g=h;}}}}if(pageModel.resultsBelow&&pageModel.resultsBelow.length){for(k=0;k<pageModel.resultsBelow.length;k++){j=pageModel.resultsBelow[k].retailHotelPricingModel;if(j.hotmipPercentage){h=parseInt(j.hotmipPercentage);if(h>g){g=h;}}}}return g;},"showAirAttachEDS":function(){var m=pageModel.airAttach,n=f("#edsDisplay"),l=f("#edsHeading"),i="Because you booked a flight, save % on select hotels for your @ trip.",h=this.getMaxPercentage(),g="",k=f('<div class="AAE5246text"></div>'),j=f('<div class="AAE5246timer"><span class="timer"></span></div>');if(pageModel.pageTitle&&pageModel.pageTitle.destination&&pageModel.pageTitle.destination!=""){g=pageModel.pageTitle.destination;}if(h>0){i=i.replace(/\%/," up to "+h+"%");}else{i=i.replace(/\%/,"");}i=i.replace(/\@/,g);n.prepend(j);k.text(i);n.prepend(k);require(["drrTimer"],function(o){var p;if(m.hotmipSecondsLeft){m.hotmipSecondsLeft=e.getUpdatedSecondsLeft(m.hotmipSecondsLeft);if(m.hotmipSecondsLeft>0){m.airAttachTimer=o.register(".AAE5246timer .timer",m.hotmipSecondsLeft,"","airAttachEDS","airAttachEDSTimerMessage");}}});l.hide();},"hide":function(){f(".AAE5246text").hide();f(".AAE5246timer").hide();f("#edsHeading").show();},"run":function(){if(this.isValidTest()){this.showAirAttachEDS();}}};return d;});require(["jQuery","View","presenter","utils","uitk"],function(g,h,f,d,e){if(d.isExperiment("HotelHSRSoldOutMapPin")&&d.getVariantByName("HotelHSRSoldOutMapPin")>0){e.subscribe("map.opened",function(){var m=d.getHotels();var n=0;for(var l=0;l<m.length;l++){var j=m[l],o=j.retailHotelPricingModel;if(j.isOpaque||j.isVacationRental){continue;}var k=e.map.data.hsrMap.markerData.markers[n++];if(o.price<=0){k.type="grey-pin";}}});}});define("adaptVacationRental",["jQuery","utils"],function(e,d){return{adaptVacationRental:function(f){var g=f.retailHotelInfoModel;var h=f.retailHotelPricingModel;g.hotelExtraTexts=[g.hotelName];g.hotelName="Vacation Rental";f.additionalClasses+=" vacationRental";g.isDisplayGuestRating=false;g.isVacationRental=true;h.isVacationRental=true;f.infositeUrl="http://"+f.vacationRentalURL;if(d.getVariantById(4154)){f.infositeUrl+="&interstitial=exp1";}if((g.structureType!="Vacation home")&&(g.structureType!="Condo")){g.structureType="";}return f;}};});define("dealFilterView",["jQuery","View","templates","utils"],function(f,g,e,d){return new g({"name":"dealFilter","modelName":"dealFilter","templateName":"aColFilter","container":"#dealFilterContainer","secondaryTemplateName":"listFilterOrientation","secondaryContainer":"#orientationDealsContainer","adaptModel":function(h){if(h&&h.dealFilterOptions&&d.isExperiment({name:"HotelSRDealsFilter",variant:1})){h.exists=true;h.hasHidden=false;h.sectionId="deals";var j=h.dealFilterOptions,i="dealFilter";j.id=i;j.inputName="dealFilter";j.inputType="checkbox";j.value="true";j.visible=true;j.rfrr="HOT:SR:DealFilter:";j.label=e.render("dealLabel",{"count":j.count});j.orientationLabel=e.render("OrientationDealFilterLabel");j.orientationHidden=false;j.orientation="#"+i;j.orientationTrack="HOT:SR:FO:dealFltr";h.options=[j];}return h;}});});require(["presenter","dealFilterView"],function(e,d){e.registerView(d);});define("filterDisCtrl",function(){return{"getCookie":function(d){var e="; "+document.cookie;var f=e.split("; "+d+"=");if(f.length==2){return f.pop().split(";").shift();}}};});require(["jQuery","uitk","filterDisCtrl"],function(h,f,e){var d=f.clickEvent;var g=e.getCookie("isClicked");if(g&&g==="true"){h(".showFilterDisclaimer").hide();h(".showFilterDisclaimerSmall").hide();}h("body").on(d,"#acol .submitFilter, .gotIt, #inpHotelNameMirror, #bcol .btn-primary",function(i){document.cookie="isClicked=true";h(".showFilterDisclaimer").hide();h(".showFilterDisclaimerSmall").hide();});});define("couponCtrl",["jQuery","templates","drrTimer"],function(f,j,h){var i,e,l,m=f(".site-content"),d=f(".site-content-wrap"),g=d.find(".bannerOrange"),k=d.find(".bannerGreen");return{dataType:"json",url:"/metaplus/context/true",success:function(n){var p=n;var o=this;f("#couponBanner").remove();f(".couponError").remove();f("body").removeClass("hideBanners");if(p){o.showCouponTemplates(p);if(p.offerAction){var q=(p.offerAction).toLowerCase();o.setCouponAction(q);}pageModel.metaPlus=p;f("body").trigger("metaPlusDataAvailable");}},error:function(){},"getCoupon":function(){f.ajax(this);},initTimer:function(q,o){var p=new Date().getTime();if(q.couponExpiration&&typeof q.couponExpiration==="number"&&q.couponExpiration>p){var n="#couponBanner .timer",r=(q.couponExpiration-p)/1000;o.timerMsg=f.trim(h.register(n,r,"",false,"timer"));o.showTimer=true;}},"showCouponTemplates":function(q){var o=false;if(q&&q.offerVariant){var n={};if(q.couponPercent){l=(q.couponPercent*100);}else{l=5;}switch(q.offerVariant){case"NA":f("#couponBanner").remove();break;case"ERROR":f("#couponBanner").remove();f("#errorContainer").prepend(j.render("couponError"));break;case"NON_REWARDS_MEMBER_COUPON_VARIANT":n.variant="Coupon";n.className="bannerOrange";n.showAction=true;n.text=j.render("couponMsg",l);break;case"NON_REWARDS_MEMBER_NO_COUPON_VARIANT":n.variant="DoublePoints";n.className="bannerOrange";n.showAction=true;n.text="Special offer: Join Expedia Rewards today to get double points!";break;case"REWARDS_MEMBER_COUPON_VARIANT":n.variant="Coupon";n.className="bannerOrange";n.showAction=true;n.text=j.render("rewardMemberCoupon",l);break;case"REWARDS_MEMBER_NO_COUPON_VARIANT":n.variant="DoublePoints";n.className="bannerOrange";n.showAction=true;n.text="Because you're a Rewards member, you get double points!";break;case"OPTED_IN_SOFT_LOGGED_IN":n.className="bannerOrange";n.showAction=false;n.text="<a href='javascript:void(0);' data-track-exit='HOT:SR:Meta:ReturnSignIn' class='bannerActionSecondary'>Sign in</a> to see special offers, exclusively for Rewards members.";break;case"OPTED_IN_WITH_PRIMARY_COUPON":o=true;n.className="bannerGreen";n.showAction=false;n.text=j.render("rewardsPrimaryCoupon",l);break;case"OPTED_IN_WITH_SECONDARY_COUPON":o=true;n.className="bannerGreen";n.showAction=false;n.text="Welcome back! Because you're a Rewards member, you get special pricing on participating hotels.";break;case"OPTED_IN_THIS_SESSION_NO_COUPON_VARIANT":o=true;n.className="bannerGreen";n.showAction=false;n.text="Get your double points when you book a participating hotel!";break;case"OPTED_IN_PREVIOUS_SESSION_NO_COUPON_VARIANT":o=true;n.className="bannerGreen";n.showAction=false;n.text="Welcome back! Because you're a Rewards member, you get double points on participating hotels.";break;}this.initTimer(q,n);f("#couponBanner").remove();if(n&&!(q.offerVariant=="NA")&&!(q.offerVariant=="ERROR")){f("body").addClass("couponListings");d.prepend(j.render("couponBanner",n));}if(window.pageModel&&(window.pageModel.resultsAbove)&&o){var r=window.pageModel.resultsAbove;if(window.pageModel.resultsBelow){r=window.pageModel.resultsAbove.concat(window.pageModel.resultsBelow);}for(var p=0;p<r.length;p++){if(r[p].isCouponEligible&&!r[p].retailHotelPricingModel.isETP&&r[p].retailHotelInfoModel.hotelType=="ESR"){f("#hotel"+r[p].hotelIndex).addClass("coupon");}}if((q.offerVariant=="OPTED_IN_WITH_PRIMARY_COUPON")||(q.offerVariant=="OPTED_IN_WITH_SECONDARY_COUPON")){f(".coupon .couponText, .coupon .rewardsAvailable").show();
}else{if((q.offerVariant=="OPTED_IN_THIS_SESSION_NO_COUPON_VARIANT")||(q.offerVariant=="OPTED_IN_PREVIOUS_SESSION_NO_COUPON_VARIANT")){f(".coupon .couponText, .coupon .rewardsDoublePoints").show();}}}}},"setCouponAction":function(n){e=n;},"getCouponAction":function(){return e;}};});require(["couponCtrl","presenter","config"],function(f,e,d){e.registerLifeCycle("resultsBelow",{"afterRender":function(){if(d.abacusConfig.metaRewards){f.getCoupon();}},"afterPageRender":function(){}});});require(["jQuery","uitk","couponCtrl","METAPLUS"],function(g,e,h,f){var d=e.clickEvent;g("body").on(d,".bannerAction, .bannerActionSecondary",function(i){f[h.getCouponAction()]();});});require(["jQuery","presenter"],function(f,e){var d=new e.View({"name":"multiCurrency","modelName":"multiCurrency","container":"#multiCurrencyContainer","templateName":"multiCurrency","adaptModel":function(g){return g;},"afterPopulateContainer":function(g){if(g.experimentEnabled===true&&typeof window.multiCurrencyComponent!=="undefined"&&typeof window.multiCurrencyComponent.render==="function"){window.multiCurrencyComponent.render(g);}}});e.registerView(d);});define("mapLinkOverrides",["jQuery","config","templates","uitk"],function(h,e,f,d){var g={"runTest":function(){var i=e.abacusConfig.hotelSRTabletMapLink;this.setBodyClass(i);if(i==="1"){this.updateStaticMapLocation();}else{if(i==="2"){this.updateOffCanvasText();}}d.publish("throttled.resize",{});},"setBodyClass":function(i){var j=h("body");j.removeClass("TML5023 TML5023-1 TML5023-2");if(i!=="0"){j.addClass("TML5023 TML5023-"+i);}},"updateStaticMapLocation":function(){var i=this.getTabletMapLinkUrl(),j=f.render("sortBarMap",{url:i});h(".sort-bar-column.toggle").after(j);},"getTabletMapLinkUrl":function(){var i="";if(window.pageModel&&window.pageModel.tabletMapLinkModel&&window.pageModel.tabletMapLinkModel.staticUrlSmall){i=window.pageModel.tabletMapLinkModel.staticUrlSmall;}return i;},"updateOffCanvasText":function(){var i=f.render("newFilterText",{});h(".sort-bar-column.toggle .btn-label").html(i);}};return g;});require(["mapLinkOverrides","lifeCycleManager"],function(e,d){d.register("sort",{"afterPageRender":function(){e.runTest();}});});require(["jQuery","presenter","utils"],function(f,e,d){if(d.isExperiment("HotelHSRTravelAdHybridLinkOff")){var g=d.getVariantByName("HotelHSRTravelAdHybridLinkOff");e.registerLifeCycle(["resultsAbove","resultsBelow"],{"adaptModel":function(k){for(var j=0,l;l=k[j++];){if(!l.sponsoredListingExternalUrl){continue;}var h=pageModel.experiments["HotelHSRTravelAdHybridLinkOff"];if(l.sponsoredListingImpressionTrackingUrl.indexOf(h)>-1){return;}l.sponsoredListingImpressionTrackingUrl=d.addTestOverride(l.sponsoredListingImpressionTrackingUrl,h);l.retailHotelInfoModel.sponsoredListingImpressionTrackingUrl=l.sponsoredListingImpressionTrackingUrl;}return k;}});e.registerLifeCycle(["resultsAbove","resultsBelow"],{"afterRender":function(k){if(g>0){for(var h=0,l;l=k[h++];){var j=f("#hotel"+l.hotelIndex);if(l.sponsoredListingExternalUrl){j.find(".details").css("padding-bottom","13px").after('<a class="taLinkOff" data-control="tooltip" target="'+l.hotelId+'" href="'+l.sponsoredListingExternalUrl+'">Compare rates at hotel website &#187;</a>');}}}}});}});define("travelAdLinkOff",["jQuery","utils","dctk"],function(g,e,d){var f={"getVariant":function(){var h=e.getVariantByNameAndExpose("HotelSR_StrongerCTATravelAdLinkoff");if(!h){return 0;}return h;},"run":function(){}};return f;});require(["jQuery","View","presenter","utils","uitk"],function(g,h,f,d,e){if(d.isExperiment("HotelSRLocalResidentRate")){var i=d.getVariantByName("HotelSRLocalResidentRate");f.registerLifeCycle(["resultsAbove","resultsBelow"],{"afterRender":function(n){for(var l=0,o;o=n[l++];){var m=g("#hotel"+o.hotelIndex);if(o.retailHotelPricingModel.drrTagID&&o.retailHotelPricingModel.drrTagID==462){var k=100-Math.round((o.retailHotelPricingModel.price/o.retailHotelPricingModel.priceWithoutDrr)*100);if(i==1){m.parent().find(".tagEnd").text("Neighborhood discount");m.parent().find(".drrMsg").text("Take "+k+"% off because you live nearby");}else{if(i==2){m.parent().find(".tagEnd").text("Because you're a local!");m.parent().find(".drrMsg").text("Local residents take "+k+"% off.");}}var j=m.parent().find(".tagEnd, .drrMsg");j.attr("data-control","tooltip").attr("data-trigger","hover").attr("data-content-id","localResidentTooltip");}}}});if(g("#hiddenElements > #localResidentTooltip").length==0){g("#hiddenElements").prepend('<div id="localResidentTooltip" class="hidden"><p>ID Required at Check In</p></div>');}}});require(["jQuery","View","presenter","utils","uitk"],function(g,h,f,d,e){if(d.isExperiment("HotelHSRFreebies")&&d.getVariantByName("HotelHSRFreebies")){f.registerLifeCycle(["resultsAbove","resultsBelow"],{"afterRender":function(l){for(var j=0,m;m=l[j++];){var n=m.retailHotelInfoModel;var k=g("#hotel"+m.hotelIndex);if(n&&(n.freeWifi||n.freeBreakfast||n.freeParking)){k.find(".phoneEsr").before('<li class="amenities"></li>');if(n.freeInternet){k.find(".amenities").append('<span class="freewifi amenity"><span class="icon icon-success"></span>'+n.freeInternet+"</span>");}if(n.freeBreakfast){k.find(".amenities").append('<span class="freebreakfast amenity"><span class="icon icon-success"></span>'+n.freeBreakfast+"</span>");}if(n.freeParking){k.find(".amenities").append('<span class="freeparking amenity"><span class="icon icon-success"></span>'+n.freeParking+"</span>");}}}}});}});require(["jQuery","View","presenter","utils","uitk"],function(h,j,g,e,f){if(e.isExperiment("HotelHSRThumbnailCarousel")){var k=e.getVariantByName("HotelHSRThumbnailCarousel");Modernizr.addTest("bgsizecover",Modernizr.testAllProps("backgroundSize","cover"));if(!pageModel.metaData||pageModel.metaData.isTablet||!Modernizr.generatedcontent||!Modernizr.bgsizecover){g.registerLifeCycle(["pageTitle"],{"afterRender":function(l){h("#experiments").removeClass("thumbnailcarousel").removeClass("thumbnailcarousel-"+k);}});return;}e.exposeExperimentByName("HotelHSRThumbnailCarousel");if(k==0){return;}g.registerLifeCycle(["resultsBelow"],{"afterRender":function(l){h(".hotel:not(.no-image) .thumbnail").before('<div class="left"></div>');}});h("body").on("click",".hotel:not(.no-image) .thumbnail, .hotel .vipBadge",function(l){i(h(l.target).closest(".hotel"),1);return false;});h("body").on("click",".hotel:not(.no-image) .thumbnailContainer > .left",function(l){i(h(l.target).closest(".hotel"),(-1));return false;});}function i(m,o){var n=m.find(".thumbnail"),p=n.data("galleryIndices"),l=n.data("currentIndex");if(p!=undefined){if(o<1){o=p.length-1;}l=(l+o)%p.length;n.data("currentIndex",l);n.css("filter","none").css("background-image",n.css("background-image").replace(/_\d+_l/,"_"+p[l]+"_l"));}else{d(m,o);}}function d(l,m){currentXHR=h.ajax({url:"/api/hotels/galleryIndices?id="+l.data("hotelid"),dataType:"json",success:function(n){l.find(".thumbnail").data("galleryIndices",n).data("currentIndex",0);i(l,m);}});}});require(["jQuery","View","presenter","utils","uitk"],function(g,h,f,d,e){if(d.isExperiment("HotelHSRFreeCancellationDate1")&&d.getVariantByName("HotelHSRFreeCancellationDate1")>0){f.registerLifeCycle(["resultsAbove","resultsBelow"],{"afterRender":function(m){for(var k=0,n;n=m[k++];){if(!n.isFreeCancel||!n.freeCancelDate){continue;}var l=g("#hotel"+n.hotelIndex);var j=new Date(n.freeCancelDate);l.find(".phoneEsr > .freeCancel").append(" before "+d.convertIntToDay(j.getDay())+", "+d.convertIntToMonth(j.getMonth())+" "+j.getDate());}}});}});require(["jQuery","View","presenter","utils","uitk"],function(g,h,f,d,e){if(d.isExperiment("HotelHSRSuperlativeWithReview")&&d.getVariantByName("HotelHSRSuperlativeWithReview")>0){var i=d.getVariantByName("HotelHSRSuperlativeWithReview");f.registerLifeCycle(["resultsAbove","resultsBelow"],{"afterRender":function(m){for(var k=0,p;p=m[k++];){var l=g("#hotel"+p.hotelIndex);var o=l.find(".superlative");if(o.length==0){continue;}var n=l.find(".guestRatingText");var j=n.find("strong");
if(i==1){n.prepend('<span class="superlative">'+o.remove().text()+" </span>");}else{if(i==2){n.append('<span class="superlative"> '+o.remove().text()+"</span>");}else{if(i==3){n.insertAfter(o);}else{if(i==4){n.insertAfter(o);j.text(" "+j.text().replace(/ out of /,"/")).appendTo(o);}else{if(i==5){n.insertAfter(o);j.text(" "+Math.round(p.retailHotelInfoModel.reviewPercentage)+"%").appendTo(o);}}}}}}}});}});require(["jQuery","View","presenter","utils","uitk"],function(g,h,f,d,e){if(d.isExperiment("HotelMemberFencing")){var j=d.getVariantByName("HotelMemberFencing");f.registerLifeCycle(["resultsBelow"],{"afterRender":function(){g("#couponBanner").remove();var k=false;for(var l=0,m;m=d.getHotels()[l++];){if(m.isShowTopDrr==false&&m.retailHotelPricingModel&&m.retailHotelPricingModel.isEtp==false&&m.retailHotelInfoModel.showExpediaRateText==true){k=true;g("#hotel"+m.hotelIndex).addClass("memberFencingEligible");m.memberFencedEligible=true;}}if(!pageModel.metaData.isDateless&&pageModel.traveler.isLoggedIn&&pageModel.traveler.isRewardsMember&&pageModel.airAttach.hotmipExpiration==0&&k&&pageModel.coupon!=false&&pageModel.coupon.couponCode&&pageModel.coupon.legalLink){i();}else{g("#experiments").removeClass("memberFencing").removeClass("memberFencing-"+j);}}});var i=function(){d.exposeExperimentByName("HotelMemberFencing");if(j==0){return;}g(".hotel.memberFencingEligible .priceType").after('<li class="memberFencingTag"><strong>Exclusive member-only deal:</strong> 10% off this hotel</li>');g("#mainContent").prepend('<div id="couponBanner" class="bannerGreen alert"><div class="hide"></div><div class="message cols-row"><span class="top">Welcome, '+pageModel.traveler.firstName+'. Save 10% off select hotels, simply because you are a member.</span><span class="bot">Enter '+pageModel.coupon.couponCode+' at checkout. <a href="'+pageModel.coupon.legalLink+'" class="details" target="_blank">See details</a></span></div></div>');};}});define("HACallToAction",["jQuery","utils","uitk","dctk"],function(h,e,f,d){var g={"isValidTest":function(i){if(!e.isExperiment({"name":"HotelHACallToActions","id":"4712","variant":1})){return false;}if(i.length==0){return false;}return true;},"getPropertyCount":function(k){var i=[],j;i[6057951]=81;i[6063080]=36;i[1488]=206;i[8111]=202;i[183118]=56;i[180071]=289;i[6023392]=241;i[55180]=133;i[601684]=518;i[11926]=193;i[6301]=314;i[800066]=263;i[6094967]=59;i[6637]=277;i[6047864]=319;i[601685]=326;i[183947]=33;i[6062954]=72;i[7927]=162;i[800015]=107;i[178234]=95;i[1372]=149;i[180676]=47;i[8812]=180;i[601691]=286;i[6125113]=144;i[6023330]=116;i[603078]=125;i[6063081]=24;i[602724]=13;i[6023392]=154;i[10770]=125;i[7739]=99;i[602524]=141;i[1509]=108;i[1187]=170;i[6054113]=103;i[178304]=77;i[180028]=117;i[6076]=36;i[603259]=88;i[602290]=84;i[183773]=11;i[129660]=86;i[180041]=88;i[180057]=99;i[6056754]=89;i[9791]=27;i[9154]=57;i[113987]=81;i[6063067]=85;i[180658]=80;i[6055768]=119;i[8218]=78;i[6057422]=87;i[602986]=75;i[757]=19;i[8499]=96;i[800043]=61;i[178307]=33;i[6057969]=67;i[73946]=74;i[183857]=65;i[183158]=34;i[6063045]=65;i[180058]=68;i[6057337]=57;i[6057340]=57;i[6057693]=44;i[1341]=166;i[183109]=52;i[601691]=44;i[500784]=36;i[178310]=48;i[6058734]=48;i[184156]=52;i[6056753]=46;i[176898]=44;i[6280162]=48;i[8213]=54;i[6034190]=19;i[6054519]=34;i[6084420]=26;i[6057964]=83;i[6023313]=29;i[6055700]=29;i[183024]=19;i[500728]=31;i[10871]=28;i[6056036]=39;i[7846]=14;i[6004902]=7;i[6059575]=39;i[180391]=39;i[6056752]=37;i[6054543]=36;j=i[k];if(j){return j;}else{return 0;}},"addCallToAction":function(i){var k="",j;if(window.pageModel&&window.pageModel.request&&window.pageModel.request.regionId){k=window.pageModel.request.regionId;}if(!k||k===""){if(window.pageModel&&window.pageModel.wizard&&window.pageModel.wizard.regionId){k=window.pageModel.wizard.regionId;}}if(!k||k===""){return;}j=this.getPropertyCount(k);if(j===0){return;}h.each(i,function(){var r=h(this),o=r.find(".priceCol .viewHomeAwayLink"),t=r.find(".target"),m=t.attr("href"),l=m,s=r.find(".infoCol .city").text(),n=h('<div class="hawrapper"></div>'),q=h('<hr class="haspacer" />'),p=h('<div class="hapinlink"></div>');o.contents().remove();o.append("Check availability<br/>for this property on");l=l.replace(/UnitRedirect/,"PropertyDetails");l=l.replace(/specifiedUnit/,"unit");l=l.replace(/interstitial=exp1/,"");t.attr("href",l);p.append("Explore "+j+" vacation rentals in "+s+' on HomeAway <span class="icon icon-toggle90"></span>');n.append(q);t.append(n);m=m.replace(/interstitial=exp1/,"");p.data("href",m);p.insertAfter(t);t.attr("data-track","HOT:SR:HAPropertyDetails");r.find(".hapinlink").bind(f.clickEvent,function(v){var u=h(this);d.trackAction("HOT:SR:HAPinned",this);window.open(u.data("href"));v.preventDefault();v.stopPropagation();});});},"run":function(){var i=h(".hotel.vacationRental");if(!this.isValidTest(i)){return;}else{h("#resultsContainer").addClass("SS5670");this.addCallToAction(i);}}};return g;});require(["HACallToAction","lifeCycleManager"],function(d,e){e.register("resultsAbove",{"afterPopulateContainer":function(){d.run();}});});define("conDrrMvtSavings",["jQuery","utils","dctk"],function(g,e,d){var f={"content":"Sale!","savings":"yes","testName":"content","variant":0,"experiment":"HotelHSRDRRConsolidation","setVariantData":function(h){if(h==1){this.content="Sale!";this.savings="no";this.testName="content";}else{if(h==2){this.content="Sale!";this.savings="yes";this.testName="savings";}else{if(h==3){this.content="Special discount";this.savings="no";this.testName="content";}else{if(h==4){this.content="Special discount";this.savings="yes";this.testName="savings";}}}}},"isValidTest":function(h){if(h.length==0){return false;}if(g(".hotel.airAttach").length>0){return false;}this.variant=e.getVariantByNameAndExpose(this.experiment);if(!this.variant){return false;}this.setVariantData(this.variant);return true;},"applyTest":function(j){var h=this,i=this.setContent;if(h.testName==="savings"){i=this.setSavings;}g.each(j,function(){var m=g(this),l=m.closest(".hotel"),k=l.data("hotelid");i(m,l,k,h);});},"setTooltip":function(n,m,k,j){var i=n.find(".AB5180BadgeWrapper"),l=g('<div class="AB5180TooltipLink" data-content-id="conDrr'+k+'" data-trigger="hover" data-control="tooltip" data-arrow="true" aria-describedby="conDrr'+k+'"></div>'),h=g('<div id="conDrr'+k+'" role="tooltip" class="visuallyhidden"></div>');h.html("<span class='AB5180TooltipContent'>"+j+"</span>");n.append(l);n.append(h);l.append(i);l.append(n.find(".saveMsg"));},"setContent":function(n,k,j,l){var i=n.contents(":not(span)").text(),h=n.find(".badge"),m=g('<span class="AB5180BadgeWrapper"></span>');n.contents(":not(span)").remove();if(!k.hasClass("ringFenced")){h.text(l.content);}h.addClass("AB5180badge");if(n.find(".AB5180BadgeWrapper").length===0){n.prepend(m);m.append(h);}l.setTooltip(n,k,j,i);},"setSavings":function(p,j,m,k){var q=p.find(".badge"),l=p.find(".AB5180BadgeWrapper"),r=e.findHotelById(m),n,o,i,h;if(k.savings!=="yes"){return;}o=parseInt((r.retailHotelPricingModel.priceFormatted).replace(/,/g,""));n=parseInt((r.retailHotelPricingModel.priceWithoutDrrFormatted).replace(/,/g,""));if(n*1===0){i=0;}else{i=100*((n*1-o*1)/(n*1));}if(i>=5){h=g('<span class="saveMsg">Save $'+(n-o)+"</span>");}else{h=g("<span></span>");}if(l.length===0){l=g('<span class="AB5180BadgeWrapper"></span>');p.prepend(l);l.append(q);}l.append(h);k.setContent(p,j,m,k);},"run":function(){var h=g(".priceCol .drrMsg");if(!this.isValidTest(h)){return;}else{d.trackAction("HSR:HasDRRMessages",this);g("#resultsContainer").addClass("AB5180");this.applyTest(h);}}};return f;});require(["jQuery","View","presenter","utils"],function(f,g,e,d){if(d.isExperiment("HotelHSRTopHotelBadge")){var h=d.getVariantByName("HotelHSRTopHotelBadge");e.registerLifeCycle(["resultsAbove","resultsBelow"],{"afterRender":function(m){var l=[5558306,4215,15937,714,85020,2225,41308,1740977,15407,18816,1312447,878332,19768,9,804984,5589,28272,18691,12539,897598,24022,281536,6452,40512,9882,2650267,24715,1716953,15727,41394,21013,24891,104193,4582,2928902,11141,6313,1734,491,14917,118554,23415,8079,25292,150997,23113,15237,801796,28110,15431,18037,10705,41864,26529,16604,2774,22135,7341280,22510,1833,171890,22046,21619,22666,15690,903289,15930,888830,12287,12652,900,19716,6260,11040,3916,9531,24159,1871645,25622,23764,660264,16079,864219,25341,3128845,5404,12628,3113039,6845,81223,24304,84945,7498,20965,3832,5903,25551,19220,12493,25953];
var o=false;for(var j=0,n;n=m[j++];){if(f.inArray(parseInt(n.hotelId),l)==-1){continue;}var k=f("#hotel"+n.hotelIndex);k.addClass("topHotel");k.children("a").attr("data-track","HOT:SR:TopHotelModule");if(h==1){k.find(".thumbnailContainer").append('<div class="top_hotel_ribbon">Top Hotel</div>');}else{if(h==2){k.find(".starRating").append('<div class="top_hotel_ribbon">Top Hotel</div>');if(k.hasClass("pinnedHotel")){f(".pinnedStarRating").append('<div class="top_hotel_ribbon">Top Hotel</div>');}}}o=true;}if(o){d.exposeExperimentByName("HotelHSRTopHotelBadge");}}});}});require(["jQuery","View","presenter","utils"],function(f,g,e,d){});define("floatingPinned",["templates"],function(d){var e={prevent:false,getStatic:function(){return $(".pinnedHotel").closest(".hotelWrapper").first();},getFixed:function(){return $(".fixedPinned");},cleanUp:function(){this.getFixed().remove();},setup:function(){this.cleanUp();var f=this.getStatic();this.copyPinned(f);},doFloat:function(){if(!this.prevent){var g=$(window).scrollTop(),h=this.getStatic(),i=h.offset(),f=this.getFixed();if(g>=i.top){this.transitionShowPinned(h,f);}else{this.transitionHidePinned(h,f);}}},doHide:function(){this.prevent=true;this.transitionHidePinned(this.getStatic(),this.getFixed());},doOffCanvas:function(g){var f=this.getFixed();if(g==="open"){f.addClass("offCanvas");}else{f.removeClass("offCanvas");}},transitionShowPinned:function(g,f){this.transition("addClass",g,f);},transitionHidePinned:function(g,f){this.transition("removeClass",g,f);},transition:function(h,g,f){f[h]("fixed");g[h]("visuallyHidden");},copyPinned:function(i){var g=i.clone(),h=this.getCloseBtnHtml(),f=$(d.render("fixedPinnedWrapper",{}));g.find(".drrLink.pinnedHotel ").before(h);g.find(".pinnedHotel").addClass("fixedPinnedHotel");f.append(g);i.after(f);},getCloseBtnHtml:function(){return d.render("fixedPinnedClose",{});}};return e;});require(["jQuery","uitk","floatingPinned","lifeCycleManager","utils"],function(g,e,f,h,d){if(d.getVariantByName("HotelHSRFloatingPinned")>0){h.register(["resultsAbove"],{"afterRender":function(){f.setup();g(window).scroll(function(){f.doFloat();});}});g("body").on(e.clickEvent,".fixedPinnedClose",function(i){i.stopPropagation();i.preventDefault();f.doHide();});e.subscribe("off-canvas.stateChanged",function(i,j){f.doOffCanvas(j);});}});require(["jQuery","lifeCycleManager","templates","Handlebars","utils"],function(h,g,k,d,l){function f(){d.templates["aColFilter"]=d.templates["horizontalFilter"];d.templates["googleMap"]=d.templates["googleMapLarge"];}function j(){var m=h("#ratingContainer").detach().appendTo("#horizontalFilterContainer"),n=h(k.render("horizontalFilterFilterBy",{}));h(".filterHotelsBy").remove();h("#horizontalFilterContainer").append(n).append(m);}function i(){h("#acol #googleMapContainer").detach().insertBefore("#matrixContainer");}function e(){h("#acol").remove();h("body").removeClass("l-results");h(".sort-bar-column button.off-canvas-btn").removeAttr("data-control").removeAttr("data-target");}g.register(["hotelName"],{beforeRender:function(){var m=l.getVariantByName("HotelHSRHorizontalFilters");if(m===1){f();j();i();e();}}});g.register(["googleMap"],{beforeRender:function(){var m=l.getVariantByName("HotelHSRHorizontalFilters");if(m===1){f();i();}}});});require(["jQuery","lifeCycleManager","utils"],function(h,g,d){if(d.isExperiment("HotelHSRRingFenceDeals")){var i=d.getVariantByName("HotelHSRRingFenceDeals");g.register(["resultsAbove"],{"afterRender":function(j){if(e()==0){return;}f(j);}});g.register(["resultsBelow"],{"afterRender":function(j){if(e()==0){return;}f(j);var k=h(".ringFenced.hotel");if(k.length>0){k.first().parent().before('<h3 class="ring_fenced_delimiter">Your exclusive deals in '+pageModel.pageTitle.destination+"</h2>");k.last().parent().after('<h3 class="ring_fenced_delimiter">We found similar hotels in '+pageModel.pageTitle.destination+"</h2>");}else{h(".hotel").first().parent().before('<h4 class="ring_fenced_apology">Your dates do not have exclusive deals in '+pageModel.pageTitle.destination+". We found these great deals for your dates</h3>");}}});var e=function(){if(i==0||pageModel.sort.selectedSortOrder!=27||pageModel.metaData.isDateless||pageModel.pagination.pageNumber!=1||h("#filterOrientation ul:not(#orientationNeighborhoodContainer) span").length>0||pageModel.airAttach.hotmipExpiration!=0){return 0;}else{return 1;}};var f=function(l){for(var j=0,m;m=l[j++];){if(!m.retailHotelPricingModel||!m.retailHotelPricingModel.percentageSavings||m.retailHotelPricingModel.percentageSavings<45||m.isSponsoredListing||!m.isShowTopDrr){continue;}var k=h("#hotel"+m.hotelIndex);k.addClass("ringFenced");k.children("a").attr("data-track","HOT:SR:RingFencedHotelModule");if(i==2){k.find(".drrMsg .badge").text("Exclusive deal");}}};}});define("resultsBelowView",["jQuery","ResultsView"],function(e,d){return new d({"name":"resultsBelow","modelName":"resultsBelow","container":"#resultsContainer","populateContainer":function(f){e(this.container).append(f);},"afterPageRender":function(){require(["adaptOpaque","adaptHotwire"],function(f,g){f.reset();g.reset();});},"tracking":function(){require(["opaqueDealsCtrl","hotwireDealsCtrl"],function(f,g){if(window.pageModel&&window.pageModel.experiments&&window.pageModel.experiments.HotelSRHotwireVSOpaque==="3412.1"){g.updateHotwire();}else{f.updateOpaque();}});}});});require(["resultsBelowView","presenter"],function(d,e){e.registerView(d);});require(["jQuery","presenter"],function(f,e){var d=new e.View({"name":"pagination","modelName":"pagination","container":"#paginationContainer","templateName":"pagination","adaptModel":function(h){var g=50;if(isNaN(h.pageIndex)){return{"show":false};}if(h.pageNumber&&h.pageNumber>0){if(h.pageNumber==1){g=h.pageUpperCount/h.pageNumber;}else{if(h.pageIndex){g=h.pageIndex/(h.pageNumber-1);}}}h.countPerPage=g;h.show=true;h.firstResult=(h.pageNumber-1)*g+1;return h;},"afterPopulateContainer":function(){require("uitk",function(){f("#paginationContainer .pagination").uitk_pagination();});}});e.registerView(d);});require(["jQuery","presenter","config"],function(g,f,d){var e;e=new f.View({"name":"disclaimer","modelName":"disclaimer","templateName":"disclaimer","container":"#disclaimerContainer","adaptModel":function(h){h.isStandardAndMandatoryFees=d.pdoFeatureEnabled&&(d.siteId!="8");h.isStarRatingDisclaimer=(d.siteId=="7")||(d.siteId=="20");h.isSiteId6=(d.siteId=="6");h.isTotalrate=(d.siteId=="11"||d.siteId=="3");h.isStrikeDisclaimer=(d.siteId=="25");return h;}});f.registerView(e);});require(["jQuery","View","presenter"],function(h,i,g){var e=false,d=false,f=new i({"name":"ads","modelName":"ads","renderTemplate":function(){return"";},"populateContainer":function(j){},"tracking":function(){if(window.pageModel&&window.pageModel["ads"]){var m=window.pageModel["ads"],l=m["adSenseModel"],t=m["adTargetingModel"];if(!e){var r={dataType:"script",cache:true,url:m.minifiedAdsUrl},u={dataType:"script",cache:true,url:m.minifiedAdSenseUrl};h.when(h.ajax(r),h.ajax(u)).done(function(){e=true;});}e=true;require(["expads","expAdsCsa","utils"],function(z,A,x){function y(){var C=A.get_csa_dcol_adblock("adsense_dcol_container","3","140px");var G=A.get_csa_footer_adblock("large-adsense-footer-content-section1","2","239px");var E=A.get_csa_footer_adblock("large-adsense-footer-content-section2","2","239px");var D=A.get_csa_footer_adblock("large-adsense-footer-content-section3","2","239px");var F=[];F.push(C,G,E,D);A.call(F);}function B(G){var F=A.get_csa_footer_adblock("medium-adsense-footer-content-section1","2","218px");var D=A.get_csa_footer_adblock("medium-adsense-footer-content-section2","2","218px");var C=A.get_csa_footer_adblock("medium-adsense-footer-content-section3","2","218px");var E=[];E.push(F,D,C);A.call(E);}function w(F){var E=A.get_csa_footer_adblock("small-adsense-footer-content-section1","2","275px");var D=A.get_csa_footer_adblock("small-adsense-footer-content-section2","2","275px");var C=[];C.push(E,D);A.call(C);}var v=x.getVariantByName("HotelSRAirAttachHideAdBanner");
if(v===1){h("#headerAdsContainer").empty();}if(window.pageModel.metaData&&window.pageModel.metaData.isAdsEnabled){if(!d){A.setChannel(l.channel);A.setClient(l.client);A.setTest(l.test);A.setLang(l.lang);A.setHeader(l.header);A.setProduct("hotels");A.setQuery(l.query);A.setEncoding("utf8");z.registerAdSenseContainer("large-adsense-footer",y);z.registerAdSenseContainer("medium-adsense-footer",function(C){B(C);});z.registerAdSenseContainer("small-adsense-footer",function(C){w(C);});require("uitk",function(C){C.mediaquery.register("only screen and (max-width: 48.499999em)","ads_hotel_footer_small");C.mediaquery.register("only screen and (min-width: 48.5em) and (max-width: 49.2499999em)","ads_hotel_footer_large");C.mediaquery.register("only screen and (min-width: 49.25em) and (max-width: 79.999999em)","ads_hotel_header");C.mediaquery.register("only screen and (min-width: 78.75em)","ads_hotel_ccol");C.mediaquery.register("only screen and (min-width: 788px) and (max-width: 1259px)","medium-banner-ad");});z.initialize(t);d=true;}else{z.refresh(t);}}});if(window.pageModel.wizard){var k=document.getElementById("hookLogicPageViewPixel");if(k){var j=k.getAttribute("base-url"),p=window.pageModel.wizard,q=window.pageModel.resultsAbove,s=window.pageModel.resultsBelow;if(typeof p.regionId!=="undefined"){j+="&destRegionId="+p.regionId;}if(typeof p.roomList!=="undefined"&&h.isArray(p.roomList)){j+="&rooms="+p.roomList.length;}if(typeof p.totalAdults!=="undefined"){j+="&adults="+p.totalAdults;}if(typeof p.totalChildren!=="undefined"){j+="&children="+p.totalChildren;}if(typeof p.checkInTeaLeaf!=="undefined"){j+="&checkIn="+p.checkInTeaLeaf;}if(typeof p.checkOutTeaLeaf!=="undefined"){j+="&checkOut="+p.checkOutTeaLeaf;}if(typeof navigator!=="undefined"&&typeof navigator.userAgent!=="undefined"){j+="&userAgent="+encodeURIComponent(navigator.userAgent);}if(typeof q!=="undefined"&&h.isArray(q)){var o=[];for(var n=0;n<q.length;n++){if(typeof q[n]!=="undefined"&&typeof q[n].hotelId!=="undefined"){o.push(q[n].hotelId);}}if(typeof s!=="undefined"&&h.isArray(s)){for(var n=0;n<s.length;n++){if(typeof s[n]!=="undefined"&&typeof s[n].hotelId!=="undefined"){o.push(s[n].hotelId);}}}if(o.length>0){j+="&hotelIds="+o.join(",");}}k.src=j;}}}}});g.registerView(f);});require(["jQuery","presenter","templates"],function(g,f,d){var h=3,e=new f.View({"name":"bookingVelocity","modelName":"bookingVelocity","populateContainer":function(){},"renderTemplate":function(){},"selectUniqueHotels":function(l,k){var n;if(k){for(var m=0,j=k.length;m<j;m++){n=k[m];if(!l[n.hotelId]&&n.retailHotelInfoModel&&n.retailHotelInfoModel.isDisplayUrgency&&n.retailHotelInfoModel.numberOfRoomsLeftForUrgencyMsg){l.push(n.hotelId);}}}},"getBooked":function(l){var k,n=[];if(l){for(var m=0,j=l.length;m<j;m++){k=l[m];if(k.bookingCount>=h){n.push(k);}}}return n;},"sortActivityListDesc":function(i){i.sort(function(k,j){return j.bookingCount-k.bookingCount;});},"getMaxBookingCount":function(m){var k,l=-1;if(m){for(var n=0,j=m.length;n<j;n++){k=m[n];if(k.bookingCount>l){l=k.bookingCount;}}}return l;},"updateListings":function(n){var k,l=this.getMaxBookingCount(n);if(n){for(var m=0,j=n.length;m<j;m++){k=n[m];k.mostPopular=(k.bookingCount==l);g(".bookingVelocity_"+k.productId).html(d.render("bookingVelocity",k));}}},"afterPageRender":function(){try{if(window.pageModel&&window.pageModel.metaData&&!window.pageModel.metaData.isDateless){var i=[];this.selectUniqueHotels(i,window.pageModel.resultsAbove);this.selectUniqueHotels(i,window.pageModel.resultsBelow);if(i.length){g.ajax({url:"/api/urgency/productActivity?hotelIds="+i.join(","),dataType:"json",context:this,success:function(k){if(k&&k.hotelProductActivityList){this.sortActivityListDesc(k.hotelProductActivityList);this.updateListings(this.getBooked(k.hotelProductActivityList));}}});}}}catch(j){require("logger",function(k){k.logError("afterPageRender",j,{"viewName":"bookingVelocity"});});}}});f.registerView(e);});define("lastBookedView",["jQuery","View","templates","utils","uitk"],function(g,d,j,k,f){var l=1000,e=l*60,i=e*60;var h=i*24;return new d({"name":"lastBooked","modelName":"lastBooked","populateContainer":function(){},"renderTemplate":function(){},"afterPageRender":function(){if(window.pageModel&&window.pageModel.metaData&&!window.pageModel.metaData.isDateless){var m=this,n={"hotelIds":this.getHotelIds()};g.ajax("/LastBooking/elapsedTime",{"data":n,"success":function(o){m.parseLastBookedData(o);f.publish("hsrBookingTimeFinished",{});}});}},"getHotelIds":function(){var m=k.getUniqueHotelIds(),n=m.join(",");return n;},"getTemplateData":function(n){var m={};if(n>=i){m.lastBookedHours=Math.ceil(n/i);}else{m.lastBookedMinutes=Math.ceil(n/e);}return m;},"getHtml":function(n){var m=j.render("lastBooked",n);return m;},"getElem":function(o){var m="[data-hotelid="+o+"] .infoCol, [data-family-hotelid="+o+"] .lastBookedContainer",n=g(m);return n;},"writeHtml":function(m,n){m.append(n);},"parseLastBookedData":function(p){if(!p){return;}var r=false;for(var q=0;q<p.length;q++){var t=p[q],u=t.hotelId,m=t.elapsedTimeMillisec,o,s,n;if(m>h){continue;}r=true;n=this.getElem(u);if(n.find(".lastBooked").length>0){break;}o=this.getTemplateData(m);s=this.getHtml(o);this.writeHtml(n,s);}if(r){k.exposeExperimentByName("HotelHSRLastBookingFollowup");}}});});require(["presenter","lastBookedView"],function(d,e){d.registerView(e);});require(["jQuery","presenter","templates","utils"],function(h,g,e,d){var f=new g.View({"name":"doubleClick","modelName":"doubleClick","templateName":"doubleClick","populateContainer":function(){},"tracking":function(){if(window.pageModel.doubleClick&&window.pageModel.doubleClick.dcQueryString){var i=this,j=window.pageModel.doubleClick.dcQueryString;h("#dcOPMContainer,#dcMSContainer").each(function(m,o){var k=h(o),p=k.data("url"),l=p+j,n=e.render(i.templateName,l);k.html(n);});}}});g.registerView(f);});define("regionUrgencyMessage",["jQuery","presenter","templates","utils"],function(h,g,f,d){var e={config:{fadeInDuration:625,displayDuration:10000,fadeOutDuration:625},container:"#regionUrgencyMessageContainer",dataType:"json",success:function(j){var i=j.hotelProductActivityAtRegionLevelList[0];i.templateName="regionUrgencyMessage";this.updateModelForUrgencyTest(i);if(i&&(i.viewCount>=3||i.isBooking)){i.destination=window.pageModel.pageTitle.destination.split(/[,\(]/)[0];h(e.container).html(f.render(i.templateName,i)).removeClass("hidden").animate({"opacity":0.9},e.config.fadeInDuration).delay(e.config.displayDuration).animate({"opacity":0},e.config.fadeOutDuration,function(){h(this).addClass("hidden");});}},afterPageRender:function(){try{var j=window.pageModel.wizard;if(j&&j.regionId&&e.regionId!==j.regionId){e.regionId=j.regionId;if(!isNaN(e.regionId)){e.url="/api/urgency/regionActivity/"+e.regionId;h.ajax(e);}}}catch(i){require("logger",function(k){k.logError("afterPageRender",i,{"viewName":"regionUrgencyMessage"});});}},updateModelForUrgencyTest:function(k){var j=d.getVariantByName("HotelSRUrgencyInVegas");if(j===1&&!this.isBlacklisted(k.regionId)){if(k.bookingCount>=3){k.templateName="regionUrgencyMessage_Booking";k.isBooking=true;}}else{if(j===2){var i=Math.ceil((k.bookingCount/(24*60))*5);k.bookingCount=i;if(k.bookingCount>=3){k.templateName="regionUrgencyMessage_Booking5";k.isBooking=true;}}}},"isBlacklisted":function(j){var i=[178276,6130516,800046,800047,6054168,6054169,6054170,6130518,6054171,800045,6085271,6000345];return h.inArray(j,i)>=0;}};return e;});require(["presenter","regionUrgencyMessage"],function(e,d){e.registerLifeCycle("wizard",d);});require(["jQuery","presenter","utils","uitk"],function(j,i,e,f){var d=f.clickEvent;function g(l,k,n,m){return{"id":"poi"+l,"label":k,"value":n,"selected":m,"inputType":"radio","inputName":"poiLatLong","visible":true,"rfrr":"HOT:SR:POI","orientationLabel":k,"orientationHidden":false,"orientation":"","orientationTrack":"HOT:SR:FO:POI"};}var h=new i.View({"name":"poi","modelName":"poi","templateName":"aColFilter","container":"#poiFilterContainer","secondaryTemplateName":"listFilterOrientation","secondaryContainer":"#orientationPoiContainer","adaptModel":function(r){var l=e.getUrlParam("poiLatLong"),m,p="",q,n;
var k="HotelSRPOIFilter";if(!e.isExperiment({"name":k,"id":"4157","variant":1})){if(l){e.setUrlParam("poiLatLong","");location.hash=location.hash.replace("&poiLatLong=","");}return;}if(typeof l==="string"&&l.indexOf("%2C")!==-1){m=l.split("%2C");}else{if(j.isArray(l)){m=l;}}if(m&&m.length===2){p=m[0]+","+m[1];}if(r&&r.poiOptions){r.exists=true;r.hasHidden=false;r.sectionId="poiFilter";if(r.poiOptions.length===0){r.title="";if(l){e.setUrlParam("poiLatLong","");location.hash=location.hash.replace("&poiLatLong=","");}}else{r.title="Points of Interest";}r.options=[];for(var o=0;o<r.poiOptions.length;o++){q=r.poiOptions[o].latLong.latitude+","+r.poiOptions[o].latLong.longitude;n=p===(r.poiOptions[o].latLong.latitude+","+r.poiOptions[o].latLong.longitude);r.options[o]=g(o,r.poiOptions[o].name,q,n);}return r;}}});i.registerView(h);j("body").on(d,"#poiFilterContainer input",function(){var k=j(this);if(k.attr("checked")){j("#neighborhoodContainer").hide();}});j("body").on(d,"#orientationPoiContainer .text-label",function(){var k=j(this),l=e.getUrlParam("poiLatLong");if(l){e.setUrlParam("poiLatLong","");location.hash=location.hash.replace("&poiLatLong=","");}j("#neighborhoodContainer").show();});});require(["jQuery","View","presenter","utils"],function(h,i,g,d){var f="HotelSRTopFamilyHotels";var e=new i({name:"familyHotels",modelName:"familyHotels",container:"#familyHotelsContainer",templateName:"familyHotels",adaptModel:function(m){var n=d.getVariantByName(f),k=d.getHotels(),j=this.getMatchingHotels(m,k),l=this.getTitleText(n),o={};if(n>0&&this.getTotalChildren()>0){o.hotels=j;o.title=l;}if(j.length>0&&this.getTotalChildren()>0){d.exposeExperimentByName(f);}return o;},afterPopulateContainer:function(){var j=h(".topHotel .thumbnail");d.populateThumbnails(j);},getMatchingHotels:function(q,k){var l=[],j=[];for(var n=0;n<k.length;n++){var p=k[n],o=!p.isOpaque&&!p.retailHotelPricingModel.isError,m=p.hotelId;if(o&&h.inArray(m,q)>-1){l.push(p);j.push(m);}}return l;},getTitleText:function(k){var j="";switch(k){case 1:j="Top Hotels for Families";break;case 2:j="Top Hotels Recommended for Families";break;case 3:j="Popular Hotels for Families";break;}return j;},getTotalChildren:function(){var j=0;if(window.pageModel&&window.pageModel.wizard){j=window.pageModel.wizard.totalChildren;}return j;}});g.registerView(e);g.registerLifeCycle(["resultsAbove","resultsBelow"],{"afterRender":function(){var j=["13771","11040","9","28457","20965","9503","1427781","1885","692655","11268","1453527","281608","4517659","602438","1543827","1384631","40865","18591","692650","602436","24715","41308","41081","1309521","15237","15930","41080","19558","921745","43312","2757","796761","25042","23163","27549","256","3858","1688356","84682","21968","19220","21355","40962","40953","27878","1871645","1734","18691","3888","21394","3832","2928902","228","106143","40265","3916","804984","9181","537781","16604","15407","20611","790158","15727","4753","16395","2964","27021","1180295","28110","104193","19768","17497","87","41864","23677","15838","6300652","25906","4164","1273382","11051","18140","22666","25292","5777","1471","26459","20823","23933","3124853","6643536","4436849","1217794","22918","1613977","792228","3257765","41233","1234369","570329","11076","12570","8079","11580","281523","15937","16212","6452","21619","41394","18816","1190549","81223","2238836","21839","15431","20925","538541","1145283","904785","982925","893738","4824065","969296","893547","37007","918978","916929","16182","2774","2736","2729","11141","21894","5589","16220","6996","14936","5874","7909","17457","1723192","12060","1117691","5158","218605","201246","23354","40316","476728","25622","1047","12539","24625","8737","426503","919198","915510","22500","1914","900047","871861","9173","10148","28023","16668","23332","1622046","26262","8385","428588","1159480","2203","1112","12689","4592689","13655","571397","1579645","14186","25596","1209124","537268","1742184","914263","26134","436250","1585328","3113039","24795","1411864","994215","17013","11749","17725","564660","14634","1507997","4096","1312447","6851","523782","1643","64078","338","24304","28360","455156","788765","79381","16349","554676","3568411","16673","22893","897598","1833","795921","5027392","1906487","22022","27496","559819","9472","12147","4488581","25265","533693","2392991","21812","28591","21880","9540","563","6928","12404","8281","23113","26622","2225","976144","20143","20116","1469196","23699","20005","67415","126967","6636","26781"];g.render({familyHotels:j});}});});define("compressionView",["View"],function(e){var d=new e({name:"compression",modelName:"compression",container:"#compressionContainer",templateName:"compression"});return d;});require(["presenter","compressionView"],function(e,d){e.registerView(d);});require(["presenter","lifeCycleManager","utils"],function(m,g,p){var r="HotelHSRCompressionData",e="HotelEnableDataCompression",o=false;function h(){var t=true;if(!window.pageModel||!window.pageModel.wizard||window.pageModel.wizard.isDatelessSearch){t=false;}if(o||p.isFilterSearch()||p.isPaginatedSearch()){t=false;}o=false;return t;}function f(v){v=Math.ceil(v);var t=v,u=t%5;if(u>=3){t=v+5-u;}else{if(u>0){t=v-u;}}return t;}var s=24*60*60*1000;function j(u,t){var w=t*s,v=u.getTime();return new Date(v+w);}function q(w,v){var u={startDate:(w.getMonth()+1)+"/"+w.getDate()+"/"+w.getFullYear(),endDate:(v.getMonth()+1)+"/"+v.getDate()+"/"+v.getFullYear(),daysInFuture:"",stayLength:""},t=p.replaceUrlParameters(u);return t;}function l(v){var t=new Date(window.pageModel.wizard.checkInYear,(window.pageModel.wizard.checkInMonth),window.pageModel.wizard.checkInDay),u=j(t,v);return u;}function d(u){var v=new Date(window.pageModel.wizard.checkOutYear,(window.pageModel.wizard.checkOutMonth),window.pageModel.wizard.checkOutDay),t=j(v,u);return t;}function i(w){var v=new Date(),x=l(w),t=d(w),u={};v.setHours(0,0,0);u.show=x>=v;u.checkInDay=x.getDate();u.checkInMonth=x.getMonth();u.checkOutDay=t.getDate();u.checkOutMonth=t.getMonth();u.link=q(x,t);u.isInPast=w<0;return u;}var n=7;function k(u){var v=Math.ceil(parseFloat(u.percentOccupied)),w={previousLink:i(-n),nextLink:i(n),percentOccupiedDisplay:v,percentOccupiedRounded:f(v)},t={};if(window.pageModel.pageTitle){w=$.extend(w,u,window.pageModel.pageTitle);t={compression:w};}return t;}g.register("sort",{"afterPageRender":function(){var x=p.getVariantByName(e),w=p.getVariantByName(r);if(x===1&&h()){var t=window.pageModel.wizard.checkInYear+"-"+(window.pageModel.wizard.checkInMonth+1)+"-"+window.pageModel.wizard.checkInDay,y=window.pageModel.wizard.checkOutYear+"-"+(window.pageModel.wizard.checkOutMonth+1)+"-"+window.pageModel.wizard.checkOutDay,v=p.getUniqueHotelIds().join(","),u="/api/ratesservice/getAvailabilityData/roomAggregated";if(typeof w!=="undefined"){$.ajax(u,{data:{startDate:t,endDate:y,hotels:v},headers:{"Accept":"application/json","Content-Type":"application/json"},success:function(z){if(z&&z.percentOccupied&&z.percentOccupied>=30){if(w&&w!=0){var A=k(z);m.render(A);}p.exposeExperimentByName(r);}else{$("#compressionContainer").empty();}}});}}else{$("#compressionContainer").empty();}}});require(["formController"],function(t){uitk.subscribe(t.updateHashEvent,function(v,u){if(u&&(u.origin==="submitHotelName"||u.origin==="submitFilter"||u.origin==="submitPagination")){o=true;}else{o=false;}});});});require(["lifeCycleManager","utils"],function(e,d){isDropDownFilters=function(){var f=d.getVariantByName("HotelSRSortbarDropDown"),g=d.getVariantByName("HotelHSRHorizontalFilters");return(f===1||g===1);};e.register("sort",{adaptModel:function(f){if(isDropDownFilters()){f.isDropDown=true;}return f;},afterPopulateContainer:function(){if(isDropDownFilters()){var g=$(".sort-bar-column.toggle button"),f=g.find(".btn-label");f.append(" Filter");g.removeClass("btn-utility btn-secondary").addClass("btn-sub-action btn-primary off-canvas-btn");}}});});define("intentMediaView",["View"],function(d){return new d({"name":"intentMediaView","modelName":"wizard","renderTemplate":function(){},"populateContainer":function(){},"tracking":function(){if(window.pageModel&&window.pageModel.intentMedia&&window.pageModel.intentMedia.useIntentMedia&&window.pageModel.intentMedia.properties){var e=window.pageModel.intentMedia.properties;
window.IntentMediaProperties={page_id:"page.Hotel-Search.responsive",travel_date_start:e.travelDateStart,travel_date_end:e.travelDateEnd,travelers:e.travelers,adults:e.adults,children:e.children,hotel_market_id:e.hotelMarketId,hotel_city:e.hotelCity,hotel_state:e.hotelState,hotel_country:e.hotelCountry,hotel_rooms:e.hotelRooms};this.getScript(window.pageModel.intentMedia.scriptUrl);}},"getScript":function(f){var e=document.createElement("script");e.src=f;document.getElementsByTagName("head")[0].appendChild(e);}});});require(["intentMediaView","presenter"],function(d,e){e.registerView(d);});define("RoomsLeftFollowMVT",["jQuery","utils"],function(f,d){var e={"experiment":"HotelHSRRoomLeftMVT","id":4852,"variant":0,"isValidTest":function(g){if(g.length==0){return false;}this.variant=d.getVariantByNameAndExpose(this.experiment);if(!this.variant){this.variant=0;}return true;},"modifyUrgency":function(g){var h=this;if(this.variant===1||this.variant===2){g.find(".below").hide();f.each(g,function(){var j=f(this),i;i=j.contents(":not(span)").text();i=i.replace(/Only/,"");i=i.replace(/ rooms/,"");i=i.replace(/ room/,"");i=i+" at";j.contents(":not(span)").remove();j.prepend(i);});}if(this.variant===2||this.variant===3){g.addClass("SS6240redtext");}},"run":function(){var g=f(".infoCol .urgency");if(!this.isValidTest(g)){return;}else{if(this.variant===0){return;}f("#resultsContainer").addClass("SS6240");this.modifyUrgency(g);}}};return e;});require(["RoomsLeftFollowMVT","lifeCycleManager"],function(e,d){d.register("resultsBelow",{"afterRender":function(){e.run();}});});define("etpprominence",["jQuery","utils"],function(f,d){var e={"variant":0,"experiment":"HotelHSRETPProminence","isValid":function(g){this.variant=d.getVariantByName(this.experiment);if(!this.variant||this.variant===0){return false;}if(g.length===0){return false;}return true;},"applyTest":function(g){var h=this;if(this.variant===0){return;}f.each(g,function(){var l=f(this),k=l.find(".etpfreeCancel"),j=k.contents(":not(span)").text(),i=l.find(".icon");k.contents(":not(span)").remove();k.append(" "+j);if(h.variant===1){k.addClass("SS5839bold SS5839textwrap");}else{if(h.variant===2){k.removeClass("etpfreeCancel");k.addClass("badge badge-notification SS5839greenbadge SS5839textwrap");i.addClass("SS5839ie8hide");}else{if(h.variant===3){k.removeClass("etpfreeCancel");k.addClass("badge badge-notification SS5839whitebadge SS5839textwrap");}}}});},"run":function(){var g=f("#resultsContainer .priceCol .etp");if(!this.isValid(g)){return;}f("#resultsContainer").addClass("SS5839");this.applyTest(g);}};return e;});require(["etpprominence","lifeCycleManager"],function(d,e){e.register("resultsBelow",{"afterRender":function(){d.run();}});});require(["jQuery","uitk","dctk","formController","presenter","utils"],function(k,h,l,g,n,o){var m="UA-35711341-1",j="expedia.com",r=true,f=true,e=("false"=="true"),d,i;var q={"trackPageView":function(){var s=(l.omtr)?l.omtr.pageName:"page.Hotel-Search";try{_gaq.push(["_setAccount",m]);_gaq.push(["_setDomainName","."+j]);_gaq.push(["_addIgnoredRef",j]);_gaq.push(["_setCustomVar",4,"LOB","Hotels",2]);if(d){_gaq.push(["_setCustomVar",3,"Hotel Search",d.searchString,3]);_gaq.push(["_setCustomVar",2,"Region",((d.regionId)?d.regionId:null),3]);_gaq.push(["_set","title",s+((d.isDatelessSearch)?".Undated":".Dated")]);}else{_gaq.push(["_set","title",s]);}if(e){_gaq.push(["_gat._anonymizeIp"]);}_gaq.push(["_trackPageview"]);if(d&&r){_gaq.push(["_set","title",s+((d.isDatelessSearch)?".Undated":".Dated")]);_gaq.push(["_trackEvent","Visitor Status","Dated","SR Page",,true]);r=false;}}catch(t){}}};if(j&&m){h.subscribe(g.beforeUpdateHashEvent,function(t,s){f=(d&&d.isDatelessSearch);});var p=new n.View({"name":"googleAnalyticsView","modelName":"wizard","renderTemplate":function(){},"populateContainer":function(){},"tracking":function(){if(!i){(function(){var u=document.createElement("script");u.type="text/javascript";u.async=true;u.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(u,t);})();i=true;define("ga",function(){return{};});}require("ga",function(){d=window.pageModel.wizard;r=false;if(f&&d&&!d.isDatelessSearch){r=true;}if(o.isNotTravelocity()){setTimeout(q.trackPageView,2000);}});}});n.registerView(p);}});define("userInteraction",["View"],function(d){return new d({"name":"userInteraction","modelName":"userInteraction","additionalEvar34":{},"populateContainer":function(){},"renderTemplate":function(){},"tracking":function(){var e=this;if(window.pageModel&&pageModel.userInteraction){require("dctk",function(f){try{setTimeout(function(){e.updateUserInteraction();f.initOmniture(pageModel.userInteraction);},3000);}catch(g){require("logger",function(h){h.logError("initOmniture Failed",g);});}});}},"addExperimentExposure":function(e,f){this.additionalEvar34[e]=f;},"additionalEvar34String":function(){var f="";for(var e in this.additionalEvar34){f+=this.additionalEvar34[e]+"|";}this.additionalEvar34={};return f;},"updateUserInteraction":function(){var e=window.pageModel.userInteraction,f=this.additionalEvar34String();if(!e.omnitureProperties){e.omnitureProperties={};}if(f){if(e.omnitureProperties.prop34){e.omnitureProperties.prop34+="|"+f;}else{e.omnitureProperties.prop34=f;}}}});});require(["presenter","userInteraction"],function(d,e){d.registerView(e);});}catch(a){require("logger",function(d){d.logError("allViewsError",a);});}return{};});define("drrTimer",["jQuery","templates"],function(e,m){var b=undefined,d=[],l=0,j=0,h=0,f=0,a=0,n=0;var c=24*60*60,k=60*60,o=60,g=1000;var i={"initBucketTimes":function(t,s,r,q,p,u){l=t;j=s;h=r;f=q;a=p;n=u;},"getBucket":function(p){if(p<l){return 0;}else{if(p>=l&&p<j){return 1;}else{if(p>=j&&p<h){return 1;}else{if(p>=h&&p<f){return 1;}else{if(p>=f&&p<a){return 2;}else{if(p>=a&&p<n){return 3;}}}}}}return -1;},"getMessage":function(t,v,x){var p=this.getBucket(t,v);var w=0,u=0,r=0,y=0;w=Math.floor(t/c);u=Math.floor(t/k);t%=k;r=Math.floor(t/o);t%=o;y=t;var q=m.render(x,{"hours":u,"minutes":r,"seconds":y,"totalDays":w,"endDate":v,"bucket":p});return q;},"writeMessage":function(p,q){p.html(q);},"register":function(p,u,t,s,q){var q=(q)?q:"drrMsg",r=this.getMessage(u,t,q);d.push({"selector":p,"secondsLeft":u,"endDate":t,"messageTemplateName":q,"expireEventName":s});if(!b){this.startTimer();}return r;},"startTimer":function(){b=window.setInterval(this.tick,g);},"reset":function(){if(b){window.clearInterval(b);}d=[];},"tick":function(){for(var p=0;p<d.length;p++){var q=d[p];i.decrementTimer(q);i.doTimerTick(q);i.doTimerExpire(d,q,p);}},"decrementTimer":function(p){if(p&&p.secondsLeft>=0){p.secondsLeft--;}},"doTimerTick":function(q){if(q&&q.secondsLeft>=0){var p=e(q.selector);if(!q.$elem&&p.length){q.$elem=p;}if(q.$elem){i.writeMessage(q.$elem,i.getMessage(q.secondsLeft,q.endDate,q.messageTemplateName));}}},"doTimerExpire":function(q,r,p){if(r&&r.secondsLeft<=0){if(r.expireEventName){require("uitk",function(s){s.publish("drrTimerExpired",r);});}q.splice(p,1);}}};return i;});define("lifeCycleManager",["jQuery"],function(b){var a={};var c={"register":function(d,f){if(typeof d==="string"){d=[d];}for(var e=0;e<d.length;e++){var g=d[e];if(!a[g]){a[g]={"adaptModel":[],"beforeRender":[],"afterRender":[],"afterPopulateContainer":[],"afterPageRender":[]};}if(f.adaptModel){a[g].adaptModel.push(b.proxy(f,"adaptModel"));}if(f.beforeRender){a[g].beforeRender.push(b.proxy(f,"beforeRender"));}if(f.afterRender){a[g].afterRender.push(b.proxy(f,"afterRender"));}if(f.afterPopulateContainer){a[g].afterPopulateContainer.push(b.proxy(f,"afterPopulateContainer"));}if(f.afterPageRender){a[g].afterPageRender.push(b.proxy(f,"afterPageRender"));}}},"execute":function(h,d,g){if(a[h]&&a[h][d]){for(var e=0;e<a[h][d].length;e++){try{if(d=="adaptModel"){g=a[h][d][e](g);}else{a[h][d][e](g);}}catch(f){require("logger",function(i){i.logError("viewLifecycleListenerError",f,{"viewName":h,"eventName":d,"itemNumber":e});
});}}}return g;},"_getEventMap":function(){return a;}};return c;});define("View",["jQuery","Handlebars"],function(a,c){var b=function(d){this.initialize(d);};b.prototype={initialize:function(f){var d=function(){},e=function(){};a.extend(this,f);d.prototype=this.helpers||c.helpers;e.prototype=this.partials||c.partials;this.helpers=new d();this.partials=new e();},container:"",registerHelper:c.registerHelper,registerPartial:c.registerPartial,beforeRenderTemplate:function(d){},afterPopulateContainer:function(d){},afterPageRender:function(){},renderTemplate:function(d){return c.templates[this.templateName](d,{helpers:this.helpers,partials:this.partials});},renderSecondaryTemplate:function(d){if(this.secondaryTemplateName){return c.templates[this.secondaryTemplateName](d,{helpers:this.helpers,partials:this.partials});}},adaptModel:function(d){return d;},populateContainer:function(d){a(this.container).html(d);},populateSecondaryContainer:function(d){if(this.secondaryContainer){a(this.secondaryContainer).html(d);}},tracking:function(){}};return b;});define("modelMerger",["utils"],function(b){var a,c;return{merge:function(d){if(d.suggestions){c=b.getVariantByNameAndExpose("HotelSRNoDisambig");}if(c&&d.suggestions){a={guess:d.suggestions.shift(),alternative:d.suggestions[0],suggestions:d.suggestions};b.setUrlParam("regionId",a.guess.regionId,true);return true;}else{if(c&&d.resultsAbove&&a){d.suggestions=a;a={};}}return false;}};});define("presenter",["View","lifeCycleManager"],function(b,c){var j=false,i={View:b},d={},a=[],f={};i.registerView=function(k){e(k);if(-1!==$.inArray(k.name,a)){throw new Error("cannot create a view with the same name: "+k.name);}if(!d[k.modelName]){d[k.modelName]=[];}d[k.modelName].push(k);a.push(k.name);};i.render=function(k){require(["modelMerger","allViews"],function(o){if(o.merge(k)){return;}for(var n in k){var m=d[n]||[];for(var l=m.length;l--;){h(m[l],k[n]);}}});};function h(k,o){try{var m={},l="",p;c.execute(k.name,"beforeRender",o);k.beforeRenderTemplate(o);m=k.adaptModel(o);m=c.execute(k.name,"adaptModel",(m||o))||m;if(m&&!$.isEmptyObject(m)){l=k.renderTemplate(m);p=k.renderSecondaryTemplate(m);}k.populateContainer(l);k.populateSecondaryContainer(p);c.execute(k.name,"afterPopulateContainer",o);k.afterPopulateContainer(m);c.execute(k.name,"afterRender",o);}catch(n){require("logger",function(q){q.logError("viewRenderError",n,{"viewName":k.name});});}}i.executeAfterPageRender=function(){require("allViews",function(){for(var m in d){var l=d[m];for(var n=0;n<l.length;n++){var k=l[n];try{k.afterPageRender();c.execute(l[n].name,"afterPageRender",false);}catch(o){require("logger",function(p){p.logError("viewAfterPageRenderError",o,{"viewName":k.name});});}}}setTimeout(function(){for(var r in d){var q=d[r];for(var s=0;s<q.length;s++){var p=q[s];try{p.tracking();}catch(t){require("logger",function(u){u.logError("tracking",t,{"viewName":p.name});});}}}},100);$("#hiddenElements").append('<div id="hsr_completed_loading"></div>');});};i.registerLifeCycle=function(k,l){c.register(k,l);};function g(m,k,l){c.execute(m,k,l);}function e(k){if(!k.name){throw new Error("views must contain a name to be properly rendered");}if(!k.renderTemplate){throw new Error("renderTemplate must be defined");}if(!k.modelName){throw new Error("modelName must be defined");}}i._clear=function(){d={};a=[];f={};};return i;});define("interstitialCtrl",function(){var c,a=0,b=true;c={"interstitialModal":undefined,"showAjaxInterstitial":function(){if(!b){$("#modalInterstitial").show();}},"hideAjaxInterstitial":function(){$("#modalInterstitial").hide();},"hidePageInterstitial":function(){b=false;document.getElementById("pageInterstitial").className="hidden";document.getElementById("header").style.display="block";document.getElementById("wizard").style.display="block";document.getElementById("mainContent").style.display="block";document.getElementById("footer").style.display="block";document.getElementById("historyTabs").style.display="block";document.body.className=document.body.className.replace("has-interstitial","");},"hideInterstitials":function(){this.hideAjaxInterstitial();this.hidePageInterstitial();}};require("uitk",function(d){d.subscribe("hsr.interstitial.show",function(e){c.showAjaxInterstitial();});d.subscribe("beforeUpdateHashEvent",function(e){c.showAjaxInterstitial();});d.subscribe("hsr.interstitial.hide",function(e){c.hideInterstitials();});d.subscribe("hsr.interstitial.fakeShow",function(e,f){if(!f||f<2000){f=2000;}d.publish("hsr.interstitial.show");setTimeout(function(){d.publish("hsr.interstitial.hide");},f);});});return c;});require(["jQuery","transport","interstitialCtrl"],function(a,c,b){uitk.subscribe("modal.close",function(d,e){if(e.modalHtml&&e.modalHtml.attr("id")==="ajaxInterstitial"){c.abort();}});});define("historyManager",["Modernizr","utils"],function(b,a){return{"saveState":function(){},"clearState":function(){},"getState":function(){return false;}};});window.onpageshow=function(a){if(a.persisted){require(["uitk","compressQuery","router"],function(c,d,b){c.publish("hsr.bustBackForward",a);var e=$("#searchForm, #edsContent input").compressQuery();b.route(e);});}};define("dctk",function(){return dctk;});require(["jQuery","dctk","presenter"],function(d,a,c){c.render=a.loggingAdapter.trxEventWrapper(c.render,"presenter.render",c);var b=new c.View({"name":"clientLogging","modelName":"clientLogging","populateContainer":function(){},"renderTemplate":function(){},"afterPageRender":function(){var g=["clEventName01=ajaxToAfterPageRender","clEventName02=isFirstXHR."+window.isFirstXHR];if(window.isFirstXHR){if("performance" in window){var f=window.performance.timing;var e=(f.navigationStart!=0)?f.navigationStart:f.responseStart;g.push("clEventName03=pageRender");g.push("clEventTime03="+(new Date().getTime()-e));}}a.loggingAdapter.logTrxEvent("navTiming",g);}});c.registerView(b);});(function metaplus_signin_signup_js(a,c){function b(i){function s(){var v=a.location,u=(v.href.indexOf("?")<0)?"?":"&",w=encodeURIComponent(v.href.replace(/^[a-z]*:\/\/[^\/]*/i,"").replace("#",u)),t=["https://",v.hostname,"/user/metaplussignin?viewName=signin&returnUrl=",w].join("");v.href=t;}function h(){location.reload(true);}function l(){i.ajax({type:"GET",url:"/metaplus/enroll",async:true,dataType:"json",success:h,error:h});}var p=a.document;function r(w,v,u,t){return{xMin:v,xMax:v+u,yMin:w,yMax:w+t};}function f(v,u,t){return r(v.top,v.left,u,t);}function q(w,u,v,t){return(w>=u)||(w>t)||(u<v);}function n(y,u,x,t){if(q(y,u,x,t)){return 0;}var v=u-y,z=Math.max(y,x),w=Math.min(u,t);return(w-z)/v;}function e(y){var x=i(a),w=r(x.scrollTop(),x.scrollLeft(),x.width(),x.height()),t=f(y.offset(),y.width(),y.height()),v=n(t.xMin,t.xMax,w.xMin,w.xMax),u=n(t.yMin,t.yMax,w.yMin,w.yMax);return(v*u)*100;}function o(){var u=i("div.meta-reward-orange-outer-layer a, div#couponBanner.bannerOrange a");if(u.length){var t=e(u);if(t<100){dctk.loggingAdapter.logMessage("MetaPlusRewards-LinkHidden",["pcVisible="+t]);}}}function g(){a.setTimeout(o,0);}function d(u,v,t){return(u&&(u.type==="ajaxComplete")&&v&&(v.status>=200)&&(v.status<400)&&t&&/metaplus\/context/.test(t.url));}function k(u,v,t){if(d(u,v,t)){g();}}function m(){i(p).ajaxComplete(k);}var j=/Hotel\-Search/.test(p.location.href);i(p).ready(j?m:g);return{"signin":s,"enroll":l};}if(typeof a.define==="function"){a.define("METAPLUS",["jQuery"],b);}else{a.METAPLUS=b(a.jQuery);}})(window);
/*!  generated on 2014-06-06 08:12:18.033 PDT(-0700) in 31 ms  */

/*!  served in 31 ms  */
