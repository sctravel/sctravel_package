define("router",["jQuery"],function(b){var a={"routes":{},"route":function(d){var c=this;require("utils",function(e){var f=e.queryToObject(d);if(c.routes[f.view]){c.executeRoute(f.view,d,f);}else{c.executeRoute("default",d,f);}});},"executeRoute":function(c,d,e){this.routes[c](d,e);},"addRoute":function(c,d){if(this.routes[c]){throw new Error("Cannot register a route with the same name "+c);}this.routes[c]=d;}};return a;});define("routerUtils",["jQuery"],function(a){var b={"compareObject":function(e,c){if(!e||!c||this.getObjectLength(e)!==this.getObjectLength(c)){return false;}for(key in e){if(!e.hasOwnProperty(key)){continue;}var f=e[key],d=c[key];if(!d){return false;}else{if(a.isArray(f)&&a.isArray(d)){if(this.compareArray(f,d)){continue;}else{return false;}}else{if(typeof f==="object"&&typeof d==="object"){if(this.compareObject(f,d)){continue;}else{return false;}}else{if(f!==d){return false;}}}}}return true;},"getObjectLength":function(d){var c=0;for(k in d){if(d.hasOwnProperty(k)){c++;}}return c;},"compareArray":function(d,c){if(!d||!c||d.length!==c.length){return false;}for(var e=0;e<d.length;e++){if(d[e]!==c[e]){return false;}}return true;},"compareObjectIgnoreView":function(f,e){var d=a.extend({},f),c=a.extend({},e);delete d.view;delete c.view;return this.compareObject(d,c);}};return b;});require(["jQuery","router","routerUtils","historyManager","transport","presenter"],function(e,l,m,a,d,h){function c(){require(["googleMapCtrl","historyManager"],function(o,n){o.closeMap();});}function j(o,p){var n=!m.compareObjectIgnoreView(p,pageModel.request);if(window.forceServerUpdate||(n&&o&&!m.compareObjectIgnoreView(p,pageModel.request))){b(o);}else{g();}}function b(n){d.submit(n);}function g(){a.saveState(window.pageModel);}function f(){window.forceServerUpdate=false;}var i=function(n,o){c();j(n,o);f();};l.addRoute("default",i);l.addRoute("results",i);});require(["jQuery","router","routerUtils"],function(b,a,d){var c=function(f,g){var e=window.pageModel;if(d.compareObjectIgnoreView(g,e.request)){require(["googleMapCtrl","historyManager"],function(i,h){i.openMap();h.saveState(window.pageModel);});}else{a.executeRoute("default",f,g);}};a.addRoute("map",c);});define("compressQuery",["jQuery"],function(e){var b="&",h="=",a=",",g=/%20/g,d=/%2F/g,j=/%3A/g,c=/%7C/g,f=/%2C/g;e.fn.compressQuery=function(){var m=this.serializeArray(),l={};if(e.isArray(m)){e.each(m,function(){var o=i(this.name),n=i(e.isFunction(this.value)?this.value():this.value);if(o.indexOf("hide")!==0&&n!==""){if(!l[o]){l[o]=[];}l[o].push(n);}});}return e.map(l,function(o,n){return n+h+o.join(a);}).join(b);};function i(m){var l=encodeURIComponent(m);l=l.replace(g,"+").replace(d,"/").replace(j,":").replace(c,"|").replace(f,",");return l;}return{};});define("clearPlaceHolders",["jQuery","Modernizr"],function(a,b){return{"clear":function(){if(!b.placeholder){a("input").each(function(){var d=a(this),e=d.attr("placeholder"),c=d.val();if(e&&e===c){d.val("");}});}}};});define("submitOriginHandler",[],function(){var a="";return{"setOrigin":function(b){if(b==undefined||b==null||b==""){this.submitOrigin="";}else{this.submitOrigin="&origin="+b;}},"getOrigin":function(){return this.submitOrigin;}};});define("formController",["jQuery","uitk","utils","submitOriginHandler"],function(e,c,a,d){var b=false;var f={"submit":function(g){if(!g.$form){g.$form=e("#searchForm");}c.publish(this.beforeResetEvent,g);if(g.stopEvent){return;}c.publish(this.resetEvent,g);if(g.stopEvent){return;}c.publish(this.beforeValidationEvent,g);if(g.stopEvent){return;}c.publish(this.clearErrorsEvent,g);c.publish(this.validationEvent,g);c.publish(this.showErrorsEvent,g);if(g.stopEvent){return;}c.publish(this.getQueryEvent,g);if(g.stopEvent){return;}c.publish(this.beforeUpdateHashEvent,g);if(g.stopEvent){return;}c.publish(this.updateHashEvent,g);},"updateHashFromForm":function(h){var g={"$form":e(h),"isValid":true};require("clearPlaceHolders",function(i){i.clear();c.publish(f.getQueryEvent,g);c.refreshPlaceholders();c.updatePlaceholderClass(e("input"));b=true;if(g.query){window.location.hash="#"+g.query;}});},"getForm":function(){return e("#searchForm");},"getSubmitObject":function(g,i){var h={"origin":g,"$target":e(i),"isNewDestination":e("#inpSearchNear").val()!==window.pageModel.wizard.destinationNameShort};return h;},"beforeResetEvent":"hsr.submit.beforeReset","resetEvent":"hsr.submit.reset","beforeValidationEvent":"hsr.submit.beforeValidation","clearErrorsEvent":"hsr.submit.clearErrors","validationEvent":"hsr.submit.validation","showErrorsEvent":"hsr.submit.showErrors","getQueryEvent":"hsr.submit.getQuery","beforeUpdateHashEvent":"hsr.submit.beforeUpdateHash","updateHashEvent":"hsr.submit.updateHash"};c.subscribe(f.beforeResetEvent,function(i,h){var j=h.reset||{},g=h.$target;if(h.origin==="submitSearchWizard"){if(h.isNewDestination){j.filters=true;j.hotelGroup=true;j.hotelName=true;j.regionId=true;j.adLandingPage=true;}j.pagination=true;j.hotelName=true;}else{if(h.origin==="submitHotelName"){j.wizard=true;j.filters=false;j.hotelGroup=false;j.hotelName=false;j.pagination=true;}else{if(h.origin==="submitFilter"||h.origin==="submitPagination"){j.wizard=true;j.filters=false;j.hotelGroup=false;j.hotelName=true;j.pagination=false;if(h.origin==="submitFilter"){j.pagination=true;}}else{if(h.origin==="submitEDS"){j={};}}}}h.reset=j;});c.subscribe(f.resetEvent,function(i,h){var j=h.reset||{},g={};if(e.isEmptyObject(j)){return;}if(j.wizard){g.wizard=window.pageModel.wizard;}if(j.hotelName){g.hotelName=window.pageModel.hotelName;}if(!e.isEmptyObject(g)){require("presenter",function(l){l.render(g);});}if(j.filters){e(".filter").each(function(m,n){var l=e(n);l=l.is("input")?l:l.find("input");if(l.attr("type")==="text"){l.val("");}else{l.attr("checked",false);}});e("#sort-select option:selected").val("");}if(j.pagination){e('input[name="page"]').removeAttr("checked");}if(j.hotelGroup){e(".hotelGroup").val("");}e("#star").middleChecked();e("#price").middleChecked();if(j.regionId){e("#regionId").val("");}if(j.adLandingPage){e("#adLandingPage").val("");}});c.subscribe(f.beforeValidationEvent,function(h,g){require("clearPlaceHolders",function(i){i.clear();});});c.subscribe(f.clearErrorsEvent,function(j,i){if(i.$form){var g=!e("#inpStartDate").val()&&!e("#inpEndDate").val(),h=i.$form.find("input,select:not(:disabled)"),l=i.$form.find(".errorMsgs").children();if(g){h=h.filter(":not(#inpStartDate,#inpEndDate)");l=l.filter(":not(#wizardDatelessMsg)");}h.closest("label").removeClass("invalid");l.removeClass("shown");}});c.subscribe(f.validationEvent,function(h,g){if(g.$form){require("validation",function(i){g.validationErrors=i.validate(g.$form);g.isValid=g.validationErrors.length===0;});}});c.subscribe(f.showErrorsEvent,function(h,g){for(var j=0;j<g.validationErrors.length;j++){var l=g.validationErrors[j];l.$label.addClass("invalid");l.$errMsg.addClass("shown");}});c.subscribe(f.getQueryEvent,function(h,g){require("compressQuery",function(i){if(g.$form&&g.isValid){g.query=g.$form.compressQuery();}else{g.stopEvent=true;}});window.forceServerUpdate=g.origin==="submitSearchWizard";});c.subscribe(f.beforeUpdateHashEvent,function(h,g){if(g.query&&g.origin==="submitPagination"){if(navigator.userAgent.match(/(iPod|iPhone|iPad|Android)/)){window.scrollTo(0,0);}else{e("html, body").animate({"scrollTop":0},100);}}d.setOrigin(g.$target.data("track"));});c.subscribe(f.updateHashEvent,function(h,g){if(g.query){var i=g.query,j=a.getHash();if(i===j){require(["router"],function(l){l.route(i);});}else{b=false;window.location.hash="#"+i;if(e.browser&&e.browser.msie&&parseInt(e.browser.version)===10){require("historyManager",function(l){l.clearState();});}}}});require(["jQuery","utils","uitk","hashChange"],function(i,g,h){i(window).on("hashchange",function(){i(".uitk-tooltip").remove();h.tooltips.hideAll();if(!b){require(["router"],function(j){var l=g.getHash();j.route(l);});}b=false;});});return f;});require(["uitk"],function(b){var a=b.clickEvent,c="change";$("body").on(a,".submitSearchWizard",function(d){require("formController",function(f){var e=f.getSubmitObject("submitSearchWizard",$(d.target));
f.submit(e);});d.preventDefault();}).on(a,".submitHotelName",function(d){require("formController",function(f){var e=f.getSubmitObject("submitHotelName",$(d.target));f.submit(e);});d.preventDefault();}).on(c,".submitFilter",function(d){require("formController",function(f){var e=f.getSubmitObject("submitFilter",$(d.target));f.submit(e);});d.preventDefault();}).on("submit","#searchForm",function(d){require("formController",function(f){var e=f.getSubmitObject("submitSearchWizard",$(d.target));f.submit(e);});d.preventDefault();}).on("keypress","input",function(f){var e=0;if(window.event){e=window.event.keyCode;}else{if(f){e=f.which;}}if(e===13){var d=$(f.target);f.preventDefault();if(d.closest("#hotelNameContainer").length){require("formController",function(h){var g=h.getSubmitObject("hotelNameContainer",$(f.target));h.submit(g);});f.preventDefault();}else{if(d.closest("#wizardContainer").length){require("formController",function(h){var g=h.getSubmitObject("submitSearchWizard",$(f.target));h.submit(g);});f.preventDefault();}else{if(d.closest("#edsDisplay").length){require(["edsCtrl"],function(g){g.submit(d);});}}}}});});define("transport",["jQuery","utils","uitk","config","submitOriginHandler"],function(f,i,d,c,b){var g=false;function h(j){e();require("dctk",function(l){l.logging.reset();});require(["interstitialCtrl","uitk"],function(m,l){l.publish("hsr.interstitial.show");});j+="&hashParam="+c.hashParam;window.isFirstXHR=false;g=f.ajax(c.dataUrl+b.getOrigin(),{"type":"POST","data":j,"cache":false,"success":function(m,l,n){require(["presenter","formController"],function(o,p){window.pageModel=m;window.pageModel.request=i.queryToObject(i.getHash());o.render(window.pageModel);if(m&&m.metaData&&m.metaData.isFilterRelaxed){p.updateHashFromForm("#searchForm");}});},"error":function(n,l,m){g=false;if(l==="abort"||(n.readyState===0&&l!=="error")){return;}require("ajaxErrorHandler",function(o){o.handleError(false,n.status,l,n.responseText,m);});},"complete":function(n,m){var l=window.pageModel&&window.pageModel.error&&window.pageModel.error.isErrorMessage;g=false;require(["jQuery","presenter","historyManager","interstitialCtrl","uitk","config"],function(s,r,o,t,p,q){if(m!=="abort"){if(a()){p.publish("hsr.interstitial.hide");}}if(m==="success"&&!l){o.saveState(window.pageModel);}if(a()){if(q.delayAfterPageRender){setTimeout(r.executeAfterPageRender,50);}else{r.executeAfterPageRender();}}});}});}function a(){return(window.pageModel===null||!window.pageModel||window.pageModel.handler!=="redirect");}function e(){if(g){g.abort();}}return{"submit":h,"abort":e};});define("validation",["jQuery","config","utils","uitk"],function(h,b,o,e){function g(q){return q*24*60*60*1000;}var d=/\S/,c=b.dateRegex,i=g(b.maxStayLength);var a=function(q,r){if(!q||!r){throw new Error("Name and fn are required for a rule");}this.name=q;this.fn=r;};var p={};p.required=function(q){return n(q);};function n(q){return d.test(q.val());}p.orrequired=function(q,r){return n(q)||n(r);};p.otherrequired=function(q,r){if(n(r)){return n(q);}return true;};p.dateformat=function(q){if(n(q)){return m(q);}return true;};function m(q){return c.test(q.val());}p.priortodate=function(q){if(n(q)&&m(q)){var r=f(q),s=o.getTodaysDate();s.setTime(s.getTime()-g(1));return(r>s);}return true;};function f(q){return e.calendarObj.getDateFromString(q.val());}p.datesequence=function(q,r){if(n(q)&&m(q)&&n(r)&&m(r)){return l(r,q);}return true;};function l(s,t){var r=f(s),q=f(t);return r<q;}p.daterange=function(r,s){if(n(r)&&m(r)&&n(s)&&m(s)&&l(s,r)){var q=f(s),t=f(r);return(t.getTime()-q.getTime())<=i;}return true;};function j(z){if(!z){throw new Error("$form is empty. You must provide a form to validate");}var q=z.find("input,select:not(:disabled)").addBack("input"),t=[];for(var v=0;v<q.length;v++){var y=h(q.get(v)),s=y.data();if(!s){break;}for(ruleName in s){var r=s[ruleName],x=p[ruleName];if(x&&r){var u=r.split(","),w;if(u){w=h(u[1]);}if(!x.call({},y,w)){t.push({"ruleName":ruleName,"$input":y,"$label":y.closest("label"),"$errMsg":h(u[0])});}}}}return t;}return{"validate":j};});define("logger",["config"],function(b){var a={normalizeError:function(h){var d="NA",f=d,c=d,j=d,i;try{if(h&&h.stack){i=h.stack.match(/\(([^\)]+\d+)\)/);if(!i){i=h.stack.match(/@([^\)]+\d+)\n/);}if(i){i=i[1].split(":");f=i.pop();c=i.pop();j=i.join(":");}}}catch(g){}h={sourceURL:h.sourceURL||h.fileName||j,line:h.line||h.lineNumber||c,col:h.columnNumber||f,message:h.message||h.description,stack:(h.stack||d).substr(0,300)};return h;},logError:function(h,d,c){if(!h||!d){return;}var g=[];d=this.normalizeError(d);if(d){g.push("onErrorMsg="+d.message);g.push("onErrorLine="+d.line);g.push("onErrorChar="+d.col);g.push("onErrorUrl="+encodeURIComponent(d.sourceURL));if(d.stack){g.push("stack="+encodeURIComponent(d.stack));}}else{g.push("onError=NA");}g.push("pageUrl="+encodeURIComponent(window.location.href));g.push("clientWidth="+document.documentElement.clientWidth);if(c){for(var e in c){var f=c[e];g.push(e+"="+f);}}if(window.console){console.log(h+": "+g.join("|"));console.log(d.stack);}require("dctk",function(i){i.loggingAdapter.logMessage(h,g);});}};return a;});(function(){try{require(["formController","uitk"],function(e,d){d.subscribe(e.updateHashEvent,function(g,f){if(f.origin==="submitSearchWizard"){d.publish("off-canvas.close");}});});require(["jQuery","presenter"],function(f,e){function d(){var g=7;f(".filterOptionItem .filter").each(function(){f(this).attr("tabIndex",g++);});}d();e.registerLifeCycle(["accessibilities"],{"afterPageRender":function(){d();}});});require(["jQuery","uitk","formController"],function(e,d,f){e("body").on(d.clickEvent,"[data-orientation]",function(){var j=e(this),i=e(j.data("orientation")),g=i.is(":radio");if(g&&(i.attr("id").indexOf("poi")!==-1)){i.attr("checked",false);}else{if(g){i.attr("checked",true);}else{i.closest(".rangeFilter").find("[disabled=disabled]").attr("checked",false).attr("disabled",false);i.attr("checked",false);}}var h=f.getSubmitObject("submitFilter",i);f.submit(h);});});define("cityCtrl",function(){return{beforeResetEvent:function(f,e){var d=e.$target;if(d){if(d.attr("name")==="hideCity"){e.isCityFilter=true;e.regionId=e.$target.val();e.destination=e.$target.data("destination");}}},beforeValidationEvent:function(e,d){if(d.isCityFilter&&d.regionId&&d.destination){$("#regionId").val(d.regionId);$("#inpSearchNear").val(d.destination);}}};});require(["formController","uitk","cityCtrl"],function(f,d,e){d.subscribe(f.beforeResetEvent,e.beforeResetEvent);d.subscribe(f.beforeValidationEvent,e.beforeValidationEvent);});require(["jQuery","uitk"],function(f,e){function d(l){var i=f("#sort-select"),j=i.find("[value="+l+"]"),h=j.data("rfrr");if(h){require("dctk",function(m){m.trackAction(h,i.get(0));});}}function g(){require("formController",function(i){var h=i.getSubmitObject("submitFilter",f("#sort-select"));i.submit(h);});}e.subscribe("sortBar.changed",function(h,i){if(i.hasChanged){g();d(i.sortBy);}else{event.preventDefault();e.publish("hsr.interstitial.fakeShow",2000);}});});require(["jQuery","uitk","formController"],function(e,d,f){e("body").on(d.clickEvent,"#orientationHotelNameContainer",function(i){var g=e(this).find(".text-label");d.remove(g);e("#inpHotelNameMirror").val("");d.refreshPlaceholders();var h=f.getSubmitObject("submitHotelName",g);f.submit(h);}).on("keypress","#inpHotelNameMirror",function(h){var g=0;if(window.event){g=window.event.keyCode;}else{if(h){g=h.which;}}if(g===13){dctk.trackAction("HOT:SR:HotelName",this);}}).on("focus","#inpHotelNameMirror",function(g){e(".hotelNameFilterBtn .btn-utility").addClass("visuallyhidden");e(".hotelNameFilterBtn .btn-sub-action").removeClass("visuallyhidden");});d.subscribe(f.beforeResetEvent,function(h,g){e("#inpHotelNameMirror").uitk_tooltip("hide");});});require(["formController","uitk"],function(e,d){d.subscribe(e.beforeResetEvent,function(h,g){var f=g.$target;if(f){if(f.attr("name")==="hideRegionId"){g.isNeighborhoodFilter=true;g.regionId=g.$target.val();
g.destination=g.$target.data("destination");}}});d.subscribe(e.beforeValidationEvent,function(g,f){if(f.isNeighborhoodFilter&&f.regionId&&f.destination){$("#regionId").val(f.regionId);$("#inpSearchNear").val(f.destination);}});});require(["lifeCycleManager","config","cBannerRender"],function(f,e,d){f.register(["resultsBelow"],{"afterPopulateContainer":function(){d.showBanners();}});});require(["jQuery","utils","uitk"],function(g,e,f){var d=f.clickEvent;g("body").on(d,".mapLink",function(){e.setUrlParam("view","map");g("[name=view]").val("map");});g("body").on(d,".map-close",function(h){e.setUrlParam("view","results");g("[name=view]").val("results");h.stopImmediatePropagation();h.stopPropagation();h.preventDefault();}).on("keydown",function(h){if(h.keyCode===27&&g("#hsrMap").is(":visible")){e.setUrlParam("view","results");g("[name=view]").val("results");h.stopImmediatePropagation();h.stopPropagation();h.preventDefault();}});f.subscribe("map.close",function(){require("dctk",function(h){h.trackAction("HOT.SR.Module.MapClose",g(".map-close")[0]);});});f.subscribe("map.marker.opened",function(){setTimeout(function(){f.publish("debounced.scroll");},250);});});define("googleMapCtrl",["uitk"],function(e){var f={};var d={"openMap":function(){require("uitkMap",function(g){f=g.create({"configId":"hsrMap","zoomToFit":true,"title":(pageModel&&pageModel.googleMap&&pageModel.googleMap.title)?pageModel.googleMap.title:""});e.publish("map.opened");});},"closeMap":function(){require("uitkMap",function(g){if(g){g.close();}});},"getMap":function(){return f;}};return d;});define("edsCtrl",["jQuery","uitk","formController","dctk"],function(g,f,h,d){var e={"hasDestinationChanged":false,"roomCount":0,"adultCount":0,"childCount":0,"searchMode":"pageLoad","hotelId":"","infositeUrl":"","edsModal":undefined,"showEdsModal":function(){if(this.edsModal){this.edsModal.open();}else{this.edsModal=f.modal.create({"content":"edsModalDisplay","modalId":"edsModal","background":true,"takeover":false,"dismiss":false});this.enableEasyClose();g("#edsContainer").remove();}},"hideEdsModal":function(){if(this.edsModal){this.edsModal.close();}},"enableEasyClose":function(){var i=this,l="modal-background",j="modal-wrap";g("body").on("keydown.eds",function(n){var m=0;if(window.event){m=window.event.keyCode;}else{if(n){m=n.which;}}if(m===27){n.preventDefault();if(i.edsModal&&i.searchMode!=="hotelCheck"){g(".uitk-tooltip").remove();i.edsModal.close();}}});g("body").on(f.clickEvent,"."+l,function(m){m.preventDefault();m.stopPropagation();if(i.edsModal&&i.searchMode!=="hotelCheck"){g(".cal-month").remove();g(".theme-calendar").remove();i.edsModal.close();}});g("body").on(f.clickEvent,"."+j,function(m){if(g(m.target).hasClass(j)){m.preventDefault();m.stopPropagation();if(i.edsModal&&i.searchMode!=="hotelCheck"){g(".cal-month").remove();g(".theme-calendar").remove();i.edsModal.close();}}});},"submitPageLevel":function(i){submitObject=h.getSubmitObject("submitEDS",i);submitObject.$form=g("#searchForm, #edsContent input");h.submit(submitObject);},"submitHotelLevel":function(i){var l=this,m=g("#edsFields"),n=g("#edsHotelId"),j=this;if(n.length===0){n=g("<input />").attr("type","hidden").attr("id","edsHotelId").attr("name","selected").attr("value",e.hotelId);m.append(n);}else{n.val(e.hotelId);}require("validation",function(q){var p=g("#edsFields"),o,r;o=q.validate(p);if(o.length>0){for(r=0;r<o.length;r++){o[r].$errMsg.show();o[r].$label.addClass("invalid");}}else{g("#modalCloseButton").hide();j.searchMode="hotelCheck";d.trackAction("HOT.SR.EDS.ChooseDates.IS",i.get(0));j.doAvailabilityAjax(m);}});},"submit":function(i){var l=g("#inpStartDateEDS"),j=g("#inpEndDateEDS");g("#edsContent #edsErrorMsg p").hide();g("#edsContent #edsFields label").removeClass("invalid");if(l.val()===l.attr("placeholder")){l.val("");}if(j.val()===j.attr("placeholder")){j.val("");}g(".cal-month").hide();g(".theme-calendar").hide();if(e.searchMode==="hotelInfo"){this.submitHotelLevel(i);}else{this.submitPageLevel(i);}},"doAvailabilityAjax":function(j){var q=j.find("input"),o="/Hotel-Search/doAvailabilitySearch",p={},i=g("#edsHotelPrompt"),l=g("#edsFields"),n=g("#edsInterstitial"),m=g("#modalCloseButton");i.hide();l.hide();n.show();g.each(q,function(){var r=g(this);p[r.attr("name")]=r.attr("value");});g.ajax({dataType:"json",type:"POST",data:p,url:o,success:function(s){var r,t;if(!s.available){m.show();e.searchMode="hotelInfo";n.hide();i.show();l.show();g("#edsHotelPromptUnavail").show();}else{require(["hotelContext"],function(u){r=j.find("#inpStartDateEDS").val();t=j.find("#inpEndDateEDS").val();if(e.infositeUrl.indexOf("chkin=")!==-1){e.infositeUrl=e.infositeUrl.replace(/(chkin=.*?&)|(chkin=.*?$)/,"chkin="+encodeURIComponent(r)+"&");}else{if(u.isTravelAd){e.infositeUrl+=encodeURIComponent("&chkin="+r);}else{e.infositeUrl+="&chkin="+encodeURIComponent(r);}}if(e.infositeUrl.indexOf("chkout=")!==-1){e.infositeUrl=e.infositeUrl.replace(/(chkout=.*?&)|(chkout=.*?$)/,"chkout="+encodeURIComponent(t)+"&");}else{if(u.isTravelAd){e.infositeUrl+=encodeURIComponent("&chkout="+t);}else{e.infositeUrl+="&chkout="+encodeURIComponent(t);}}});g("#edsHotelId").remove();h.updateHashFromForm("#searchForm, #edsContent input");window.location.assign(e.infositeUrl);}},error:function(r){m.show();e.searchMode="hotelInfo";n.hide();i.show();l.show();g("#edsTimeout").show();if(window.console){console.log(r);}}});}};return e;});require(["jQuery","formController","edsCtrl","hotelContext","uitk","utils"],function(i,j,g,h,f,e){var d=f.clickEvent;i("body").on(d,"#hotelNewSearchLnk",function(){g.searchMode="update";});i("body").on(d,"#edsSubmitAction",function(){g.submit(i(this));});i("body").on(d,".edsHotel, .mapSeeDetails.btn",function(m){var r=i(this),l,p,q,n,s,t;if(i(m.target).data("control")==="tooltip"){return;}if(!window.pageModel||!window.pageModel.metaData||!window.pageModel.metaData.isDateless||window.pageModel.experiments.HotelSRRespRemoveEDSModal=="3257.1"){return;}m.preventDefault();m.stopImmediatePropagation();g.searchMode="hotelInfo";g.hotelId=r.closest("[data-hotelid]").data("hotelid");g.infositeUrl=this.href;var o=e.findHotelById(g.hotelId);h.showLocalName=false;h.localname="";if(o){h.hotelName=o.retailHotelInfoModel.hotelName;h.hotelStars=o.retailHotelInfoModel.hotelStarRating;h.hotelStarCss=o.retailHotelInfoModel.hotelStarRatingCss;h.isTravelAd=o.isSponsoredListing;if(o.retailHotelInfoModel.localizedHotelName!=null&&o.retailHotelInfoModel.localizedHotelName!=""){h.showLocalName=true;h.localname=o.retailHotelInfoModel.localizedHotelName;}}g.showEdsModal();l=i("#edsContent");p=i("#edsHotelPrompt");q=i("#edsFields");n=i("#edsInterstitial");n.hide();p.show();q.show();require(["AirAttachEDS","utils"],function(u,v){var w=v.getVariantByName("HotelAirAttachOneWayUS");if(w=="1"||w=="2"){u.hide();}});s=i("#inpStartDateEDS");t=i("#inpEndDateEDS");if(s.val()!==s.attr("placeholder")){s.val(s.attr("placeholder"));}if(t.val()!==t.attr("placeholder")){t.val(t.attr("placeholder"));}l.find("#edsErrorMsg p").hide();l.find("#edsFields label").removeClass("invalid");h.addHotelInfoHeading();i("#edsContent").find("input").each(function(){var u=i(this);u.focus(function(){var v=i(this);if(v.val()===v.attr("placeholder")){v.val("");}});u.blur(function(){var v=i(this);if(v.val()===""){f.updatePlaceholderValue(v);}});if(u.val()===""){f.updatePlaceholderValue(u);}});});f.subscribe(j.showErrorsEvent,function(m,l){var n,p,o=i("#edsSubmitAction").get(0);if(l.origin!=="submitEDS"){return;}if(l.isValid){dctk.trackAction("HOT.SR.EDS.ChooseDates.SR",o);g.hideEdsModal();g.searchMode="pageLoad";g.hasDestinationChanged=l.isNewDestination;}else{for(n=0;n<l.validationErrors.length;n++){p=l.validationErrors[n];p.$errMsg.show();}}});f.subscribe("hsr.bustBackForward",function(){g.hideEdsModal();});});require(["jQuery","templates","utils","roomBuilder","uitk","dctk","travellerContext"],function(h,m,n,f,e,i,g){var o=e.clickEvent;h("body").on(o,"#wizardToggleSwitch:not(.open)",function(){}).on("change",".childCount",function(){var s=h(this),p=s.find("select").val(),q=s.closest(".wizardTravellerAges");
$childAges=q.find(".childAge");$childAges.slice(0,p).removeClass("hidden").find("select").removeAttr("disabled");$childAges.slice(p).addClass("hidden").find("select").attr("disabled","disabled").val("-1").find("option:first").attr("selected","selected");var r=q.find(".childMessage");if(p>0){r.removeClass("hidden");}else{r.addClass("hidden");}g.update();}).on("change",".adultCount select",function(){g.update();}).on(o,"#wizardAddRoomLink",function(){var t=window.pageModel.wizard,s=h(".wizardTravellerAges").last(),q=s.data("room-number")+1,v=s.data("room-index")+1,p={"adults":2,"childAges":[]};if(q>t.maxRooms){return;}var u=f.buildRoom(t,p,v,q),r=m.render("room",u);s.after(r);g.update();h(".wizardRemoveRoomLink").removeClass("hidden");if(q>=t.maxRooms){h("#wizardAddRoom").addClass("hidden");}}).on(o,".wizardRemoveRoomLink",function(){var q=h(this),p=q.closest(".wizardTravellerAges"),r=h(".wizardTravellerAges");e.remove(p);});e.subscribe("remove",function(q,s){if(s.hasClass("wizardTravellerAges")){var r=s,p=h(".wizardTravellerAges").not(r);p.each(function(v,w){var u=h(w),t=v+1;u.data("room-index",v).data("room-number",t);u.find(".roomTitle").html(m.render("roomTitle",t));var x=/\d+_/;u.find('select[name="children"] option').each(function(z,y){var A=h(y);A.val(A.val().replace(x,t+"_"));});});g.update();h("#wizardAddRoom").removeClass("hidden");if(p.length<=1){h(".wizardRemoveRoomLink").addClass("hidden");}}});function j(){h("#inpSearchNear").attr("tabIndex","1");h("#inpStartDate").attr("tabIndex","2");h("#inpEndDate").attr("tabIndex","3");h("#hotelNewSearchLnk").attr("tabIndex","4");}function d(){h(".hotelNewSearchLnk input").attr("tabIndex","-1");}e.subscribe("toggle.opened",function(p,q){if(q.is("#wizardToggleSwitch")){j();h("body").focus();i.trackAction("HOT:SR:ChangeSearch",q.get(0));}});e.subscribe("toggle.closed",function(p,q){if(q.is("#wizardToggleSwitch")){h("#wizardContainer").html(m.render("wizard",window.pageModel.wizard));d();i.trackAction("HOT:SR:CancelSearch",q.get(0));}});e.subscribe("toggle.opened",function(p,q){if(q.is(".wizardOptionsLink")){i.trackAction("HOT.SR.Wizard.ShowOptions",q.get(0));}});e.subscribe("toggle.closed",function(p,q){if(q.is(".wizardOptionsLink")){i.trackAction("HOT.SR.Wizard.HideOptions",q.get(0));}});e.subscribe("calendar.selectDate",function(p,q){h("#inpStartDate, #inpEndDate").closest(".date").removeClass("invalid");h("#wizardDatelessMsg").removeClass("shown");});require("formController",function(p){e.subscribe(p.beforeResetEvent,function(r,q){h("#inpSearchNear").uitk_tooltip("hide");e.tooltips.hideAll();});});function l(p){require(["calendar","uitk"],function(s,q){if(exp.core.date.CalendarControl){var r=exp.core.date.CalendarControl.Config;r.setFormatConfig("mmddyy","/");r.setUnitConfig(0,["January","February","March","April","May","June","July","August","September","October","November","December"],["S","M","T","W","T","F","S"]);r.setTextConfig("Close");r.setNightTextConfig(["one night","nights"]);q.calendarObj=exp.core.date.Calendar(r);q.dateUpdater=exp.core.date.DateUpdater(q.calendarObj,r);}});}l(window.pageModel.wizard);});require(["uitk"],function(e){var d=e.subscribe("drrTimerExpired",function(f,g){if(g.expireEventName==="airAttachBanner"){$("#airAttachContainer").empty();e.unsubscribe(d);}});});require(["jQuery","uitk","dctk"],function(g,f,e){var d=f.clickEvent;g("body").on(d,".isEISTooltipLink",function(){e.trackAction("HOT.SR.Badges.InsiderSelect",this);});});require(["formController","uitk"],function(e,d){d.subscribe(e.updateHashEvent,function(g,f){$("#pinnedContainer").addClass("hidden");});});require(["jQuery","config","Modernizr","uitk","utils","dctk"],function(j,i,l,h,g,f){var e=h.clickEvent;j("body").on(e,".togglemap",function(m){var n=this;require("qvMapCtrl",function(o){o.openMap(n,360);});m.preventDefault();m.stopPropagation();});j("body").on("click touch",".dynamic.strikePrice",function(m){if(l.touch){m.preventDefault();m.stopPropagation();}});var d=h.subscribe("drrTimerExpired",function(m,n){if(n.expireEventName==="airAttachResults"){j(".airAttach").removeClass("airAttach");}require("historyManager",function(o){o.clearState();});});});require(["utils","jQuery"],function(d,e){var f=e("#disambigContainer").on("click","a",function(){var g=e(this);d.setUrlParam("regionId",g.attr("data-regionid"));});});define("historyTabViewControls",["jquery"],function(e){var d={"setEnabled":function(){this.setEnableLeft();this.setEnableRight();},"setEnableLeft":function(){var f=e("#historyTabs .historyTab.leftBtn"),g=this.getAvailableSpace(),h=this.getRequiredSpace();if(h>g){f.addClass("enabled");}else{f.removeClass("enabled");}},"setEnableRight":function(){var h=e("#historyTabs .historyTab.rightBtn"),g=this.getSlider(),f=parseInt(g.css("left"));if(f<0){h.addClass("enabled");}else{h.removeClass("enabled");}},"getAmountToMoveLeft":function(){var f=-100,g=this.getAvailableSpace(),h=this.getRequiredSpace(),i=h-g;if(i<Math.abs(f)){f=-i;}return f;},"getAmountToMoveRight":function(){var f=100,h=this.getSlider(),g=parseInt(h.css("left"));if(Math.abs(g)<f){f=Math.abs(g);}return f;},"moveRight":function(){this.slide(this.getAmountToMoveRight());},"moveLeft":function(){this.slide(this.getAmountToMoveLeft());},"slide":function(f){var h=this.getSlider(),g=parseInt(h.css("left"))+f;h.css("left",g+"px");this.setEnabled();},"getAvailableSpace":function(){var f=e("#historyTabs .clip"),g=e("#historyTabs .cols-row"),j=this.getSlider(),i=parseInt(g.css("padding-left"))+parseInt(g.css("padding-right")),h=f.width()-i-parseInt(j.css("left"));return h;},"getRequiredSpace":function(){var f=e("#historyTabs .historyTab"),j=0;for(var g=0;g<f.length;g++){var h=e(f.get(g));j+=h.width();}return j;},"getSlider":function(){return e("#historyTabContainer");}};return d;});require(["jquery","uitk","historyTabStorage","historyTabCtrl"],function(f,e,g,d){f("body").on(e.clickEvent,".historyTab.tab .icon-close",function(j){j.preventDefault();j.stopPropagation();var i=f(this),h=i.data("hash");g.evictTabByHash(h);d.reRender();});});var b=function(){if(pageModel.experiments){if(pageModel.experiments.HotelHeaderNavTest!=="3542.2"&&pageModel.experiments.HotelHeaderNavTest!=="3542.3"){return;}}$(".site-navigation.all-in").hide();};require(["jQuery","View","presenter"],function(e,f,d){d.registerLifeCycle(["resultsBelow"],{"afterRender":function(){b();}});});var c=function(){var g=$(".expandedWizard"),h=$("#roomsToggle"),j=$(".hotel").length,l=$("#star"),n=$("#price"),r=$('<label class="select icon icon-toggle180"></label>'),p=$('<label class="select icon icon-toggle180 marginLeftOW5166"></label>'),e=$('<span class="label"></span>'),u=l.find(".filterTitle").text(),s=n.find(".filterTitle").text(),t=$('<span class="label"></span>'),f=$('<select name="star" id="inpWizardStar" class="OW5166" tabindex="3"></select>'),o=$('<select name="price" id="inpWizardPrice" class="OW5166" tabindex="3"></select>'),d,q=$("<hr>"),m;if(pageModel.experiments){if(pageModel.experiments.HotelSROptionsInWizard!=="3532.1"&&pageModel.experiments.HotelSROptionsInWizard!=="3532.2"){return;}}else{return;}if(!pageModel.metaData||pageModel.metaData.isDateless){return;}if(j===0){return;}e.text(u);f.append('<option value="">'+u+"</option>");d=$("<option></option>").attr("value","50,10").text("1 star or more");f.append(d);d=$("<option></option>").attr("value","50,20").text("2 stars or more");f.append(d);d=$("<option></option>").attr("value","50,30").text("3 stars or more");f.append(d);d=$("<option></option>").attr("value","50,40").text("4 stars or more");f.append(d);d=$("<option></option>").attr("value","50").text("5 stars");f.append(d);f.bind("change",function(){$("#star").find("input").attr("checked",false);});t.text(s);o.append('<option value="">'+s+"</option>");n.find(".filterOptionItem").each(function(){var i=$(this);d=$("<option></option>").attr("value",i.find(".filter").val()).text(i.find(".filterOptionText").text());o.append(d);});r.append(e);r.append(f);p.append(t);p.append(o);if(pageModel.experiments.HotelSROptionsInWizard==="3532.1"){if($("#inpWizardStar").length===0){g.append(r);
g.append(p);}}else{if($("#inpWizardStar").length===0){p.addClass("noTopMarginOW5166");r.addClass("noTopMarginOW5166");h.prepend(p);h.prepend(r);h.prepend(q);}}$("#hotelNewSearchLnk").data("track","HOT:SR:UpdateSearch:WizardOptions");$("#inpWizardStar").bind("change",function(){if(this.selectedIndex>0||$("#inpWizardPrice").get(0).selectedIndex>0){$("#hotelNewSearchLnk").data("track","HOT:SR:UpdateSearch:WizardOptions:True");}else{$("#hotelNewSearchLnk").data("track","HOT:SR:UpdateSearch:WizardOptions");}});$("#inpWizardPrice").bind("change",function(){if(this.selectedIndex>0||$("#inpWizardStar").get(0).selectedIndex>0){$("#hotelNewSearchLnk").data("track","HOT:SR:UpdateSearch:WizardOptions:True");}else{$("#hotelNewSearchLnk").data("track","HOT:SR:UpdateSearch:WizardOptions");}});};require(["jQuery","uitk"],function(e,d){d.subscribe("toggle.opened",function(){c();});});require(["uitk"],function(e){var d=e.subscribe("drrTimerExpired",function(f,g){$(".AAE5246text").hide();$(".AAE5246timer").hide();$("#edsHeading").show();e.unsubscribe(d);});});require(["jQuery","View","presenter","utils","travelAdLinkOff"],function(g,h,f,d,e){if(d.isExperiment("HotelSR_StrongerCTATravelAdLinkoff")){f.registerLifeCycle(["resultsAbove","resultsBelow"],{"adaptModel":function(m){for(var l=0,n;n=m[l++];){if(!n.sponsoredListingExternalUrl){continue;}var j=pageModel.experiments["HotelSR_StrongerCTATravelAdLinkoff"];if(n.sponsoredListingImpressionTrackingUrl.indexOf(j)>-1){return;}n.sponsoredListingImpressionTrackingUrl=d.addTestOverride(n.sponsoredListingImpressionTrackingUrl,j);n.retailHotelInfoModel.sponsoredListingImpressionTrackingUrl=n.sponsoredListingImpressionTrackingUrl;}return m;}});f.registerLifeCycle(["resultsAbove","resultsBelow"],{"afterRender":function(m){var o=e.getVariant();for(var j=0,n;n=m[j++];){var l=g("#hotel"+n.hotelIndex);if(n.sponsoredListingExternalUrl){if(o==1){l.find(".details").css("padding-bottom","1.813em").after('<a data-control="tooltip" target="'+n.hotelId+'" href="'+n.sponsoredListingExternalUrl+'"><div class="tAdLinkOff"><span class="tAdLinkOffbadge badge badge-urgent badge-notification" >Compare Rates</span><span class="viewLink">View on hotel website</span></div></a>');}else{if(o==2){l.find(".details").css("padding-bottom","0.438em").after('<a data-control="tooltip" target="'+n.hotelId+'" href="'+n.sponsoredListingExternalUrl+'"><div class="tAdhr"><hr /></div><div class="tAdLinkOff2"><span class="tAdLinkOffbadge2 badge badge-urgent badge-notification" >Compare Rates</span>View on hotel website &#8250;</div></a>');}}}}}});}});require(["jQuery","View","presenter","dctk","uitk"],function(g,h,f,d,e){f.registerLifeCycle(["pageTitle"],{"afterPageRender":function(l){if(!window.pageModel.experiments||window.pageModel.experiments.HotelHSRFlyinScratchpad!=="4828.1"){return;}if(g(window).width()<725){return;}var j=g("#header-history"),i=g("#scratchpadTooltip"),m=j.offset();i.css("left",(m.left+j.width()/2)-(i.width()/2)-19+"px");i.css("top",(m.top+j.outerHeight())-6+"px");i.show();setTimeout(function(){i.fadeOut();},4600);j.bind("click",function(){d.trackAction("HOT:SR:Scratchpad",this);});}});if(g("#scratchpadTooltip").length==0){g("#hiddenElements").after('<div id="scratchpadTooltip" class="uitk-tooltip active-tooltip theme-hover show-arrow bottom center on fade" style="display: none;"><div class="tooltip-inner"><p class="scratchpadText last">Hotels you view will be saved here.</p></div><span class="tooltip-arrow" style="margin-left: 0px; margin-right: 0px;"></span></div>');}});require(["conDrrMvtSavings","lifeCycleManager"],function(d,e){e.register("resultsBelow",{"afterRender":function(){d.run();}});});define("horizontalFilterCtrl",["jQuery"],function(e){var d={activeClass:"active",clearActive:function(f){if(f.is(".filterOptionItem.close .closeLink")||f.closest(".filterList").length===0){e("#horizontalFilterContainer .filterContainer").removeClass(this.activeClass);}},setActive:function(h){var f=h.closest(".filterContainer"),g=f.is("."+this.activeClass);this.clearActive(h);if(!g){f.addClass(this.activeClass);}},toggleVisible:function(){var f=e("#horizontalFilterContainer");if(f.is(".open")){this.close(f);}else{this.open(f);}},open:function(f){f.addClass("open");},close:function(f){f.removeClass("open");}};return d;});require(["jQuery","uitk","horizontalFilterCtrl","utils"],function(h,e,g,d){function f(){return d.getVariantByName("HotelHSRHorizontalFilters");}h("body").on(e.clickEvent,"#horizontalFilterContainer .filterTitle",function(i){if(f()===1){i.stopPropagation();var j=h(this);g.setActive(j);}}).on(e.clickEvent,"#sortContainer .off-canvas-btn",function(i){if(f()===1){i.preventDefault();g.toggleVisible();}}).on(e.clickEvent,function(j){var i=h(j.target);if(f()===1){g.clearActive(i);}});});require(["jQuery","uitk","formController","dctk"],function(f,e,g,d){e.subscribe("pagination.pageChanged",function(i,j){var h=g.getSubmitObject("submitPagination",f("#paginationContainer input[checked]"));g.submit(h);});f("body").on("click",".pagination-prev",function(){d.trackAction("HOT:SR:Pagination:Prev",this);}).on("click",".pagination-next",function(){d.trackAction("HOT:SR:Pagination:Next",this);}).on("click",".pagination label",function(){var h=f(this).find("input").val();d.trackAction("HOT:SR:Pagination:"+h,this);});});require(["jQuery","uitk","regionUrgencyMessage"],function(f,d,e){var g=f(e.container);g.on(d.clickEvent,".close-link",function(){g.stop(true).animate({"opacity":0},e.config.fadeOutDuration,function(){f(this).addClass("hidden");});});});require(["lifeCycleManager"],function(d){d.register("poi",{"afterRender":function(){var f=$("#poiFilterContainer .filterTitleItem"),e=$("#poiFilterContainer .filterTitle");if(e.length>0&&e.text()!==""){e.css("display","inline");f.append(" ");f.append($('<span class="badge badge-secondary badge-notification" style="font-weight:bold;background-color:#58738a;margin-bottom:1px;">NEW!</span>'));}if($("#poiFilterContainer input:checked").length>0){$("#neighborhoodContainer").hide();}}});});}catch(a){require("logger",function(d){d.logError("allViewsCtrlError",a);});}})();if("undefined"==typeof(exp)){var exp={};}if("undefined"==typeof(exp.core)){exp.core={};}if("undefined"==typeof(exp.core.date)){exp.core.date={};}exp.core.date.Calendar=function(a){var b={config:a,rM:[31,28,31,30,31,30,31,31,30,31,30,31],getDateFormat:function(){return this.config.getDateFormat();},getDateSeparator:function(){return this.config.getDateSeparator();},getStartOfWeek:function(){return this.config.getStartOfWeek();},getDateFromString:function(g){if(!g||!g.length){return null;}g=g.replace(/\s+/g,"");if(g.match(/[^-|\d|\.|\/]/)){return null;}var h=g.split(/-|\.|\//);for(var f=0;f<h.length;f++){h[f]=parseInt(h[f],10);}if(!h[1]){return null;}var c,l,n;var e=this.getDateFormat();if(e=="yymmdd"){if(!h[2]){return null;}c=h[1];l=h[2];n=h[0];}else{if(e=="mmddyy"){c=h[0];l=h[1];}else{c=h[1];l=h[0];}if(h[2]){n=h[2];}else{n=this.DefYr(c-1,l);}}var j=new Date().getFullYear();c-=1;if(n.toString().length===2){n+=2000;}if(n<j){n=j;}if(n<1601||n>4500||c<0||c>11||l<1||l>this.getMonthCount(c,n)){return null;}return new Date(n,c,l);},toStringFromComp:function(i,c,j){function h(d){return d<10?"0"+d:d;}var f="";var g=this.getDateSeparator();var e=this.getDateFormat();i=h(i);c=h(c);if(e=="mmddyy"){f=c+g+i+g+j;}else{if(e=="ddmmyy"){f=i+g+c+g+j;}else{f=j+g+c+g+i;}}return f;},toStringFromDate:function(f){var e="";var g=this.getDateSeparator();var d=this.getDateFormat();var h=f.getMonth()+1;var c=f.getDate();var i=f.getFullYear();if(d=="mmddyy"){e=h+g+c+g+i;}else{if(d=="ddmmyy"){e=c+g+h+g+i;}else{e=i+g+h+g+c;}}return e;},IsLY:function(c){if(0==c%4&&((c%100!=0)||(c%400==0))){return true;}else{return false;}},DefYr:function(c,g){var e=new Date();var f=(e.getYear()<1000)?1900+e.getYear():e.getYear();if(c<e.getMonth()||(c==e.getMonth()&&g<e.getDate())){f++;}return f;},getMonthCount:function(d,f){var e=this.rM[d];if((1==d)&&this.IsLY(f)){e++;}return e;},IsLastDayOfMonth:function(c){return this.getMonthCount(c.getMonth(),c.getFullYear())==c.getDate();
},incrementMonth:function(c){if(c.getMonth()==11){c.setMonth(0);c.setFullYear(c.getFullYear()+1);}else{c.setMonth(c.getMonth()+1);}return c;},decrementMonth:function(c){if(c.getMonth()==0){c.setMonth(11);c.setFullYear(c.getFullYear()-1);}else{c.setMonth(c.getMonth()-1);}return c;}};return b;};exp.core.date.DateUpdater=function(d,b){var a;var c={config:b,calendar:d,register:function(j,s,n,o,m,v){n=n||0;var t=$(j);var i=this.calendar.getDateFromString(t[0].value);var r=$(s);var h=this.calendar.getDateFromString(r[0].value);var g=this.calendar.getDateSeparator();var f=this.calendar.getDateFormat();var u=f.substring(0,2)+g+f.substring(2,4)+g+f.substring(4,6);var e=new Date();e.setHours(0,0,0,0);if(i&&i.valueOf()<e.valueOf()){t[0].value=u;}if(h&&h.valueOf()<e.valueOf()){r[0].value=u;}a=this;var q=function(){a.update("#"+j.id,"#"+s.id,n,o,v);};var p=function(){a.updateByNights(t[0],r[0],n);a.update(t[0],r[0],n,o);};$("body").on("blur","#"+j.id,q);$("body").on("focus","#"+j.id,q);$("body").on("blur","#"+s.id,q);$("body").on("focus","#"+s.id,q);var l=$("#"+j.id+"-stay-nights");if(l.length!=0){l.change(p);l.keypress(p);}},days_between:function(i,h){var j=1000*60*60*24;var g=i.getTime();var f=h.getTime();var e=Math.abs(g-f);return Math.round(e/j);},updateNumberOfNights:function(i,h){var g=document.getElementById("hot-sear-date-num-nights");if(this.config!=undefined&&g!=null){var e=this.config.getNightTextConfig();var f=this.days_between(h,i);if(f>1){g.innerHTML=f+" "+e[1];}else{g.innerHTML=e[0];}g.style.display="inline";}},updateDayName:function(j,f){var i=$("#"+j.id+"-day");if(this.config!=undefined&&i.length!=0){try{var e=f.getDay();if(e==undefined){i.html("");return;}var h=this.config.getDayNames();i.html(h[e]);}catch(g){i.html("");}}},updateByNights:function(f,g,i){var e=this.calendar.getDateFromString($(f).val());var h=$("#"+f.id+"-stay-nights");if(e){e.setDate(e.getDate()+parseInt(h.get(0).value));$(g).val(this.calendar.toStringFromComp(e.getDate(),e.getMonth()+1,e.getFullYear()));}},update:function(g,n,j,l,q){var o=$(g);var m=$(n);var f=this.calendar.getDateFromString(o.val());var e=this.calendar.getDateFromString(m.val());var h=$("#"+g.id+"-stay-nights");j=o.attr("data-min-booking-length")||0;if(!q||isNaN(parseInt(q))||e){q=0;}this.updateDayName(g,f);this.updateDayName(n,e);if(f&&e){this.updateNumberOfNights(f,e);}if(f){if(e&&h.length!=0){var r=Math.round((e-f)/1000/60/60/24);if(r<1){r=h.get(0).value;}h.get(0).value=r;}var p=Math.max(j,q);f=new Date(f.valueOf()+1000*3600*24*p);var i=this.calendar.toStringFromComp(f.getDate(),f.getMonth()+1,f.getFullYear());if(e&&e<=f){e=null;}if(null==e&&(m.attr("data-optional")!="true"||m.val()!="")){e=this.calendar.getDateFromString(o.val());this.updateNumberOfNights(e,f);if(h.length!=0&&h.get(0).value!=1){f.setDate(f.getDate()+parseInt(h.get(0).value)-1);var i=this.calendar.toStringFromComp(f.getDate(),f.getMonth()+1,f.getFullYear());}if(i!=m.val()){m.val(i);m.blur();}if(exp.core.date.datePicker){exp.core.date.datePicker.entries[m.attr("id")].currentValue=f;}this.updateDayName(n,f);}}if(o.is(".fieldDefaultText")){o.removeClass("fieldDefaultText");}if(m.is(".fieldDefaultText")){m.removeClass("fieldDefaultText");}uitk.updatePlaceholderClass(o);uitk.updatePlaceholderClass(m);}};return c;};exp.core.date.CalendarControl=function(){var a=function(){var o="mmddyy";var g="/";var p=0;var e=["January","February","March","April","May","June","July","August","September","October","November","December"];var f=["JAN","FEV","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var r=["S","M","T","W","T","F","S"];var j="Close";var i="";var d=["night","nights"];var b=function(s){d=s;};var m=function(s,t){o=s;g=t;};var q=function(t,s,v,u){p=t;e=s;r=v;if(u!=undefined){c=u;}};var n=function(t,s,u){p=t;f=s;r=u;};var h=function(s){j=s;};var l=function(s){i=s;};return{setFormatConfig:m,setUnitConfig:q,setSingleUnitConfig:n,setTextConfig:h,setLocaleConfig:l,setNightTextConfig:b,getDateFormat:function(){return o;},getDateSeparator:function(){return g;},getStartOfWeek:function(){return p;},getMonths:function(){return e;},getSingleMonths:function(){return f;},getDayAbbrs:function(){return r;},getDayNames:function(){return c;},getCloseText:function(){return j;},getLocaleConfig:function(){return i;},getNightTextConfig:function(){return d;}};};return{Config:new a("ddmmyy",".",2)};}();!function(c){var b="uitk_tooltip";var d=function(e,g,f){this.$element=c(e);this.$label=this.$element.closest("label");if(!f.rawHtml){if(uitk){this.template=uitk.getCompiledTemplate(g);}else{g=c(g).html();this.template=Handlebars.compile(g);}}else{this.template=Handlebars.compile(g);}this.opts=c.extend(true,{},d.defaultOptions,f);this.searchType=null;this.cache={};this.ignoreNext=false;this.isClickOn=false;this.bodyClick=false;this.$element.autocomplete="off";this.$element.closest("form").attr("autocomplete","off");this.$element.on("focus",c.proxy(this.focus,this)).on("keydown",c.proxy(this.keyDown,this)).on("keyup",c.proxy(this.keyUp,this)).on("keypress",c.proxy(this.keyPress,this)).on("blur",c.proxy(this.blur,this));this.$ta=c('<div class="typeahead">');if(this.opts.tooltip){this.$element[b]({content:this.$ta,template:'<div class="uitk-tooltip"><div class="tooltip-inner"></div><span class="tooltip-arrow-border"></span><span class="tooltip-arrow"></span></div>'});}else{this.$ta.appendTo(document.body);if(!uitk.isTouchDevice){this.$ta.on("mousedown",c.proxy(this.clickOn,this)).on("mouseup",c.proxy(this.clickOff,this)).on("click",c.proxy(this.click,this)).on("mouseenter","a",c.proxy(this.mouseEnter,this));}else{this.$ta.on("click",function(h){h.preventDefault();});}}this.$element.data("typeahead",this);this.request("zzzzzz",true);};d.prototype={constructor:d,shouldBeOpen:false,startRequest:function(){var e=this.$element.val();if(e.length>=this.opts.minchar){if(!this.cache[e]){this.request(e);}else{this.render(e,this.cache[e]);}}else{this.close();}},request:function(h,g){var f=["//suggest.expedia.com/hint/es/",this.opts.version,"/ac/",this.opts.locale,"/",encodeURIComponent(h),"?callback=?"].join("");var e;if(g){e=c.noop;}else{e=c.proxy(this.callback,this);}c.getJSON(f,{type:this.opts.mask,ab:this.opts.abtest,lob:this.opts.lob,format:"json",dest:this.opts.dest,maxresults:this.opts.maxresults,rid:this.opts.regionid},e);},callback:function(f){var e=f.sr?f.sr:f.r;var g=f.q;if(e&&this.shouldBeOpen){this.cache[g]=e;this.render(g,e);}else{this.cache[g]=[];this.close();}},render:function(m,h){if(h.length>0&&this.$element.val()==m){h.sort(function(p,o){return p.i-o.i;});var e=this.opts;var f={};c.each(h,function(p,o){var q=d.CATEGORIES[o.t];var r=q?q.name:"Other";if(typeof f[r]==="undefined"){f[r]=true;}});var l={};if(this.opts.lob=="HOTELS"){if(f["Region/City"]){l["Region/City"]=[];}if(f["Attractions"]){l["Attractions"]=[];}if(f["Airports"]){l["Airports"]=[];}if(f["Hotels"]){l["Hotels"]=[];}}else{if(this.opts.lob=="CARS"){if(f["Airports"]){l["Airports"]=[];}if(f["Region/City"]){l["Region/City"]=[];}if(f["Attractions"]){l["Attractions"]=[];}}}c.each(h,function(p,o){var q=d.CATEGORIES[o.t];var r=q?q.name:"Other";if(typeof l[r]==="undefined"){l[r]=[];}l[r].push(o);if(e.forceicon){o.icon=e.forceicon;}else{o.icon=q.icon;}if(typeof o.l!="undefined"){o.l=o.l.replace(/'/g,"&#39;");}else{o.l=o.f.replace(/'/g,"&#39;");}o.data=JSON.stringify(o);});var i={continueText:this.opts.continuetext,closeText:this.opts.closetext,results:h,resultsByCategory:l};var j=this.template(i);this.$ta.html(j);if(this.$ta.is(":hidden")){this.$ta.show();}this.$label.addClass("focused");if(this.opts.tooltip){this.$element[b]("show");this.$element[b]("checkPos",true,true);this.$ta.on("mousedown",c.proxy(this.clickOn,this)).on("mouseup",c.proxy(this.clickOff,this)).on(uitk.clickEvent,c.proxy(this.click,this)).on("mouseenter","a",c.proxy(this.mouseEnter,this));}else{var n=parseInt(this.$element.css("height"),10);var g=this.$element.offset();
this.$ta.css({top:g.top+n+"px",left:g.left+"px"});this.$ta.show();}}else{this.close();}},close:function(){this.$label.removeClass("focused");if(this.opts.tooltip){this.$element[b]("hide");}else{this.$ta.hide();this.$ta.html("");}if(this.bodyClick){this.$ta.unbind("mousedown",c.proxy(this.cancelEvent,this));c(document.body).unbind("mousedown",c.proxy(this.close,this));this.bodyClick=false;}},prev:function(){var e=this.$ta.find("a"),h=this.$ta.find(".highlight").removeClass("highlight"),f=e.index(h),g=e[f-1];if(g){c(g).addClass("highlight");}},next:function(){var e=this.$ta.find("a"),h=this.$ta.find(".highlight").removeClass("highlight"),f=e.index(h),g=e[f+1];if(g){c(g).addClass("highlight");}},removeHighlights:function(){this.$ta.find(".highlight").removeClass("highlight");},selectHighlighted:function(g){var f=this.$ta.find(".highlight");if(g&&f.length===0){f=c(g.target).closest(".results-item").find("a");}this.updateTextField(f);f.removeClass("highlight");},updateTextField:function(e){if(e){var f=e.attr("data-value");if(f){f=f.replace(/&#39;/g,"'");this.$element.val(f);if(this.opts.selectioncallback){if(typeof this.opts.selectioncallback=="function"){this.opts.selectioncallback(e);}else{if(typeof this.opts.selectioncallback=="string"){window[this.opts.selectioncallback](e);}}}}this.close();this.$element.focus();}},focus:function(e){},keyDown:function(e){var f;if(!e){e=window.event;}f=e.keyCode;switch(f){case 27:this.close();e.stopPropagation();break;case 9:case 13:if(this.$ta.find(".highlight").length){e.stopPropagation();if(f===13){e.preventDefault();}this.selectHighlighted();}break;case 39:if(this.$ta.find(".highlight").length){this.ignoreNext=true;e.stopPropagation();this.selectHighlighted();}break;}},keyPress:function(e){if(!e){e=window.event;}if(e.keyCode==13){this.close();}},keyUp:function(e){if(this.ignoreNext){this.ignoreNext=false;return;}if(!e){e=window.event;}switch(e.keyCode){case 27:break;case 37:this.removeHighlights();break;case 38:this.prev();break;case 40:this.next();break;case 16:case 17:case 18:break;case 13:this.shouldBeOpen=false;break;default:this.shouldBeOpen=true;this.startRequest();break;}},blur:function(){if(!this.isClickOn){this.close();}else{this.$ta.bind("mousedown",c.proxy(this.cancelEvent,this));c(document.body).bind("mousedown",c.proxy(this.close,this));this.bodyClick=true;}},clickOn:function(){this.isClickOn=true;},clickOff:function(){this.isClickOn=false;},click:function(f){f.stopPropagation();f.preventDefault();this.selectHighlighted(f);},mouseEnter:function(f){this.removeHighlights();c(f.currentTarget).addClass("highlight");},cancelEvent:function(e){e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation();}if(e.preventDefault){e.preventDefault();}e.cancel=true;e.returnValue=false;},remove:function(){this.$element.autocomplete="on";this.$element.closest("form").attr("autocomplete","on");this.$element.off("focus",c.proxy(this.focus,this)).off("keydown",c.proxy(this.keyDown,this)).off("keyup",c.proxy(this.keyUp,this)).off("keypress",c.proxy(this.keyPress,this)).off("blur",c.proxy(this.blur,this));this.$ta.off("mousedown",c.proxy(this.mouseDown,this)).off("mouseup",c.proxy(this.mouseUp,this)).off("click",c.proxy(this.click,this)).off("mouseenter","a",c.proxy(this.mouseEnter,this)).remove();}};d.AIRPORT=1;d.CITY=2;d.MULTICITY=4;d.NEIGHBORHOOD=8;d.POI=16;d.ADDRESS=32;d.METROCODE=64;d.HOTEL=128;d.REGIONTYPE={"ALL":31,"AIRPORT":1,"CITIES":2};d.LOB={"HOTELS":"HOTELS","PACKAGES":"PACKAGES","FLIGHTS":"FLIGHTS"};d.CATEGORIES={"CITY":{"id":0,name:"Region/City",icon:"location"},"ATTRACTION":{"id":1,name:"Attractions",icon:"location"},"AIRPORT":{"id":2,name:"Airports",icon:"flights"},"HOTEL":{"id":3,name:"Hotels",icon:"hotels"},"ADDRESS":{"id":4,name:"Address",icon:"location"},"TRAINSTATION":{"id":5,name:"Train Station",icon:"train"},"METROSTATION":{"id":6,name:"Metro Station",icon:"train"}};Handlebars.registerHelper("each_with_key",function(j,f){var h,e="",g,i=f.hash.key;for(g in j){if(j.hasOwnProperty(g)){h=j[g];if(i){h[i]=g;}e+=f.fn(h);}}return e;});d.defaultOptions={minchar:3,maxitems:10,version:"v2",locale:"en_US",abtest:"",mask:(d.AIRPORT|d.CITY|d.MULTICITY|d.NEIGHBORHOOD|d.POI),lob:d.LOB.FLIGHTS,dest:false,closetext:"Close",continuetext:"Continue typing to refine search",selectioncallback:null,tooltip:true,forceicon:false};function a(e){if(e.data("typeahead")){return;}var f=e.data("template");if(f==undefined){return;}if(f.indexOf("/")>=0){c.ajax({url:f,success:function(h){var g=e.data();g.rawHtml=true;new d(e,h,g);},dataType:"text"});}else{new d(e,f,e.data());}}c(function(){c("body").on("focus.typeahead",'[data-provide="typeahead"]',function(g){g.preventDefault();var f=c(this);a(f);});a(c(c('[data-provide="typeahead"]')[0]));});}(window.jQuery);(function(j,p,s){var r="hashchange",m=document,o,n=j.event.special,l=m.documentMode,q="on"+r in p&&(l===s||l>7);function t(a){a=a||location.href;return"#"+a.replace(/^[^#]*#?(.*)$/,"$1");}j.fn[r]=function(a){return a?this.bind(r,a):this.trigger(r);};j.fn[r].delay=50;n[r]=j.extend(n[r],{setup:function(){if(q){return false;}j(o.start);},teardown:function(){if(q){return false;}j(o.stop);}});o=(function(){var d={},e,a=t(),c=function(h){return h;},b=c,f=c;d.start=function(){e||g();};d.stop=function(){e&&clearTimeout(e);e=s;};function g(){var h=t(),i=f(a);if(h!==a){b(a=h,i);j(p).trigger(r);}else{if(i!==a){location.href=location.href.replace(/#.*/,"")+i;}}e=setTimeout(g,j.fn[r].delay);}j.browser.msie&&!q&&(function(){var i,h;d.start=function(){if(!i){h=j.fn[r].src;h=h&&h+t();i=j('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){h||b(t());g();}).attr("src",h||"javascript:0").insertAfter("body")[0].contentWindow;m.onpropertychange=function(){try{if(event.propertyName==="title"){i.document.title=m.title;}}catch(u){}};}};d.stop=c;f=function(){return t(i.location.href);};b=function(w,z){var x=i.document,y=j.fn[r].domain;if(w!==z){x.title=m.title;x.open();y&&x.write('<script>document.domain="'+y+'"<\/script>');x.close();i.location.hash=w;}};})();return d;})();})(jQuery,this);if(typeof channelTrackingAlreadyLoaded=="undefined"){var channelTrackingAlreadyLoaded=true;var SEO_SOURCES={"www.google.":[true,null],"search.yahoo.com":[true,null],"wrs.yahoo.com":[true,null],"rc12.overture.com":[true,false],"bing.com/search":[true,null],"terra.es":[true,null],"ya.com":[true,null],"ricerca.virgilio.it":[true,null],"iltrovatore.it":[true,null],"213.215.201.230":[true,null],"orange.fr":[true,null],"lycos.":[true,null],"ask.com":[true,null],"search.aol.":[true,null],"askjeeves.":[true,null],"myway.com":[true,null],"altavista":[true,null],"baidu":[true,null],"daum.net":[true,null],"mywebsearch.com":[true,null],"naver.com":[true,null],"suche.web.de":[true,null],"mvirgilio.it":[true,null],"mywebsearch.com":[true,null],"yandex":[true,null]};var CHANNEL_TYPES="(AFF|OLA|EML|MDP|SEM|OFF|MSN|ICM|SEO|AFM)";if(typeof qUnitTestRun!=="undefined"&&qUnitTestRun!=null){var stub=sinon.stub(this,"getDomainLegacy",function(){return["://www.testDomain.com","www.","testDomain.com"];});}function tracking_array_contains(b,c){var a=b.length;while(a--){if(b[a]===c){return true;}}return false;}function ClearMediaCookieIfItIsTickSeparated(){var j="p1=";var a=document.cookie.indexOf(j);if(a==-1){var c="MediaCookie=";var i=document.cookie.indexOf(c);if(i>=0){var h=i+c.length+1;var d=document.cookie.indexOf(";",h);if(d==-1){d=document.cookie.length;}var f=h+1;if(f<d){var g=document.cookie.substring(h,f);if(g=="`"){var b=new Date(new Date().setTime(new Date().getTime()));var e=getDomainLegacy(location.href);if(e>""){e=e[2]?e[2]:"";document.cookie=c+"; expires="+b.toUTCString()+"; domain=."+e+"; path=/";}}}}}}function GetChannelSpecificCode(d,a){var c=/(?:cuid|tduid)=([^&]*)/i;var b=a;if(c.test(location.search)){b=c.exec(location.search)[1];}return b;}function getChannelSpecificConversionID(a){var b=/(?:mdpdtl|oladtl|afflid|icmdtl)=([^&]*)/i;var c="";if(b.test(location.search)){c=b.exec(location.search)[1];}else{c=a;
}return c;}function IsLockedCode(b,d,c,a){return d&&d!=""&&d.slice(0,3)=="wpk"&&a.slice(0,3)!="wpk";}function GetASPPersistentCookie(){var c=document.cookie.indexOf("aspp=");var a=c+5;if(!c&&("aspp"!=document.cookie.substring(0,4))){return null;}if(c==-1){return null;}var b=document.cookie.indexOf(";",a);if(b==-1){b=document.cookie.length;}return document.cookie.substring(a,b);}function SetASPPersistentCookie(c){ExpireASPPCookieInParentDomain();var a=new Date(new Date().setTime(new Date().getTime()+5*365*24*60*60*1000));var b=getDomainLegacy(location.href);if(b>""){b=b[2]?b[2]:"";document.cookie="aspp="+c+"; expires="+a.toUTCString()+"; domain=."+b+"; path=/";}else{document.cookie="aspp="+c+"; expires="+a.toUTCString()+"; path=/";}if(b==null||b==""){if(typeof dctk!=="undefined"){dctk.loggingAdapter.logMessage("channelTrackingCookieDomainEmpty",["url="+encodeURIComponent(location.href),"cookies="+encodeURIComponent(document.cookie)]);}else{if(typeof expClientLogging!=="undefined"){expClientLogging.logMessage("channelTrackingCookieDomainEmpty",["url="+encodeURIComponent(location.href),"cookies="+encodeURIComponent(document.cookie)]);}}}}function getCookie(c){var a=RegExp("(?:^| |;)"+c+"=([^ ;]*)","i");var b=a.exec(document.cookie);if(b==null||b.length<=1){return null;}return b[1];}function setAspCookie(e,g){if(g==null||e==null){return;}var b=g?"aspp":"asps";var d=getDomain(location.href);var a=g?new Date(new Date().setTime(new Date().getTime()+5*365*24*60*60*1000)):null;var f="/";if(g){ExpireASPPCookieInParentDomain();}var c=b+"="+e+"; ";if(a!=null){c+="expires="+a.toUTCString()+"; ";}if(d>""&&d!="localhost"){c+="domain=."+d+"; ";}c+="path="+f;document.cookie=c;if(d==null||d==""){if(typeof dctk!=="undefined"){dctk.loggingAdapter.logMessage("channelTrackingCookieDomainEmpty",["url="+encodeURIComponent(location.href),"cookies="+encodeURIComponent(document.cookie)]);}else{if(typeof expClientLogging!=="undefined"){expClientLogging.logMessage("channelTrackingCookieDomainEmpty",["url="+encodeURIComponent(location.href),"cookies="+encodeURIComponent(document.cookie)]);}}}}function ExpireASPPCookieInParentDomain(){var a=new Date(new Date().setTime(new Date().getTime()-(5*365*24*60*60*1000)));var b=getDomainLegacy(location.href);b=b[2]?b[2]:"";if(b>""){document.cookie="aspp=; expires="+a.toUTCString()+"; path=/";}}function GetCookieValue(h,c,e){if(e==null){e=",";}h=h+"=";var g=document.cookie.indexOf(h);var a=g+h.length;if(!g&&(h!=document.cookie.substring(0,h.length))){return"";}if(g==-1){return"";}var b=document.cookie.indexOf(";",a);if(b==-1){b=document.cookie.length;}var f=document.cookie.substring(a,b);var d=f.split(e);if(d[c]!=null){return d[c];}else{return null;}}function GetP1CookieTpid(){var f="p1=";var e=document.cookie.indexOf(f);var a=e+f.length;if(e==-1){return GetCookieValue("tpid",1);}var b=document.cookie.indexOf(";",a);if(b==-1){b=document.cookie.length;}var c=(document.cookie.substring(a,b)).split("`");for(var d=0;d<c.length;d++){if(c[d].indexOf("tpid")!=-1){return c[d].split(",")[1];}}}function isValidASPPCookie(a){var c=/v\..*\|.*\|.*\|.*\|.*\|.*\|.*\|.*\|.*\|.*\|.*\|.*/i;var b=c.exec(a);if(!b){return false;}return true;}function captureZanpid(e){var b=getZanpids(e);var d=getCookie("asps");if(b.length<1){return;}if(!isValidAspsCookie(d)){d="0||||||0|"+b.toString();setAspCookie(d,false);return;}var c=d.split("|");c[7]=b.toString();d="";for(var a=0;a<c.length;a++){d+=c[a]+"|";}setAspCookie(d.substring(0,d.length-1),false);}function getZanpids(d){var a=/zanpid=([^&]*)/gi;var b;var c=[];while(b=a.exec(d)){if(b.length>1&&b[1]!=""){c.push(b[1]);}}return c;}function isValidAspsCookie(b){var a=/.*\|.*\|.*\|.*\|.*\|.*\|.*\|.*/i;return b!=null&&b>""&&a.test(b);}function getDomainLegacy(a){var b=a.match(/:\/\/(www\.)?([^\/:]+)/);return b;}function getDomain(a){var b=a!=null?a.match(/:\/\/(?:www\.)?([^\/:]+)/):"";if(b==null||b.length<=1){return"";}return b[1];}ClearMediaCookieIfItIsTickSeparated();var tpid=GetP1CookieTpid();var eapid=GetCookieValue("iEAPID",0);var ChannelType="";var ChannelID="";var ASPPersistentCookie="";if(!(GetASPPersistentCookie()>""&&isValidASPPCookie(GetASPPersistentCookie()))){SetASPPersistentCookie("v.1,0|||||||||||||");}var previousChannelID=GetCookieValue("aspp",1,"|");var previousChannelType=GetCookieValue("aspp",10,"|");var referrerAddress=document.referrer;if(referrerAddress!=""){if(previousChannelID&&previousChannelID!=""&&previousChannelID.slice(0,3).toLowerCase()!="wpk"&&(tpid==20||(previousChannelType&&previousChannelType!=""&&previousChannelType.toLowerCase()!="aff"))){var clearSeocid=false;var clearCookie=false;for(var site in SEO_SOURCES){if(referrerAddress.toLowerCase().indexOf(site)>-1){clearSeocid=SEO_SOURCES[site][0];if(SEO_SOURCES[site][1]==null){clearCookie=(referrerAddress.toLowerCase().indexOf("semcid")==-1);}else{clearCookie=SEO_SOURCES[site][1];}}}if(clearCookie){SetASPPersistentCookie("v.1,0|||||||||||||");}if(clearSeocid){var urlAndQueryAttributes=window.location.toString().split("?");if(urlAndQueryAttributes.length>1){var url=urlAndQueryAttributes[0];var queryAttributes=urlAndQueryAttributes[1].split("&");var relocate=false;for(var index=0;index<queryAttributes.length;index++){if(queryAttributes[index].toLowerCase().indexOf("seocid")==-1){url+=(index==0)?"?":"&";url+=queryAttributes[index];}else{relocate=true;}}if(relocate==true){window.location=url;}}}}}(function(){var e=new RegExp(CHANNEL_TYPES+"cid=([^&]*)","i");var f=e.exec(window.location.search);if(!f){f=e.exec(window.location.hash);}if(!f){f=e.exec(document.referrer);}if(!!f){ChannelType=f[1].toUpperCase();ChannelID=escape(f[2]);if(ChannelID!==""){ASPPersistentCookie=GetASPPersistentCookie();if(!ASPPersistentCookie>""){SetASPPersistentCookie("v.1,0|||||||||||||");ASPPersistentCookie=GetASPPersistentCookie();}if(!IsLockedCode(previousChannelType,previousChannelID,ChannelType,ChannelID)){var b=new Date(new Date().setTime(new Date().getTime()+30*24*60*60*1000));var j=b.getFullYear().toString();var g=(b.getMonth()+1).toString();if(g.length<2){g="0"+g;}var a=b.getDate().toString();if(a.length<2){a="0"+a;}var h=j+g+a;var c=ASPPersistentCookie.split("|");c[1]=ChannelID;c[10]=ChannelType;c[11]=h;c[12]=GetChannelSpecificCode(ChannelID,c[12]);c[13]=getChannelSpecificConversionID(c[13]);ASPPersistentCookie="";for(var d=0;d<c.length;d++){ASPPersistentCookie+=c[d]+"|";}ASPPersistentCookie=ASPPersistentCookie.substring(0,ASPPersistentCookie.length-1);SetASPPersistentCookie(ASPPersistentCookie);}}}if(window.location.search.search(/zanpid/i)>-1){captureZanpid(window.location.search);}})();if(location.search.indexOf("cntrkrdebug")>-1){if(window.console&&window.console.log){console.log("Previous Channel Type: "+previousChannelType+"\n Previous Channel ID: "+previousChannelID+"\n Current Channel Type: "+ChannelType+"\n Current Channel ID: "+ChannelID+"\n ASPP Cookie Value: "+getCookie("aspp")+"\n ASPS Cookie Value: "+getCookie("asps"));}}}define("calendar",[],function(){return{};});define("hashChange",function(){return{};});
/*!  generated on 2014-06-05 16:54:25.323 PDT(-0700) in 328 ms  */

/*!  served in 0 ms  */
