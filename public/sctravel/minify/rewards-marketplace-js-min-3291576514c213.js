$(document).ready(function(){expads.initialize();});$("#special_offers_wrap a").click(function(){var b=$.trim($(this).attr("href"));var c=$(this).attr("data-isregistered");var a=$(this).attr("data-offerid");if(c==="false"){registerOffer(a);}if(b.charAt(0)!=="/"&&b.indexOf("expedia")===-1){$(this).attr("target","_blank");}});function registerOffer(a){$.ajax({type:"POST",data:"offerId="+a,url:"/promo/registerOffer",async:false,dataType:"json",success:function(b){if(b.actionSuccess){$("#registerLink").hide();$("#registered").show();}},error:function(b){}});return false;}var baseSearchUrl="/Hotel-Search?star=0",requiredInputs=["#hotelDestination"],searchParamInputSelectors={"destination":"#hotelDestination","startDate":"#checkInDate","endDate":"#checkOutDate","adults":"#numAdultsPerRoomParam","children":"#childrenAgesPerRoomParam"};function buildSearchHref(){var b=[baseSearchUrl];$.each(searchParamInputSelectors,function a(e,c){var d=$(c).val();if(d){b.push([e,d].join("="));}});return b.join("&");}function validate(){var c=true,a=$("#errorMsg");a.hide();$.each(requiredInputs,function b(f,d){var h=$(d),e=h.val(),g=e&&(e!=h.data("currentplaceholder"));if(g){h.parent().removeClass("invalid");}else{c=false;h.parent().addClass("invalid");a.show();}});return c;}function searchForHotels(){if(validate()){window.location.href=buildSearchHref();}}!function(c){var b="uitk_tooltip";var d=function(e,g,f){this.$element=c(e);this.$label=this.$element.closest("label");if(!f.rawHtml){if(uitk){this.template=uitk.getCompiledTemplate(g);}else{g=c(g).html();this.template=Handlebars.compile(g);}}else{this.template=Handlebars.compile(g);}this.opts=c.extend(true,{},d.defaultOptions,f);this.searchType=null;this.cache={};this.ignoreNext=false;this.isClickOn=false;this.bodyClick=false;this.$element.autocomplete="off";this.$element.closest("form").attr("autocomplete","off");this.$element.on("focus",c.proxy(this.focus,this)).on("keydown",c.proxy(this.keyDown,this)).on("keyup",c.proxy(this.keyUp,this)).on("keypress",c.proxy(this.keyPress,this)).on("blur",c.proxy(this.blur,this));this.$ta=c('<div class="typeahead">');if(this.opts.tooltip){this.$element[b]({content:this.$ta,template:'<div class="uitk-tooltip"><div class="tooltip-inner"></div><span class="tooltip-arrow-border"></span><span class="tooltip-arrow"></span></div>'});}else{this.$ta.appendTo(document.body);if(!uitk.isTouchDevice){this.$ta.on("mousedown",c.proxy(this.clickOn,this)).on("mouseup",c.proxy(this.clickOff,this)).on("click",c.proxy(this.click,this)).on("mouseenter","a",c.proxy(this.mouseEnter,this));}else{this.$ta.on("click",function(h){h.preventDefault();});}}this.$element.data("typeahead",this);this.request("zzzzzz",true);};d.prototype={constructor:d,shouldBeOpen:false,startRequest:function(){var e=this.$element.val();if(e.length>=this.opts.minchar){if(!this.cache[e]){this.request(e);}else{this.render(e,this.cache[e]);}}else{this.close();}},request:function(h,g){var f=["//suggest.expedia.com/hint/es/",this.opts.version,"/ac/",this.opts.locale,"/",encodeURIComponent(h),"?callback=?"].join("");var e;if(g){e=c.noop;}else{e=c.proxy(this.callback,this);}c.getJSON(f,{type:this.opts.mask,ab:this.opts.abtest,lob:this.opts.lob,format:"json",dest:this.opts.dest,maxresults:this.opts.maxresults,rid:this.opts.regionid},e);},callback:function(f){var e=f.sr?f.sr:f.r;var g=f.q;if(e&&this.shouldBeOpen){this.cache[g]=e;this.render(g,e);}else{this.cache[g]=[];this.close();}},render:function(l,h){if(h.length>0&&this.$element.val()==l){h.sort(function(o,n){return o.i-n.i;});var e=this.opts;var f={};c.each(h,function(o,n){var p=d.CATEGORIES[n.t];var q=p?p.name:"Other";if(typeof f[q]==="undefined"){f[q]=true;}});var k={};if(this.opts.lob=="HOTELS"){if(f["Region/City"]){k["Region/City"]=[];}if(f["Attractions"]){k["Attractions"]=[];}if(f["Airports"]){k["Airports"]=[];}if(f["Hotels"]){k["Hotels"]=[];}}else{if(this.opts.lob=="CARS"){if(f["Airports"]){k["Airports"]=[];}if(f["Region/City"]){k["Region/City"]=[];}if(f["Attractions"]){k["Attractions"]=[];}}}c.each(h,function(o,n){var p=d.CATEGORIES[n.t];var q=p?p.name:"Other";if(typeof k[q]==="undefined"){k[q]=[];}k[q].push(n);if(e.forceicon){n.icon=e.forceicon;}else{n.icon=p.icon;}if(typeof n.l!="undefined"){n.l=n.l.replace(/'/g,"&#39;");}else{n.l=n.f.replace(/'/g,"&#39;");}n.data=JSON.stringify(n);});var i={continueText:this.opts.continuetext,closeText:this.opts.closetext,results:h,resultsByCategory:k};var j=this.template(i);this.$ta.html(j);if(this.$ta.is(":hidden")){this.$ta.show();}this.$label.addClass("focused");if(this.opts.tooltip){this.$element[b]("show");this.$element[b]("checkPos",true,true);this.$ta.on("mousedown",c.proxy(this.clickOn,this)).on("mouseup",c.proxy(this.clickOff,this)).on(uitk.clickEvent,c.proxy(this.click,this)).on("mouseenter","a",c.proxy(this.mouseEnter,this));}else{var m=parseInt(this.$element.css("height"),10);var g=this.$element.offset();this.$ta.css({top:g.top+m+"px",left:g.left+"px"});this.$ta.show();}}else{this.close();}},close:function(){this.$label.removeClass("focused");if(this.opts.tooltip){this.$element[b]("hide");}else{this.$ta.hide();this.$ta.html("");}if(this.bodyClick){this.$ta.unbind("mousedown",c.proxy(this.cancelEvent,this));c(document.body).unbind("mousedown",c.proxy(this.close,this));this.bodyClick=false;}},prev:function(){var e=this.$ta.find("a"),h=this.$ta.find(".highlight").removeClass("highlight"),f=e.index(h),g=e[f-1];if(g){c(g).addClass("highlight");}},next:function(){var e=this.$ta.find("a"),h=this.$ta.find(".highlight").removeClass("highlight"),f=e.index(h),g=e[f+1];if(g){c(g).addClass("highlight");}},removeHighlights:function(){this.$ta.find(".highlight").removeClass("highlight");},selectHighlighted:function(g){var f=this.$ta.find(".highlight");if(g&&f.length===0){f=c(g.target).closest(".results-item").find("a");}this.updateTextField(f);f.removeClass("highlight");},updateTextField:function(e){if(e){var f=e.attr("data-value");if(f){f=f.replace(/&#39;/g,"'");this.$element.val(f);if(this.opts.selectioncallback){if(typeof this.opts.selectioncallback=="function"){this.opts.selectioncallback(e);}else{if(typeof this.opts.selectioncallback=="string"){window[this.opts.selectioncallback](e);}}}}this.close();this.$element.focus();}},focus:function(e){},keyDown:function(e){var f;if(!e){e=window.event;}f=e.keyCode;switch(f){case 27:this.close();e.stopPropagation();break;case 9:case 13:if(this.$ta.find(".highlight").length){e.stopPropagation();if(f===13){e.preventDefault();}this.selectHighlighted();}break;case 39:if(this.$ta.find(".highlight").length){this.ignoreNext=true;e.stopPropagation();this.selectHighlighted();}break;}},keyPress:function(e){if(!e){e=window.event;}if(e.keyCode==13){this.close();}},keyUp:function(e){if(this.ignoreNext){this.ignoreNext=false;return;}if(!e){e=window.event;}switch(e.keyCode){case 27:break;case 37:this.removeHighlights();break;case 38:this.prev();break;case 40:this.next();break;case 16:case 17:case 18:break;case 13:this.shouldBeOpen=false;break;default:this.shouldBeOpen=true;this.startRequest();break;}},blur:function(){if(!this.isClickOn){this.close();}else{this.$ta.bind("mousedown",c.proxy(this.cancelEvent,this));c(document.body).bind("mousedown",c.proxy(this.close,this));this.bodyClick=true;}},clickOn:function(){this.isClickOn=true;},clickOff:function(){this.isClickOn=false;},click:function(f){f.stopPropagation();f.preventDefault();this.selectHighlighted(f);},mouseEnter:function(f){this.removeHighlights();c(f.currentTarget).addClass("highlight");},cancelEvent:function(e){e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation();}if(e.preventDefault){e.preventDefault();}e.cancel=true;e.returnValue=false;},remove:function(){this.$element.autocomplete="on";this.$element.closest("form").attr("autocomplete","on");this.$element.off("focus",c.proxy(this.focus,this)).off("keydown",c.proxy(this.keyDown,this)).off("keyup",c.proxy(this.keyUp,this)).off("keypress",c.proxy(this.keyPress,this)).off("blur",c.proxy(this.blur,this));
this.$ta.off("mousedown",c.proxy(this.mouseDown,this)).off("mouseup",c.proxy(this.mouseUp,this)).off("click",c.proxy(this.click,this)).off("mouseenter","a",c.proxy(this.mouseEnter,this)).remove();}};d.AIRPORT=1;d.CITY=2;d.MULTICITY=4;d.NEIGHBORHOOD=8;d.POI=16;d.ADDRESS=32;d.METROCODE=64;d.HOTEL=128;d.REGIONTYPE={"ALL":31,"AIRPORT":1,"CITIES":2};d.LOB={"HOTELS":"HOTELS","PACKAGES":"PACKAGES","FLIGHTS":"FLIGHTS"};d.CATEGORIES={"CITY":{"id":0,name:"Region/City",icon:"location"},"ATTRACTION":{"id":1,name:"Attractions",icon:"location"},"AIRPORT":{"id":2,name:"Airports",icon:"flights"},"HOTEL":{"id":3,name:"Hotels",icon:"hotels"},"ADDRESS":{"id":4,name:"Address",icon:"location"},"TRAINSTATION":{"id":5,name:"Train Station",icon:"train"},"METROSTATION":{"id":6,name:"Metro Station",icon:"train"}};Handlebars.registerHelper("each_with_key",function(j,f){var h,e="",g,i=f.hash.key;for(g in j){if(j.hasOwnProperty(g)){h=j[g];if(i){h[i]=g;}e+=f.fn(h);}}return e;});d.defaultOptions={minchar:3,maxitems:10,version:"v2",locale:"en_US",abtest:"",mask:(d.AIRPORT|d.CITY|d.MULTICITY|d.NEIGHBORHOOD|d.POI),lob:d.LOB.FLIGHTS,dest:false,closetext:"Close",continuetext:"Continue typing to refine search",selectioncallback:null,tooltip:true,forceicon:false};function a(e){if(e.data("typeahead")){return;}var f=e.data("template");if(f==undefined){return;}if(f.indexOf("/")>=0){c.ajax({url:f,success:function(h){var g=e.data();g.rawHtml=true;new d(e,h,g);},dataType:"text"});}else{new d(e,f,e.data());}}c(function(){c("body").on("focus.typeahead",'[data-provide="typeahead"]',function(g){g.preventDefault();var f=c(this);a(f);});a(c(c('[data-provide="typeahead"]')[0]));});}(window.jQuery);if("undefined"==typeof(exp)){var exp={};}if("undefined"==typeof(exp.core)){exp.core={};}if("undefined"==typeof(exp.core.date)){exp.core.date={};}exp.core.date.Calendar=function(a){var b={config:a,rM:[31,28,31,30,31,30,31,31,30,31,30,31],getDateFormat:function(){return this.config.getDateFormat();},getDateSeparator:function(){return this.config.getDateSeparator();},getStartOfWeek:function(){return this.config.getStartOfWeek();},getDateFromString:function(g){if(!g||!g.length){return null;}g=g.replace(/\s+/g,"");if(g.match(/[^-|\d|\.|\/]/)){return null;}var h=g.split(/-|\.|\//);for(var f=0;f<h.length;f++){h[f]=parseInt(h[f],10);}if(!h[1]){return null;}var c,k,l;var e=this.getDateFormat();if(e=="yymmdd"){if(!h[2]){return null;}c=h[1];k=h[2];l=h[0];}else{if(e=="mmddyy"){c=h[0];k=h[1];}else{c=h[1];k=h[0];}if(h[2]){l=h[2];}else{l=this.DefYr(c-1,k);}}var j=new Date().getFullYear();c-=1;if(l.toString().length===2){l+=2000;}if(l<j){l=j;}if(l<1601||l>4500||c<0||c>11||k<1||k>this.getMonthCount(c,l)){return null;}return new Date(l,c,k);},toStringFromComp:function(i,c,j){function h(d){return d<10?"0"+d:d;}var f="";var g=this.getDateSeparator();var e=this.getDateFormat();i=h(i);c=h(c);if(e=="mmddyy"){f=c+g+i+g+j;}else{if(e=="ddmmyy"){f=i+g+c+g+j;}else{f=j+g+c+g+i;}}return f;},toStringFromDate:function(f){var e="";var g=this.getDateSeparator();var d=this.getDateFormat();var h=f.getMonth()+1;var c=f.getDate();var i=f.getFullYear();if(d=="mmddyy"){e=h+g+c+g+i;}else{if(d=="ddmmyy"){e=c+g+h+g+i;}else{e=i+g+h+g+c;}}return e;},IsLY:function(c){if(0==c%4&&((c%100!=0)||(c%400==0))){return true;}else{return false;}},DefYr:function(c,g){var e=new Date();var f=(e.getYear()<1000)?1900+e.getYear():e.getYear();if(c<e.getMonth()||(c==e.getMonth()&&g<e.getDate())){f++;}return f;},getMonthCount:function(d,f){var e=this.rM[d];if((1==d)&&this.IsLY(f)){e++;}return e;},IsLastDayOfMonth:function(c){return this.getMonthCount(c.getMonth(),c.getFullYear())==c.getDate();},incrementMonth:function(c){if(c.getMonth()==11){c.setMonth(0);c.setFullYear(c.getFullYear()+1);}else{c.setMonth(c.getMonth()+1);}return c;},decrementMonth:function(c){if(c.getMonth()==0){c.setMonth(11);c.setFullYear(c.getFullYear()-1);}else{c.setMonth(c.getMonth()-1);}return c;}};return b;};exp.core.date.DateUpdater=function(d,b){var a;var c={config:b,calendar:d,register:function(j,r,m,n,l,u){m=m||0;var s=$(j);var i=this.calendar.getDateFromString(s[0].value);var q=$(r);var h=this.calendar.getDateFromString(q[0].value);var g=this.calendar.getDateSeparator();var f=this.calendar.getDateFormat();var t=f.substring(0,2)+g+f.substring(2,4)+g+f.substring(4,6);var e=new Date();e.setHours(0,0,0,0);if(i&&i.valueOf()<e.valueOf()){s[0].value=t;}if(h&&h.valueOf()<e.valueOf()){q[0].value=t;}a=this;var p=function(){a.update("#"+j.id,"#"+r.id,m,n,u);};var o=function(){a.updateByNights(s[0],q[0],m);a.update(s[0],q[0],m,n);};$("body").on("blur","#"+j.id,p);$("body").on("focus","#"+j.id,p);$("body").on("blur","#"+r.id,p);$("body").on("focus","#"+r.id,p);var k=$("#"+j.id+"-stay-nights");if(k.length!=0){k.change(o);k.keypress(o);}},days_between:function(i,h){var j=1000*60*60*24;var g=i.getTime();var f=h.getTime();var e=Math.abs(g-f);return Math.round(e/j);},updateNumberOfNights:function(i,h){var g=document.getElementById("hot-sear-date-num-nights");if(this.config!=undefined&&g!=null){var e=this.config.getNightTextConfig();var f=this.days_between(h,i);if(f>1){g.innerHTML=f+" "+e[1];}else{g.innerHTML=e[0];}g.style.display="inline";}},updateDayName:function(j,f){var i=$("#"+j.id+"-day");if(this.config!=undefined&&i.length!=0){try{var e=f.getDay();if(e==undefined){i.html("");return;}var h=this.config.getDayNames();i.html(h[e]);}catch(g){i.html("");}}},updateByNights:function(f,g,i){var e=this.calendar.getDateFromString($(f).val());var h=$("#"+f.id+"-stay-nights");if(e){e.setDate(e.getDate()+parseInt(h.get(0).value));$(g).val(this.calendar.toStringFromComp(e.getDate(),e.getMonth()+1,e.getFullYear()));}},update:function(g,m,j,k,p){var n=$(g);var l=$(m);var f=this.calendar.getDateFromString(n.val());var e=this.calendar.getDateFromString(l.val());var h=$("#"+g.id+"-stay-nights");j=n.attr("data-min-booking-length")||0;if(!p||isNaN(parseInt(p))||e){p=0;}this.updateDayName(g,f);this.updateDayName(m,e);if(f&&e){this.updateNumberOfNights(f,e);}if(f){if(e&&h.length!=0){var q=Math.round((e-f)/1000/60/60/24);if(q<1){q=h.get(0).value;}h.get(0).value=q;}var o=Math.max(j,p);f=new Date(f.valueOf()+1000*3600*24*o);var i=this.calendar.toStringFromComp(f.getDate(),f.getMonth()+1,f.getFullYear());if(e&&e<=f){e=null;}if(null==e&&(l.attr("data-optional")!="true"||l.val()!="")){e=this.calendar.getDateFromString(n.val());this.updateNumberOfNights(e,f);if(h.length!=0&&h.get(0).value!=1){f.setDate(f.getDate()+parseInt(h.get(0).value)-1);var i=this.calendar.toStringFromComp(f.getDate(),f.getMonth()+1,f.getFullYear());}if(i!=l.val()){l.val(i);l.blur();}if(exp.core.date.datePicker){exp.core.date.datePicker.entries[l.attr("id")].currentValue=f;}this.updateDayName(m,f);}}if(n.is(".fieldDefaultText")){n.removeClass("fieldDefaultText");}if(l.is(".fieldDefaultText")){l.removeClass("fieldDefaultText");}uitk.updatePlaceholderClass(n);uitk.updatePlaceholderClass(l);}};return c;};exp.core.date.CalendarControl=function(){var a=function(){var n="mmddyy";var g="/";var o=0;var e=["January","February","March","April","May","June","July","August","September","October","November","December"];var f=["JAN","FEV","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var q=["S","M","T","W","T","F","S"];var j="Close";var i="";var d=["night","nights"];var b=function(r){d=r;};var l=function(r,s){n=r;g=s;};var p=function(s,r,u,t){o=s;e=r;q=u;if(t!=undefined){c=t;}};var m=function(s,r,t){o=s;f=r;q=t;};var h=function(r){j=r;};var k=function(r){i=r;};return{setFormatConfig:l,setUnitConfig:p,setSingleUnitConfig:m,setTextConfig:h,setLocaleConfig:k,setNightTextConfig:b,getDateFormat:function(){return n;},getDateSeparator:function(){return g;},getStartOfWeek:function(){return o;},getMonths:function(){return e;},getSingleMonths:function(){return f;},getDayAbbrs:function(){return q;},getDayNames:function(){return c;},getCloseText:function(){return j;},getLocaleConfig:function(){return i;
},getNightTextConfig:function(){return d;}};};return{Config:new a("ddmmyy",".",2)};}();
/*!  generated on 2014-06-05 14:31:38.907 PDT(-0700) in 15 ms  */

/*!  served in 16 ms  */
